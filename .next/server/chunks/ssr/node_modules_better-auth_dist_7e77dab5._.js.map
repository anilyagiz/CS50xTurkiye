{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.CMQ3rA-I.mjs"],"sourcesContent":["const _envShim = /* @__PURE__ */ Object.create(null);\nconst _getEnv = (useShim) => globalThis.process?.env || //@ts-expect-error\nglobalThis.Deno?.env.toObject() || //@ts-expect-error\nglobalThis.__env__ || (useShim ? _envShim : globalThis);\nconst env = new Proxy(_envShim, {\n  get(_, prop) {\n    const env2 = _getEnv();\n    return env2[prop] ?? _envShim[prop];\n  },\n  has(_, prop) {\n    const env2 = _getEnv();\n    return prop in env2 || prop in _envShim;\n  },\n  set(_, prop, value) {\n    const env2 = _getEnv(true);\n    env2[prop] = value;\n    return true;\n  },\n  deleteProperty(_, prop) {\n    if (!prop) {\n      return false;\n    }\n    const env2 = _getEnv(true);\n    delete env2[prop];\n    return true;\n  },\n  ownKeys() {\n    const env2 = _getEnv(true);\n    return Object.keys(env2);\n  }\n});\nfunction toBoolean(val) {\n  return val ? val !== \"false\" : false;\n}\nconst nodeENV = typeof process !== \"undefined\" && process.env && process.env.NODE_ENV || \"\";\nconst isProduction = nodeENV === \"production\";\nconst isDevelopment = nodeENV === \"dev\" || nodeENV === \"development\";\nconst isTest = () => nodeENV === \"test\" || toBoolean(env.TEST);\nfunction getEnvVar(key, fallback) {\n  if (typeof process !== \"undefined\" && process.env) {\n    return process.env[key] ?? fallback;\n  }\n  if (typeof Deno !== \"undefined\") {\n    return Deno.env.get(key) ?? fallback;\n  }\n  if (typeof Bun !== \"undefined\") {\n    return Bun.env[key] ?? fallback;\n  }\n  return fallback;\n}\nfunction getBooleanEnvVar(key, fallback = true) {\n  const value = getEnvVar(key);\n  if (!value) return fallback;\n  return value !== \"0\" && value.toLowerCase() !== \"false\" && value !== \"\";\n}\nconst ENV = {\n  get BETTER_AUTH_TELEMETRY_ENDPOINT() {\n    return getEnvVar(\n      \"BETTER_AUTH_TELEMETRY_ENDPOINT\",\n      \"https://telemetry.better-auth.com/v1/track\"\n    );\n  }\n};\n\nexport { ENV as E, isProduction as a, isDevelopment as b, getBooleanEnvVar as c, env as e, getEnvVar as g, isTest as i };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA,MAAM,WAAW,aAAa,GAAG,OAAO,MAAM,CAAC;AAC/C,MAAM,UAAU,CAAC,UAAY,WAAW,OAAO,EAAE,OAAO,kBAAkB;IAC1E,WAAW,IAAI,EAAE,IAAI,cAAc,kBAAkB;IACrD,WAAW,OAAO,IAAI,CAAC,UAAU,WAAW,UAAU;AACtD,MAAM,MAAM,IAAI,MAAM,UAAU;IAC9B,KAAI,CAAC,EAAE,IAAI;QACT,MAAM,OAAO;QACb,OAAO,IAAI,CAAC,KAAK,IAAI,QAAQ,CAAC,KAAK;IACrC;IACA,KAAI,CAAC,EAAE,IAAI;QACT,MAAM,OAAO;QACb,OAAO,QAAQ,QAAQ,QAAQ;IACjC;IACA,KAAI,CAAC,EAAE,IAAI,EAAE,KAAK;QAChB,MAAM,OAAO,QAAQ;QACrB,IAAI,CAAC,KAAK,GAAG;QACb,OAAO;IACT;IACA,gBAAe,CAAC,EAAE,IAAI;QACpB,IAAI,CAAC,MAAM;YACT,OAAO;QACT;QACA,MAAM,OAAO,QAAQ;QACrB,OAAO,IAAI,CAAC,KAAK;QACjB,OAAO;IACT;IACA;QACE,MAAM,OAAO,QAAQ;QACrB,OAAO,OAAO,IAAI,CAAC;IACrB;AACF;AACA,SAAS,UAAU,GAAG;IACpB,OAAO,MAAM,QAAQ,UAAU;AACjC;AACA,MAAM,UAAU,OAAO,YAAY,eAAe,QAAQ,GAAG,uDAA4B;AACzF,MAAM,eAAe,YAAY;AACjC,MAAM,gBAAgB,YAAY,SAAS,YAAY;AACvD,MAAM,SAAS,IAAM,YAAY,UAAU,UAAU,IAAI,IAAI;AAC7D,SAAS,UAAU,GAAG,EAAE,QAAQ;IAC9B,IAAI,OAAO,YAAY,eAAe,QAAQ,GAAG,EAAE;QACjD,OAAO,QAAQ,GAAG,CAAC,IAAI,IAAI;IAC7B;IACA,IAAI,OAAO,SAAS,aAAa;QAC/B,OAAO,KAAK,GAAG,CAAC,GAAG,CAAC,QAAQ;IAC9B;IACA,IAAI,OAAO,QAAQ,aAAa;QAC9B,OAAO,IAAI,GAAG,CAAC,IAAI,IAAI;IACzB;IACA,OAAO;AACT;AACA,SAAS,iBAAiB,GAAG,EAAE,WAAW,IAAI;IAC5C,MAAM,QAAQ,UAAU;IACxB,IAAI,CAAC,OAAO,OAAO;IACnB,OAAO,UAAU,OAAO,MAAM,WAAW,OAAO,WAAW,UAAU;AACvE;AACA,MAAM,MAAM;IACV,IAAI,kCAAiC;QACnC,OAAO,UACL,kCACA;IAEJ;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 85, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.CkGsgrvv.mjs"],"sourcesContent":["import { atom, onMount } from 'nanostores';\n\nconst isServer = typeof window === \"undefined\";\nconst useAuthQuery = (initializedAtom, path, $fetch, options) => {\n  const value = atom({\n    data: null,\n    error: null,\n    isPending: true,\n    isRefetching: false,\n    refetch: (queryParams) => {\n      return fn(queryParams);\n    }\n  });\n  const fn = (queryParams) => {\n    const opts = typeof options === \"function\" ? options({\n      data: value.get().data,\n      error: value.get().error,\n      isPending: value.get().isPending\n    }) : options;\n    $fetch(path, {\n      ...opts,\n      query: {\n        ...opts?.query,\n        ...queryParams?.query\n      },\n      async onSuccess(context) {\n        value.set({\n          data: context.data,\n          error: null,\n          isPending: false,\n          isRefetching: false,\n          refetch: value.value.refetch\n        });\n        await opts?.onSuccess?.(context);\n      },\n      async onError(context) {\n        const { request } = context;\n        const retryAttempts = typeof request.retry === \"number\" ? request.retry : request.retry?.attempts;\n        const retryAttempt = request.retryAttempt || 0;\n        if (retryAttempts && retryAttempt < retryAttempts) return;\n        value.set({\n          error: context.error,\n          data: null,\n          isPending: false,\n          isRefetching: false,\n          refetch: value.value.refetch\n        });\n        await opts?.onError?.(context);\n      },\n      async onRequest(context) {\n        const currentValue = value.get();\n        value.set({\n          isPending: currentValue.data === null,\n          data: currentValue.data,\n          error: null,\n          isRefetching: true,\n          refetch: value.value.refetch\n        });\n        await opts?.onRequest?.(context);\n      }\n    }).catch((error) => {\n      value.set({\n        error,\n        data: null,\n        isPending: false,\n        isRefetching: false,\n        refetch: value.value.refetch\n      });\n    });\n  };\n  initializedAtom = Array.isArray(initializedAtom) ? initializedAtom : [initializedAtom];\n  let isMounted = false;\n  for (const initAtom of initializedAtom) {\n    initAtom.subscribe(() => {\n      if (isServer) {\n        return;\n      }\n      if (isMounted) {\n        fn();\n      } else {\n        onMount(value, () => {\n          setTimeout(() => {\n            fn();\n          }, 0);\n          isMounted = true;\n          return () => {\n            value.off();\n            initAtom.off();\n          };\n        });\n      }\n    });\n  }\n  return value;\n};\n\nexport { useAuthQuery as u };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,WAAW,gBAAkB;AACnC,MAAM,eAAe,CAAC,iBAAiB,MAAM,QAAQ;IACnD,MAAM,QAAQ,IAAA,mJAAI,EAAC;QACjB,MAAM;QACN,OAAO;QACP,WAAW;QACX,cAAc;QACd,SAAS,CAAC;YACR,OAAO,GAAG;QACZ;IACF;IACA,MAAM,KAAK,CAAC;QACV,MAAM,OAAO,OAAO,YAAY,aAAa,QAAQ;YACnD,MAAM,MAAM,GAAG,GAAG,IAAI;YACtB,OAAO,MAAM,GAAG,GAAG,KAAK;YACxB,WAAW,MAAM,GAAG,GAAG,SAAS;QAClC,KAAK;QACL,OAAO,MAAM;YACX,GAAG,IAAI;YACP,OAAO;gBACL,GAAG,MAAM,KAAK;gBACd,GAAG,aAAa,KAAK;YACvB;YACA,MAAM,WAAU,OAAO;gBACrB,MAAM,GAAG,CAAC;oBACR,MAAM,QAAQ,IAAI;oBAClB,OAAO;oBACP,WAAW;oBACX,cAAc;oBACd,SAAS,MAAM,KAAK,CAAC,OAAO;gBAC9B;gBACA,MAAM,MAAM,YAAY;YAC1B;YACA,MAAM,SAAQ,OAAO;gBACnB,MAAM,EAAE,OAAO,EAAE,GAAG;gBACpB,MAAM,gBAAgB,OAAO,QAAQ,KAAK,KAAK,WAAW,QAAQ,KAAK,GAAG,QAAQ,KAAK,EAAE;gBACzF,MAAM,eAAe,QAAQ,YAAY,IAAI;gBAC7C,IAAI,iBAAiB,eAAe,eAAe;gBACnD,MAAM,GAAG,CAAC;oBACR,OAAO,QAAQ,KAAK;oBACpB,MAAM;oBACN,WAAW;oBACX,cAAc;oBACd,SAAS,MAAM,KAAK,CAAC,OAAO;gBAC9B;gBACA,MAAM,MAAM,UAAU;YACxB;YACA,MAAM,WAAU,OAAO;gBACrB,MAAM,eAAe,MAAM,GAAG;gBAC9B,MAAM,GAAG,CAAC;oBACR,WAAW,aAAa,IAAI,KAAK;oBACjC,MAAM,aAAa,IAAI;oBACvB,OAAO;oBACP,cAAc;oBACd,SAAS,MAAM,KAAK,CAAC,OAAO;gBAC9B;gBACA,MAAM,MAAM,YAAY;YAC1B;QACF,GAAG,KAAK,CAAC,CAAC;YACR,MAAM,GAAG,CAAC;gBACR;gBACA,MAAM;gBACN,WAAW;gBACX,cAAc;gBACd,SAAS,MAAM,KAAK,CAAC,OAAO;YAC9B;QACF;IACF;IACA,kBAAkB,MAAM,OAAO,CAAC,mBAAmB,kBAAkB;QAAC;KAAgB;IACtF,IAAI,YAAY;IAChB,KAAK,MAAM,YAAY,gBAAiB;QACtC,SAAS,SAAS,CAAC;YACjB,wCAAc;gBACZ;YACF;;;QAeF;IACF;IACA,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 179, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.DdzSJf-n.mjs"],"sourcesContent":["class BetterAuthError extends Error {\n  constructor(message, cause) {\n    super(message);\n    this.name = \"BetterAuthError\";\n    this.message = message;\n    this.cause = cause;\n    this.stack = \"\";\n  }\n}\nclass MissingDependencyError extends BetterAuthError {\n  constructor(pkgName) {\n    super(\n      `The package \"${pkgName}\" is required. Make sure it is installed.`,\n      pkgName\n    );\n  }\n}\n\nexport { BetterAuthError as B, MissingDependencyError as M };\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,wBAAwB;IAC5B,YAAY,OAAO,EAAE,KAAK,CAAE;QAC1B,KAAK,CAAC;QACN,IAAI,CAAC,IAAI,GAAG;QACZ,IAAI,CAAC,OAAO,GAAG;QACf,IAAI,CAAC,KAAK,GAAG;QACb,IAAI,CAAC,KAAK,GAAG;IACf;AACF;AACA,MAAM,+BAA+B;IACnC,YAAY,OAAO,CAAE;QACnB,KAAK,CACH,CAAC,aAAa,EAAE,QAAQ,yCAAyC,CAAC,EAClE;IAEJ;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 204, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/plugins/access/index.mjs"],"sourcesContent":["import { B as BetterAuthError } from '../../shared/better-auth.DdzSJf-n.mjs';\n\nfunction role(statements) {\n  return {\n    authorize(request, connector = \"AND\") {\n      let success = false;\n      for (const [requestedResource, requestedActions] of Object.entries(\n        request\n      )) {\n        const allowedActions = statements[requestedResource];\n        if (!allowedActions) {\n          return {\n            success: false,\n            error: `You are not allowed to access resource: ${requestedResource}`\n          };\n        }\n        if (Array.isArray(requestedActions)) {\n          success = requestedActions.every(\n            (requestedAction) => allowedActions.includes(requestedAction)\n          );\n        } else {\n          if (typeof requestedActions === \"object\") {\n            const actions = requestedActions;\n            if (actions.connector === \"OR\") {\n              success = actions.actions.some(\n                (requestedAction) => allowedActions.includes(requestedAction)\n              );\n            } else {\n              success = actions.actions.every(\n                (requestedAction) => allowedActions.includes(requestedAction)\n              );\n            }\n          } else {\n            throw new BetterAuthError(\"Invalid access control request\");\n          }\n        }\n        if (success && connector === \"OR\") {\n          return { success };\n        }\n        if (!success && connector === \"AND\") {\n          return {\n            success: false,\n            error: `unauthorized to access resource \"${requestedResource}\"`\n          };\n        }\n      }\n      if (success) {\n        return {\n          success\n        };\n      }\n      return {\n        success: false,\n        error: \"Not authorized\"\n      };\n    },\n    statements\n  };\n}\nfunction createAccessControl(s) {\n  return {\n    newRole(statements) {\n      return role(statements);\n    },\n    statements: s\n  };\n}\n\nexport { createAccessControl, role };\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,SAAS,KAAK,UAAU;IACtB,OAAO;QACL,WAAU,OAAO,EAAE,YAAY,KAAK;YAClC,IAAI,UAAU;YACd,KAAK,MAAM,CAAC,mBAAmB,iBAAiB,IAAI,OAAO,OAAO,CAChE,SACC;gBACD,MAAM,iBAAiB,UAAU,CAAC,kBAAkB;gBACpD,IAAI,CAAC,gBAAgB;oBACnB,OAAO;wBACL,SAAS;wBACT,OAAO,CAAC,wCAAwC,EAAE,mBAAmB;oBACvE;gBACF;gBACA,IAAI,MAAM,OAAO,CAAC,mBAAmB;oBACnC,UAAU,iBAAiB,KAAK,CAC9B,CAAC,kBAAoB,eAAe,QAAQ,CAAC;gBAEjD,OAAO;oBACL,IAAI,OAAO,qBAAqB,UAAU;wBACxC,MAAM,UAAU;wBAChB,IAAI,QAAQ,SAAS,KAAK,MAAM;4BAC9B,UAAU,QAAQ,OAAO,CAAC,IAAI,CAC5B,CAAC,kBAAoB,eAAe,QAAQ,CAAC;wBAEjD,OAAO;4BACL,UAAU,QAAQ,OAAO,CAAC,KAAK,CAC7B,CAAC,kBAAoB,eAAe,QAAQ,CAAC;wBAEjD;oBACF,OAAO;wBACL,MAAM,IAAI,uLAAe,CAAC;oBAC5B;gBACF;gBACA,IAAI,WAAW,cAAc,MAAM;oBACjC,OAAO;wBAAE;oBAAQ;gBACnB;gBACA,IAAI,CAAC,WAAW,cAAc,OAAO;oBACnC,OAAO;wBACL,SAAS;wBACT,OAAO,CAAC,iCAAiC,EAAE,kBAAkB,CAAC,CAAC;oBACjE;gBACF;YACF;YACA,IAAI,SAAS;gBACX,OAAO;oBACL;gBACF;YACF;YACA,OAAO;gBACL,SAAS;gBACT,OAAO;YACT;QACF;QACA;IACF;AACF;AACA,SAAS,oBAAoB,CAAC;IAC5B,OAAO;QACL,SAAQ,UAAU;YAChB,OAAO,KAAK;QACd;QACA,YAAY;IACd;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/plugins/organization/access/index.mjs"],"sourcesContent":["import { createAccessControl } from '../../access/index.mjs';\nimport '../../../shared/better-auth.DdzSJf-n.mjs';\n\nconst defaultStatements = {\n  organization: [\"update\", \"delete\"],\n  member: [\"create\", \"update\", \"delete\"],\n  invitation: [\"create\", \"cancel\"],\n  team: [\"create\", \"update\", \"delete\"],\n  ac: [\"create\", \"read\", \"update\", \"delete\"]\n};\nconst defaultAc = createAccessControl(defaultStatements);\nconst adminAc = defaultAc.newRole({\n  organization: [\"update\"],\n  invitation: [\"create\", \"cancel\"],\n  member: [\"create\", \"update\", \"delete\"],\n  team: [\"create\", \"update\", \"delete\"],\n  ac: [\"create\", \"read\", \"update\", \"delete\"]\n});\nconst ownerAc = defaultAc.newRole({\n  organization: [\"update\", \"delete\"],\n  member: [\"create\", \"update\", \"delete\"],\n  invitation: [\"create\", \"cancel\"],\n  team: [\"create\", \"update\", \"delete\"],\n  ac: [\"create\", \"read\", \"update\", \"delete\"]\n});\nconst memberAc = defaultAc.newRole({\n  organization: [],\n  member: [],\n  invitation: [],\n  team: [],\n  ac: [\"read\"]\n  // Allow members to see all roles for their org.\n});\nconst defaultRoles = {\n  admin: adminAc,\n  owner: ownerAc,\n  member: memberAc\n};\n\nexport { adminAc, defaultAc, defaultRoles, defaultStatements, memberAc, ownerAc };\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,oBAAoB;IACxB,cAAc;QAAC;QAAU;KAAS;IAClC,QAAQ;QAAC;QAAU;QAAU;KAAS;IACtC,YAAY;QAAC;QAAU;KAAS;IAChC,MAAM;QAAC;QAAU;QAAU;KAAS;IACpC,IAAI;QAAC;QAAU;QAAQ;QAAU;KAAS;AAC5C;AACA,MAAM,YAAY,IAAA,4LAAmB,EAAC;AACtC,MAAM,UAAU,UAAU,OAAO,CAAC;IAChC,cAAc;QAAC;KAAS;IACxB,YAAY;QAAC;QAAU;KAAS;IAChC,QAAQ;QAAC;QAAU;QAAU;KAAS;IACtC,MAAM;QAAC;QAAU;QAAU;KAAS;IACpC,IAAI;QAAC;QAAU;QAAQ;QAAU;KAAS;AAC5C;AACA,MAAM,UAAU,UAAU,OAAO,CAAC;IAChC,cAAc;QAAC;QAAU;KAAS;IAClC,QAAQ;QAAC;QAAU;QAAU;KAAS;IACtC,YAAY;QAAC;QAAU;KAAS;IAChC,MAAM;QAAC;QAAU;QAAU;KAAS;IACpC,IAAI;QAAC;QAAU;QAAQ;QAAU;KAAS;AAC5C;AACA,MAAM,WAAW,UAAU,OAAO,CAAC;IACjC,cAAc,EAAE;IAChB,QAAQ,EAAE;IACV,YAAY,EAAE;IACd,MAAM,EAAE;IACR,IAAI;QAAC;KAAO;AAEd;AACA,MAAM,eAAe;IACnB,OAAO;IACP,OAAO;IACP,QAAQ;AACV","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 391, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.CW6D9eSx.mjs"],"sourcesContent":["const getDate = (span, unit = \"ms\") => {\n  return new Date(Date.now() + (unit === \"sec\" ? span * 1e3 : span));\n};\n\nexport { getDate as g };\n"],"names":[],"mappings":";;;;AAAA,MAAM,UAAU,CAAC,MAAM,OAAO,IAAI;IAChC,OAAO,IAAI,KAAK,KAAK,GAAG,KAAK,CAAC,SAAS,QAAQ,OAAO,MAAM,IAAI;AAClE","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 403, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.BjBlybv-.mjs"],"sourcesContent":["const levels = [\"info\", \"success\", \"warn\", \"error\", \"debug\"];\nfunction shouldPublishLog(currentLogLevel, logLevel) {\n  return levels.indexOf(logLevel) <= levels.indexOf(currentLogLevel);\n}\nconst colors = {\n  reset: \"\\x1B[0m\",\n  bright: \"\\x1B[1m\",\n  dim: \"\\x1B[2m\",\n  fg: {\n    red: \"\\x1B[31m\",\n    green: \"\\x1B[32m\",\n    yellow: \"\\x1B[33m\",\n    blue: \"\\x1B[34m\",\n    magenta: \"\\x1B[35m\"}};\nconst levelColors = {\n  info: colors.fg.blue,\n  success: colors.fg.green,\n  warn: colors.fg.yellow,\n  error: colors.fg.red,\n  debug: colors.fg.magenta\n};\nconst formatMessage = (level, message) => {\n  const timestamp = (/* @__PURE__ */ new Date()).toISOString();\n  return `${colors.dim}${timestamp}${colors.reset} ${levelColors[level]}${level.toUpperCase()}${colors.reset} ${colors.bright}[Better Auth]:${colors.reset} ${message}`;\n};\nconst createLogger = (options) => {\n  const enabled = options?.disabled !== true;\n  const logLevel = options?.level ?? \"error\";\n  const LogFunc = (level, message, args = []) => {\n    if (!enabled || !shouldPublishLog(logLevel, level)) {\n      return;\n    }\n    const formattedMessage = formatMessage(level, message);\n    if (!options || typeof options.log !== \"function\") {\n      if (level === \"error\") {\n        console.error(formattedMessage, ...args);\n      } else if (level === \"warn\") {\n        console.warn(formattedMessage, ...args);\n      } else {\n        console.log(formattedMessage, ...args);\n      }\n      return;\n    }\n    options.log(level === \"success\" ? \"info\" : level, message, ...args);\n  };\n  const logger2 = Object.fromEntries(\n    levels.map((level) => [\n      level,\n      (...[message, ...args]) => LogFunc(level, message, args)\n    ])\n  );\n  return {\n    ...logger2,\n    get level() {\n      return logLevel;\n    }\n  };\n};\nconst logger = createLogger();\n\nexport { logger as a, createLogger as c, levels as l, shouldPublishLog as s };\n"],"names":[],"mappings":";;;;;;;;;;AAAA,MAAM,SAAS;IAAC;IAAQ;IAAW;IAAQ;IAAS;CAAQ;AAC5D,SAAS,iBAAiB,eAAe,EAAE,QAAQ;IACjD,OAAO,OAAO,OAAO,CAAC,aAAa,OAAO,OAAO,CAAC;AACpD;AACA,MAAM,SAAS;IACb,OAAO;IACP,QAAQ;IACR,KAAK;IACL,IAAI;QACF,KAAK;QACL,OAAO;QACP,QAAQ;QACR,MAAM;QACN,SAAS;IAAU;AAAC;AACxB,MAAM,cAAc;IAClB,MAAM,OAAO,EAAE,CAAC,IAAI;IACpB,SAAS,OAAO,EAAE,CAAC,KAAK;IACxB,MAAM,OAAO,EAAE,CAAC,MAAM;IACtB,OAAO,OAAO,EAAE,CAAC,GAAG;IACpB,OAAO,OAAO,EAAE,CAAC,OAAO;AAC1B;AACA,MAAM,gBAAgB,CAAC,OAAO;IAC5B,MAAM,YAAY,AAAC,aAAa,GAAG,IAAI,OAAQ,WAAW;IAC1D,OAAO,GAAG,OAAO,GAAG,GAAG,YAAY,OAAO,KAAK,CAAC,CAAC,EAAE,WAAW,CAAC,MAAM,GAAG,MAAM,WAAW,KAAK,OAAO,KAAK,CAAC,CAAC,EAAE,OAAO,MAAM,CAAC,cAAc,EAAE,OAAO,KAAK,CAAC,CAAC,EAAE,SAAS;AACvK;AACA,MAAM,eAAe,CAAC;IACpB,MAAM,UAAU,SAAS,aAAa;IACtC,MAAM,WAAW,SAAS,SAAS;IACnC,MAAM,UAAU,CAAC,OAAO,SAAS,OAAO,EAAE;QACxC,IAAI,CAAC,WAAW,CAAC,iBAAiB,UAAU,QAAQ;YAClD;QACF;QACA,MAAM,mBAAmB,cAAc,OAAO;QAC9C,IAAI,CAAC,WAAW,OAAO,QAAQ,GAAG,KAAK,YAAY;YACjD,IAAI,UAAU,SAAS;gBACrB,QAAQ,KAAK,CAAC,qBAAqB;YACrC,OAAO,IAAI,UAAU,QAAQ;gBAC3B,QAAQ,IAAI,CAAC,qBAAqB;YACpC,OAAO;gBACL,QAAQ,GAAG,CAAC,qBAAqB;YACnC;YACA;QACF;QACA,QAAQ,GAAG,CAAC,UAAU,YAAY,SAAS,OAAO,YAAY;IAChE;IACA,MAAM,UAAU,OAAO,WAAW,CAChC,OAAO,GAAG,CAAC,CAAC,QAAU;YACpB;YACA,CAAC,GAAG,CAAC,SAAS,GAAG,KAAK,GAAK,QAAQ,OAAO,SAAS;SACpD;IAEH,OAAO;QACL,GAAG,OAAO;QACV,IAAI,SAAQ;YACV,OAAO;QACT;IACF;AACF;AACA,MAAM,SAAS","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 483, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.BZZKN1g7.mjs"],"sourcesContent":["import { a as logger } from './better-auth.BjBlybv-.mjs';\n\nfunction safeJSONParse(data) {\n  function reviver(_, value) {\n    if (typeof value === \"string\") {\n      const iso8601Regex = /^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(?:\\.\\d+)?Z$/;\n      if (iso8601Regex.test(value)) {\n        const date = new Date(value);\n        if (!isNaN(date.getTime())) {\n          return date;\n        }\n      }\n    }\n    return value;\n  }\n  try {\n    if (typeof data !== \"string\") {\n      return data;\n    }\n    return JSON.parse(data, reviver);\n  } catch (e) {\n    logger.error(\"Error parsing JSON\", { error: e });\n    return null;\n  }\n}\n\nexport { safeJSONParse as s };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS,cAAc,IAAI;IACzB,SAAS,QAAQ,CAAC,EAAE,KAAK;QACvB,IAAI,OAAO,UAAU,UAAU;YAC7B,MAAM,eAAe;YACrB,IAAI,aAAa,IAAI,CAAC,QAAQ;gBAC5B,MAAM,OAAO,IAAI,KAAK;gBACtB,IAAI,CAAC,MAAM,KAAK,OAAO,KAAK;oBAC1B,OAAO;gBACT;YACF;QACF;QACA,OAAO;IACT;IACA,IAAI;QACF,IAAI,OAAO,SAAS,UAAU;YAC5B,OAAO;QACT;QACA,OAAO,KAAK,KAAK,CAAC,MAAM;IAC1B,EAAE,OAAO,GAAG;QACV,qLAAM,CAAC,KAAK,CAAC,sBAAsB;YAAE,OAAO;QAAE;QAC9C,OAAO;IACT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 519, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.CuS_eDdK.mjs"],"sourcesContent":["import { e as env } from './better-auth.CMQ3rA-I.mjs';\nimport { B as BetterAuthError } from './better-auth.DdzSJf-n.mjs';\n\nfunction checkHasPath(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.pathname !== \"/\";\n  } catch (error) {\n    throw new BetterAuthError(\n      `Invalid base URL: ${url}. Please provide a valid base URL.`\n    );\n  }\n}\nfunction withPath(url, path = \"/api/auth\") {\n  const hasPath = checkHasPath(url);\n  if (hasPath) {\n    return url;\n  }\n  path = path.startsWith(\"/\") ? path : `/${path}`;\n  return `${url.replace(/\\/+$/, \"\")}${path}`;\n}\nfunction getBaseURL(url, path, request) {\n  if (url) {\n    return withPath(url, path);\n  }\n  const fromEnv = env.BETTER_AUTH_URL || env.NEXT_PUBLIC_BETTER_AUTH_URL || env.PUBLIC_BETTER_AUTH_URL || env.NUXT_PUBLIC_BETTER_AUTH_URL || env.NUXT_PUBLIC_AUTH_URL || (env.BASE_URL !== \"/\" ? env.BASE_URL : void 0);\n  if (fromEnv) {\n    return withPath(fromEnv, path);\n  }\n  const fromRequest = request?.headers.get(\"x-forwarded-host\");\n  const fromRequestProto = request?.headers.get(\"x-forwarded-proto\");\n  if (fromRequest && fromRequestProto) {\n    return withPath(`${fromRequestProto}://${fromRequest}`, path);\n  }\n  if (request) {\n    const url2 = getOrigin(request.url);\n    if (!url2) {\n      throw new BetterAuthError(\n        \"Could not get origin from request. Please provide a valid base URL.\"\n      );\n    }\n    return withPath(url2, path);\n  }\n  if (typeof window !== \"undefined\" && window.location) {\n    return withPath(window.location.origin, path);\n  }\n  return void 0;\n}\nfunction getOrigin(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.origin;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getProtocol(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.protocol;\n  } catch (error) {\n    return null;\n  }\n}\nfunction getHost(url) {\n  try {\n    const parsedUrl = new URL(url);\n    return parsedUrl.host;\n  } catch (error) {\n    return url;\n  }\n}\n\nexport { getBaseURL as a, getHost as b, getProtocol as c, getOrigin as g };\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;;;AAEA,SAAS,aAAa,GAAG;IACvB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,QAAQ,KAAK;IAChC,EAAE,OAAO,OAAO;QACd,MAAM,IAAI,uLAAe,CACvB,CAAC,kBAAkB,EAAE,IAAI,kCAAkC,CAAC;IAEhE;AACF;AACA,SAAS,SAAS,GAAG,EAAE,OAAO,WAAW;IACvC,MAAM,UAAU,aAAa;IAC7B,IAAI,SAAS;QACX,OAAO;IACT;IACA,OAAO,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC/C,OAAO,GAAG,IAAI,OAAO,CAAC,QAAQ,MAAM,MAAM;AAC5C;AACA,SAAS,WAAW,GAAG,EAAE,IAAI,EAAE,OAAO;IACpC,IAAI,KAAK;QACP,OAAO,SAAS,KAAK;IACvB;IACA,MAAM,UAAU,uLAAG,CAAC,eAAe,IAAI,uLAAG,CAAC,2BAA2B,IAAI,uLAAG,CAAC,sBAAsB,IAAI,uLAAG,CAAC,2BAA2B,IAAI,uLAAG,CAAC,oBAAoB,IAAI,CAAC,uLAAG,CAAC,QAAQ,KAAK,MAAM,uLAAG,CAAC,QAAQ,GAAG,KAAK,CAAC;IACpN,IAAI,SAAS;QACX,OAAO,SAAS,SAAS;IAC3B;IACA,MAAM,cAAc,SAAS,QAAQ,IAAI;IACzC,MAAM,mBAAmB,SAAS,QAAQ,IAAI;IAC9C,IAAI,eAAe,kBAAkB;QACnC,OAAO,SAAS,GAAG,iBAAiB,GAAG,EAAE,aAAa,EAAE;IAC1D;IACA,IAAI,SAAS;QACX,MAAM,OAAO,UAAU,QAAQ,GAAG;QAClC,IAAI,CAAC,MAAM;YACT,MAAM,IAAI,uLAAe,CACvB;QAEJ;QACA,OAAO,SAAS,MAAM;IACxB;IACA;;IAGA,OAAO,KAAK;AACd;AACA,SAAS,UAAU,GAAG;IACpB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,MAAM;IACzB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AACA,SAAS,YAAY,GAAG;IACtB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,QAAQ;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF;AACA,SAAS,QAAQ,GAAG;IAClB,IAAI;QACF,MAAM,YAAY,IAAI,IAAI;QAC1B,OAAO,UAAU,IAAI;IACvB,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 602, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.UfVWArIB.mjs"],"sourcesContent":["import { B as BetterAuthError } from './better-auth.DdzSJf-n.mjs';\nimport { g as getDate } from './better-auth.CW6D9eSx.mjs';\nimport { a as isProduction, e as env } from './better-auth.CMQ3rA-I.mjs';\nimport { base64Url } from '@better-auth/utils/base64';\nimport { createHMAC } from '@better-auth/utils/hmac';\nimport { s as safeJSONParse } from './better-auth.BZZKN1g7.mjs';\nimport { a as getBaseURL } from './better-auth.CuS_eDdK.mjs';\nimport { binary } from '@better-auth/utils/binary';\n\n//#region src/index.ts\nconst s = 1e3;\nconst m = s * 60;\nconst h = m * 60;\nconst d = h * 24;\nconst w = d * 7;\nconst y = d * 365.25;\nconst mo = y / 12;\nfunction ms(value, options) {\n\tif (typeof value === \"string\") return parse(value);\n\telse if (typeof value === \"number\") return format(value);\n\tthrow new Error(`Value provided to ms() must be a string or number. value=${JSON.stringify(value)}`);\n}\n/**\n* Parse the given string and return milliseconds.\n*\n* @param str - A string to parse to milliseconds\n* @returns The parsed value in milliseconds, or `NaN` if the string can't be\n* parsed\n*/\nfunction parse(str) {\n\tif (typeof str !== \"string\" || str.length === 0 || str.length > 100) throw new Error(`Value provided to ms.parse() must be a string with length between 1 and 99. value=${JSON.stringify(str)}`);\n\tconst match = /^(?<value>-?\\d*\\.?\\d+) *(?<unit>milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|months?|mo|years?|yrs?|y)?$/i.exec(str);\n\tif (!match?.groups) return NaN;\n\tconst { value, unit = \"ms\" } = match.groups;\n\tconst n = parseFloat(value);\n\tconst matchUnit = unit.toLowerCase();\n\t/* istanbul ignore next - istanbul doesn't understand, but thankfully the TypeScript the exhaustiveness check in the default case keeps us type safe here */\n\tswitch (matchUnit) {\n\t\tcase \"years\":\n\t\tcase \"year\":\n\t\tcase \"yrs\":\n\t\tcase \"yr\":\n\t\tcase \"y\": return n * y;\n\t\tcase \"months\":\n\t\tcase \"month\":\n\t\tcase \"mo\": return n * mo;\n\t\tcase \"weeks\":\n\t\tcase \"week\":\n\t\tcase \"w\": return n * w;\n\t\tcase \"days\":\n\t\tcase \"day\":\n\t\tcase \"d\": return n * d;\n\t\tcase \"hours\":\n\t\tcase \"hour\":\n\t\tcase \"hrs\":\n\t\tcase \"hr\":\n\t\tcase \"h\": return n * h;\n\t\tcase \"minutes\":\n\t\tcase \"minute\":\n\t\tcase \"mins\":\n\t\tcase \"min\":\n\t\tcase \"m\": return n * m;\n\t\tcase \"seconds\":\n\t\tcase \"second\":\n\t\tcase \"secs\":\n\t\tcase \"sec\":\n\t\tcase \"s\": return n * s;\n\t\tcase \"milliseconds\":\n\t\tcase \"millisecond\":\n\t\tcase \"msecs\":\n\t\tcase \"msec\":\n\t\tcase \"ms\": return n;\n\t\tdefault: throw new Error(`Unknown unit \"${matchUnit}\" provided to ms.parse(). value=${JSON.stringify(str)}`);\n\t}\n}\n/**\n* Short format for `ms`.\n*/\nfunction fmtShort(ms$1) {\n\tconst msAbs = Math.abs(ms$1);\n\tif (msAbs >= y) return `${Math.round(ms$1 / y)}y`;\n\tif (msAbs >= mo) return `${Math.round(ms$1 / mo)}mo`;\n\tif (msAbs >= w) return `${Math.round(ms$1 / w)}w`;\n\tif (msAbs >= d) return `${Math.round(ms$1 / d)}d`;\n\tif (msAbs >= h) return `${Math.round(ms$1 / h)}h`;\n\tif (msAbs >= m) return `${Math.round(ms$1 / m)}m`;\n\tif (msAbs >= s) return `${Math.round(ms$1 / s)}s`;\n\treturn `${ms$1}ms`;\n}\n/**\n* Format the given integer as a string.\n*\n* @param ms - milliseconds\n* @param options - Options for the conversion\n* @returns The formatted string\n*/\nfunction format(ms$1, options) {\n\tif (typeof ms$1 !== \"number\" || !Number.isFinite(ms$1)) throw new Error(\"Value provided to ms.format() must be of type number.\");\n\treturn fmtShort(ms$1);\n}\n\nfunction parseSetCookieHeader(setCookie) {\n  const cookies = /* @__PURE__ */ new Map();\n  const cookieArray = setCookie.split(\", \");\n  cookieArray.forEach((cookieString) => {\n    const parts = cookieString.split(\";\").map((part) => part.trim());\n    const [nameValue, ...attributes] = parts;\n    const [name, ...valueParts] = nameValue.split(\"=\");\n    const value = valueParts.join(\"=\");\n    if (!name || value === void 0) {\n      return;\n    }\n    const attrObj = { value };\n    attributes.forEach((attribute) => {\n      const [attrName, ...attrValueParts] = attribute.split(\"=\");\n      const attrValue = attrValueParts.join(\"=\");\n      const normalizedAttrName = attrName.trim().toLowerCase();\n      switch (normalizedAttrName) {\n        case \"max-age\":\n          attrObj[\"max-age\"] = attrValue ? parseInt(attrValue.trim(), 10) : void 0;\n          break;\n        case \"expires\":\n          attrObj.expires = attrValue ? new Date(attrValue.trim()) : void 0;\n          break;\n        case \"domain\":\n          attrObj.domain = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"path\":\n          attrObj.path = attrValue ? attrValue.trim() : void 0;\n          break;\n        case \"secure\":\n          attrObj.secure = true;\n          break;\n        case \"httponly\":\n          attrObj.httponly = true;\n          break;\n        case \"samesite\":\n          attrObj.samesite = attrValue ? attrValue.trim().toLowerCase() : void 0;\n          break;\n        default:\n          attrObj[normalizedAttrName] = attrValue ? attrValue.trim() : true;\n          break;\n      }\n    });\n    cookies.set(name, attrObj);\n  });\n  return cookies;\n}\nfunction setCookieToHeader(headers) {\n  return (context) => {\n    const setCookieHeader = context.response.headers.get(\"set-cookie\");\n    if (!setCookieHeader) {\n      return;\n    }\n    const cookieMap = /* @__PURE__ */ new Map();\n    const existingCookiesHeader = headers.get(\"cookie\") || \"\";\n    existingCookiesHeader.split(\";\").forEach((cookie) => {\n      const [name, ...rest] = cookie.trim().split(\"=\");\n      if (name && rest.length > 0) {\n        cookieMap.set(name, rest.join(\"=\"));\n      }\n    });\n    const setCookieHeaders = setCookieHeader.split(\",\");\n    setCookieHeaders.forEach((header) => {\n      const cookies = parseSetCookieHeader(header);\n      cookies.forEach((value, name) => {\n        cookieMap.set(name, value.value);\n      });\n    });\n    const updatedCookies = Array.from(cookieMap.entries()).map(([name, value]) => `${name}=${value}`).join(\"; \");\n    headers.set(\"cookie\", updatedCookies);\n  };\n}\n\nfunction createCookieGetter(options) {\n  const secure = options.advanced?.useSecureCookies !== void 0 ? options.advanced?.useSecureCookies : options.baseURL !== void 0 ? options.baseURL.startsWith(\"https://\") ? true : false : isProduction;\n  const secureCookiePrefix = secure ? \"__Secure-\" : \"\";\n  const crossSubdomainEnabled = !!options.advanced?.crossSubDomainCookies?.enabled;\n  const domain = crossSubdomainEnabled ? options.advanced?.crossSubDomainCookies?.domain || (options.baseURL ? new URL(options.baseURL).hostname : void 0) : void 0;\n  if (crossSubdomainEnabled && !domain) {\n    throw new BetterAuthError(\n      \"baseURL is required when crossSubdomainCookies are enabled\"\n    );\n  }\n  function createCookie(cookieName, overrideAttributes = {}) {\n    const prefix = options.advanced?.cookiePrefix || \"better-auth\";\n    const name = options.advanced?.cookies?.[cookieName]?.name || `${prefix}.${cookieName}`;\n    const attributes = options.advanced?.cookies?.[cookieName]?.attributes;\n    return {\n      name: `${secureCookiePrefix}${name}`,\n      attributes: {\n        secure: !!secureCookiePrefix,\n        sameSite: \"lax\",\n        path: \"/\",\n        httpOnly: true,\n        ...crossSubdomainEnabled ? { domain } : {},\n        ...options.advanced?.defaultCookieAttributes,\n        ...overrideAttributes,\n        ...attributes\n      }\n    };\n  }\n  return createCookie;\n}\nfunction getCookies(options) {\n  const createCookie = createCookieGetter(options);\n  const sessionMaxAge = options.session?.expiresIn || ms(\"7d\") / 1e3;\n  const sessionToken = createCookie(\"session_token\", {\n    maxAge: sessionMaxAge\n  });\n  const sessionData = createCookie(\"session_data\", {\n    maxAge: options.session?.cookieCache?.maxAge || 60 * 5\n  });\n  const dontRememberToken = createCookie(\"dont_remember\");\n  return {\n    sessionToken: {\n      name: sessionToken.name,\n      options: sessionToken.attributes\n    },\n    /**\n     * This cookie is used to store the session data in the cookie\n     * This is useful for when you want to cache the session in the cookie\n     */\n    sessionData: {\n      name: sessionData.name,\n      options: sessionData.attributes\n    },\n    dontRememberToken: {\n      name: dontRememberToken.name,\n      options: dontRememberToken.attributes\n    }\n  };\n}\nasync function setCookieCache(ctx, session) {\n  const shouldStoreSessionDataInCookie = ctx.context.options.session?.cookieCache?.enabled;\n  if (shouldStoreSessionDataInCookie) {\n    const filteredSession = Object.entries(session.session).reduce(\n      (acc, [key, value]) => {\n        const fieldConfig = ctx.context.options.session?.additionalFields?.[key];\n        if (!fieldConfig || fieldConfig.returned !== false) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {}\n    );\n    const sessionData = { session: filteredSession, user: session.user };\n    const expiresAtDate = getDate(\n      ctx.context.authCookies.sessionData.options.maxAge || 60,\n      \"sec\"\n    ).getTime();\n    const data = base64Url.encode(\n      JSON.stringify({\n        session: sessionData,\n        expiresAt: expiresAtDate,\n        signature: await createHMAC(\"SHA-256\", \"base64urlnopad\").sign(\n          ctx.context.secret,\n          JSON.stringify({\n            ...sessionData,\n            expiresAt: expiresAtDate\n          })\n        )\n      }),\n      {\n        padding: false\n      }\n    );\n    if (data.length > 4093) {\n      throw new BetterAuthError(\n        \"Session data is too large to store in the cookie. Please disable session cookie caching or reduce the size of the session data\"\n      );\n    }\n    ctx.setCookie(\n      ctx.context.authCookies.sessionData.name,\n      data,\n      ctx.context.authCookies.sessionData.options\n    );\n  }\n}\nasync function setSessionCookie(ctx, session, dontRememberMe, overrides) {\n  const dontRememberMeCookie = await ctx.getSignedCookie(\n    ctx.context.authCookies.dontRememberToken.name,\n    ctx.context.secret\n  );\n  dontRememberMe = dontRememberMe !== void 0 ? dontRememberMe : !!dontRememberMeCookie;\n  const options = ctx.context.authCookies.sessionToken.options;\n  const maxAge = dontRememberMe ? void 0 : ctx.context.sessionConfig.expiresIn;\n  await ctx.setSignedCookie(\n    ctx.context.authCookies.sessionToken.name,\n    session.session.token,\n    ctx.context.secret,\n    {\n      ...options,\n      maxAge,\n      ...overrides\n    }\n  );\n  if (dontRememberMe) {\n    await ctx.setSignedCookie(\n      ctx.context.authCookies.dontRememberToken.name,\n      \"true\",\n      ctx.context.secret,\n      ctx.context.authCookies.dontRememberToken.options\n    );\n  }\n  await setCookieCache(ctx, session);\n  ctx.context.setNewSession(session);\n  if (ctx.context.options.secondaryStorage) {\n    await ctx.context.secondaryStorage?.set(\n      session.session.token,\n      JSON.stringify({\n        user: session.user,\n        session: session.session\n      }),\n      Math.floor(\n        (new Date(session.session.expiresAt).getTime() - Date.now()) / 1e3\n      )\n    );\n  }\n}\nfunction deleteSessionCookie(ctx, skipDontRememberMe) {\n  ctx.setCookie(ctx.context.authCookies.sessionToken.name, \"\", {\n    ...ctx.context.authCookies.sessionToken.options,\n    maxAge: 0\n  });\n  ctx.setCookie(ctx.context.authCookies.sessionData.name, \"\", {\n    ...ctx.context.authCookies.sessionData.options,\n    maxAge: 0\n  });\n  if (!skipDontRememberMe) {\n    ctx.setCookie(ctx.context.authCookies.dontRememberToken.name, \"\", {\n      ...ctx.context.authCookies.dontRememberToken.options,\n      maxAge: 0\n    });\n  }\n}\nfunction parseCookies(cookieHeader) {\n  const cookies = cookieHeader.split(\"; \");\n  const cookieMap = /* @__PURE__ */ new Map();\n  cookies.forEach((cookie) => {\n    const [name, value] = cookie.split(\"=\");\n    cookieMap.set(name, value);\n  });\n  return cookieMap;\n}\nconst getSessionCookie = (request, config) => {\n  if (config?.cookiePrefix) {\n    if (config.cookieName) {\n      config.cookiePrefix = `${config.cookiePrefix}-`;\n    } else {\n      config.cookiePrefix = `${config.cookiePrefix}.`;\n    }\n  }\n  const headers = \"headers\" in request ? request.headers : request;\n  const req = request instanceof Request ? request : void 0;\n  getBaseURL(req?.url, config?.path, req);\n  const cookies = headers.get(\"cookie\");\n  if (!cookies) {\n    return null;\n  }\n  const { cookieName = \"session_token\", cookiePrefix = \"better-auth.\" } = config || {};\n  const name = `${cookiePrefix}${cookieName}`;\n  const secureCookieName = `__Secure-${name}`;\n  const parsedCookie = parseCookies(cookies);\n  const sessionToken = parsedCookie.get(name) || parsedCookie.get(secureCookieName);\n  if (sessionToken) {\n    return sessionToken;\n  }\n  return null;\n};\nconst getCookieCache = async (request, config) => {\n  const headers = request instanceof Headers ? request : request.headers;\n  const cookies = headers.get(\"cookie\");\n  if (!cookies) {\n    return null;\n  }\n  const { cookieName = \"session_data\", cookiePrefix = \"better-auth\" } = config || {};\n  const name = config?.isSecure !== void 0 ? config.isSecure ? `__Secure-${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}` : isProduction ? `__Secure-${cookiePrefix}.${cookieName}` : `${cookiePrefix}.${cookieName}`;\n  const parsedCookie = parseCookies(cookies);\n  const sessionData = parsedCookie.get(name);\n  if (sessionData) {\n    const sessionDataPayload = safeJSONParse(binary.decode(base64Url.decode(sessionData)));\n    if (!sessionDataPayload) {\n      return null;\n    }\n    const secret = config?.secret || env.BETTER_AUTH_SECRET;\n    if (!secret) {\n      throw new BetterAuthError(\n        \"getCookieCache requires a secret to be provided. Either pass it as an option or set the BETTER_AUTH_SECRET environment variable\"\n      );\n    }\n    const isValid = await createHMAC(\"SHA-256\", \"base64urlnopad\").verify(\n      secret,\n      JSON.stringify({\n        ...sessionDataPayload.session,\n        expiresAt: sessionDataPayload.expiresAt\n      }),\n      sessionDataPayload.signature\n    );\n    if (!isValid) {\n      return null;\n    }\n    return sessionDataPayload.session;\n  }\n  return null;\n};\n\nexport { parseCookies as a, setCookieCache as b, createCookieGetter as c, deleteSessionCookie as d, setCookieToHeader as e, getSessionCookie as f, getCookies as g, getCookieCache as h, ms as m, parseSetCookieHeader as p, setSessionCookie as s };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.DV5EHeYG.mjs"],"sourcesContent":["import { createMiddleware, createEndpoint, APIError } from 'better-call';\nimport { g as getDate } from './better-auth.CW6D9eSx.mjs';\nimport { d as deleteSessionCookie, s as setSessionCookie, b as setCookieCache } from './better-auth.UfVWArIB.mjs';\nimport * as z from 'zod/v4';\nimport { s as safeJSONParse } from './better-auth.BZZKN1g7.mjs';\nimport { createHMAC } from '@better-auth/utils/hmac';\nimport { base64Url } from '@better-auth/utils/base64';\nimport { binary } from '@better-auth/utils/binary';\n\nconst optionsMiddleware = createMiddleware(async () => {\n  return {};\n});\nconst createAuthMiddleware = createMiddleware.create({\n  use: [\n    optionsMiddleware,\n    /**\n     * Only use for post hooks\n     */\n    createMiddleware(async () => {\n      return {};\n    })\n  ]\n});\nconst createAuthEndpoint = createEndpoint.create({\n  use: [optionsMiddleware]\n});\n\nconst BASE_ERROR_CODES = {\n  USER_NOT_FOUND: \"User not found\",\n  FAILED_TO_CREATE_USER: \"Failed to create user\",\n  FAILED_TO_CREATE_SESSION: \"Failed to create session\",\n  FAILED_TO_UPDATE_USER: \"Failed to update user\",\n  FAILED_TO_GET_SESSION: \"Failed to get session\",\n  INVALID_PASSWORD: \"Invalid password\",\n  INVALID_EMAIL: \"Invalid email\",\n  INVALID_EMAIL_OR_PASSWORD: \"Invalid email or password\",\n  SOCIAL_ACCOUNT_ALREADY_LINKED: \"Social account already linked\",\n  PROVIDER_NOT_FOUND: \"Provider not found\",\n  INVALID_TOKEN: \"Invalid token\",\n  ID_TOKEN_NOT_SUPPORTED: \"id_token not supported\",\n  FAILED_TO_GET_USER_INFO: \"Failed to get user info\",\n  USER_EMAIL_NOT_FOUND: \"User email not found\",\n  EMAIL_NOT_VERIFIED: \"Email not verified\",\n  PASSWORD_TOO_SHORT: \"Password too short\",\n  PASSWORD_TOO_LONG: \"Password too long\",\n  USER_ALREADY_EXISTS: \"User already exists. Use another email.\",\n  EMAIL_CAN_NOT_BE_UPDATED: \"Email can not be updated\",\n  CREDENTIAL_ACCOUNT_NOT_FOUND: \"Credential account not found\",\n  SESSION_EXPIRED: \"Session expired. Re-authenticate to perform this action.\",\n  FAILED_TO_UNLINK_LAST_ACCOUNT: \"You can't unlink your last account\",\n  ACCOUNT_NOT_FOUND: \"Account not found\",\n  USER_ALREADY_HAS_PASSWORD: \"User already has a password. Provide that to delete the account.\"\n};\n\nconst getSessionQuerySchema = z.optional(\n  z.object({\n    /**\n     * If cookie cache is enabled, it will disable the cache\n     * and fetch the session from the database\n     */\n    disableCookieCache: z.coerce.boolean().meta({\n      description: \"Disable cookie cache and fetch session from database\"\n    }).optional(),\n    disableRefresh: z.coerce.boolean().meta({\n      description: \"Disable session refresh. Useful for checking session status, without updating the session\"\n    }).optional()\n  })\n);\nconst getSession = () => createAuthEndpoint(\n  \"/get-session\",\n  {\n    method: \"GET\",\n    query: getSessionQuerySchema,\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Get the current session\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    session: {\n                      $ref: \"#/components/schemas/Session\"\n                    },\n                    user: {\n                      $ref: \"#/components/schemas/User\"\n                    }\n                  },\n                  required: [\"session\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      const sessionCookieToken = await ctx.getSignedCookie(\n        ctx.context.authCookies.sessionToken.name,\n        ctx.context.secret\n      );\n      if (!sessionCookieToken) {\n        return null;\n      }\n      const sessionDataCookie = ctx.getCookie(\n        ctx.context.authCookies.sessionData.name\n      );\n      const sessionDataPayload = sessionDataCookie ? safeJSONParse(binary.decode(base64Url.decode(sessionDataCookie))) : null;\n      if (sessionDataPayload) {\n        const isValid = await createHMAC(\"SHA-256\", \"base64urlnopad\").verify(\n          ctx.context.secret,\n          JSON.stringify({\n            ...sessionDataPayload.session,\n            expiresAt: sessionDataPayload.expiresAt\n          }),\n          sessionDataPayload.signature\n        );\n        if (!isValid) {\n          const dataCookie = ctx.context.authCookies.sessionData.name;\n          ctx.setCookie(dataCookie, \"\", {\n            maxAge: 0\n          });\n          return ctx.json(null);\n        }\n      }\n      const dontRememberMe = await ctx.getSignedCookie(\n        ctx.context.authCookies.dontRememberToken.name,\n        ctx.context.secret\n      );\n      if (sessionDataPayload?.session && ctx.context.options.session?.cookieCache?.enabled && !ctx.query?.disableCookieCache) {\n        const session2 = sessionDataPayload.session;\n        const hasExpired = sessionDataPayload.expiresAt < Date.now() || session2.session.expiresAt < /* @__PURE__ */ new Date();\n        if (!hasExpired) {\n          ctx.context.session = session2;\n          return ctx.json(\n            session2\n          );\n        } else {\n          const dataCookie = ctx.context.authCookies.sessionData.name;\n          ctx.setCookie(dataCookie, \"\", {\n            maxAge: 0\n          });\n        }\n      }\n      const session = await ctx.context.internalAdapter.findSession(sessionCookieToken);\n      ctx.context.session = session;\n      if (!session || session.session.expiresAt < /* @__PURE__ */ new Date()) {\n        deleteSessionCookie(ctx);\n        if (session) {\n          await ctx.context.internalAdapter.deleteSession(\n            session.session.token\n          );\n        }\n        return ctx.json(null);\n      }\n      if (dontRememberMe || ctx.query?.disableRefresh) {\n        return ctx.json(\n          session\n        );\n      }\n      const expiresIn = ctx.context.sessionConfig.expiresIn;\n      const updateAge = ctx.context.sessionConfig.updateAge;\n      const sessionIsDueToBeUpdatedDate = session.session.expiresAt.valueOf() - expiresIn * 1e3 + updateAge * 1e3;\n      const shouldBeUpdated = sessionIsDueToBeUpdatedDate <= Date.now();\n      if (shouldBeUpdated && (!ctx.query?.disableRefresh || !ctx.context.options.session?.disableSessionRefresh)) {\n        const updatedSession = await ctx.context.internalAdapter.updateSession(\n          session.session.token,\n          {\n            expiresAt: getDate(ctx.context.sessionConfig.expiresIn, \"sec\"),\n            updatedAt: /* @__PURE__ */ new Date()\n          }\n        );\n        if (!updatedSession) {\n          deleteSessionCookie(ctx);\n          return ctx.json(null, { status: 401 });\n        }\n        const maxAge = (updatedSession.expiresAt.valueOf() - Date.now()) / 1e3;\n        await setSessionCookie(\n          ctx,\n          {\n            session: updatedSession,\n            user: session.user\n          },\n          false,\n          {\n            maxAge\n          }\n        );\n        return ctx.json({\n          session: updatedSession,\n          user: session.user\n        });\n      }\n      await setCookieCache(ctx, session);\n      return ctx.json(\n        session\n      );\n    } catch (error) {\n      ctx.context.logger.error(\"INTERNAL_SERVER_ERROR\", error);\n      throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n      });\n    }\n  }\n);\nconst getSessionFromCtx = async (ctx, config) => {\n  if (ctx.context.session) {\n    return ctx.context.session;\n  }\n  const session = await getSession()({\n    ...ctx,\n    asResponse: false,\n    headers: ctx.headers,\n    returnHeaders: false,\n    query: {\n      ...config,\n      ...ctx.query\n    }\n  }).catch((e) => {\n    return null;\n  });\n  ctx.context.session = session;\n  return session;\n};\nconst sessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new APIError(\"UNAUTHORIZED\");\n  }\n  return {\n    session\n  };\n});\nconst requestOnlySessionMiddleware = createAuthMiddleware(\n  async (ctx) => {\n    const session = await getSessionFromCtx(ctx);\n    if (!session?.session && (ctx.request || ctx.headers)) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    return { session };\n  }\n);\nconst freshSessionMiddleware = createAuthMiddleware(async (ctx) => {\n  const session = await getSessionFromCtx(ctx);\n  if (!session?.session) {\n    throw new APIError(\"UNAUTHORIZED\");\n  }\n  if (ctx.context.sessionConfig.freshAge === 0) {\n    return {\n      session\n    };\n  }\n  const freshAge = ctx.context.sessionConfig.freshAge;\n  const lastUpdated = session.session.updatedAt?.valueOf() || session.session.createdAt.valueOf();\n  const now = Date.now();\n  const isFresh = now - lastUpdated < freshAge * 1e3;\n  if (!isFresh) {\n    throw new APIError(\"FORBIDDEN\", {\n      message: \"Session is not fresh\"\n    });\n  }\n  return {\n    session\n  };\n});\nconst listSessions = () => createAuthEndpoint(\n  \"/list-sessions\",\n  {\n    method: \"GET\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"List all active sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    $ref: \"#/components/schemas/Session\"\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      const sessions = await ctx.context.internalAdapter.listSessions(\n        ctx.context.session.user.id\n      );\n      const activeSessions = sessions.filter((session) => {\n        return session.expiresAt > /* @__PURE__ */ new Date();\n      });\n      return ctx.json(\n        activeSessions\n      );\n    } catch (e) {\n      ctx.context.logger.error(e);\n      throw ctx.error(\"INTERNAL_SERVER_ERROR\");\n    }\n  }\n);\nconst revokeSession = createAuthEndpoint(\n  \"/revoke-session\",\n  {\n    method: \"POST\",\n    body: z.object({\n      token: z.string().meta({\n        description: \"The token to revoke\"\n      })\n    }),\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke a single session\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  token: {\n                    type: \"string\",\n                    description: \"The token to revoke\"\n                  }\n                },\n                required: [\"token\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the session was revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token;\n    const findSession = await ctx.context.internalAdapter.findSession(token);\n    if (!findSession) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Session not found\"\n      });\n    }\n    if (findSession.session.userId !== ctx.context.session.user.id) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    try {\n      await ctx.context.internalAdapter.deleteSession(token);\n    } catch (error) {\n      ctx.context.logger.error(\n        error && typeof error === \"object\" && \"name\" in error ? error.name : \"\",\n        error\n      );\n      throw new APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst revokeSessions = createAuthEndpoint(\n  \"/revoke-sessions\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Revoke all sessions for the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if all sessions were revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    try {\n      await ctx.context.internalAdapter.deleteSessions(\n        ctx.context.session.user.id\n      );\n    } catch (error) {\n      ctx.context.logger.error(\n        error && typeof error === \"object\" && \"name\" in error ? error.name : \"\",\n        error\n      );\n      throw new APIError(\"INTERNAL_SERVER_ERROR\");\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst revokeOtherSessions = createAuthEndpoint(\n  \"/revoke-other-sessions\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Revoke all other sessions for the user except the current one\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if all other sessions were revoked successfully\"\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const session = ctx.context.session;\n    if (!session.user) {\n      throw new APIError(\"UNAUTHORIZED\");\n    }\n    const sessions = await ctx.context.internalAdapter.listSessions(\n      session.user.id\n    );\n    const activeSessions = sessions.filter((session2) => {\n      return session2.expiresAt > /* @__PURE__ */ new Date();\n    });\n    const otherSessions = activeSessions.filter(\n      (session2) => session2.token !== ctx.context.session.session.token\n    );\n    await Promise.all(\n      otherSessions.map(\n        (session2) => ctx.context.internalAdapter.deleteSession(session2.token)\n      )\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\nexport { BASE_ERROR_CODES as B, createAuthEndpoint as a, getSession as b, createAuthMiddleware as c, revokeSessions as d, revokeSession as e, freshSessionMiddleware as f, getSessionFromCtx as g, getSessionQuerySchema as h, requestOnlySessionMiddleware as i, listSessions as l, optionsMiddleware as o, revokeOtherSessions as r, sessionMiddleware as s };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1496, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.B4Qoxdgc.mjs"],"sourcesContent":["import { createRandomStringGenerator } from '@better-auth/utils/random';\n\nconst generateRandomString = createRandomStringGenerator(\n  \"a-z\",\n  \"0-9\",\n  \"A-Z\",\n  \"-_\"\n);\n\nexport { generateRandomString as g };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,uBAAuB,IAAA,2LAA2B,EACtD,OACA,OACA,OACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1508, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/crypto/index.mjs"],"sourcesContent":["import { createHash } from '@better-auth/utils/hash';\nimport { xchacha20poly1305 } from '@noble/ciphers/chacha';\nimport { utf8ToBytes, bytesToHex, hexToBytes as hexToBytes$1 } from '@noble/ciphers/utils';\nimport { managedNonce } from '@noble/ciphers/webcrypto';\nimport { base64 } from '@better-auth/utils/base64';\nimport { SignJWT } from 'jose';\nimport { scryptAsync } from '@noble/hashes/scrypt';\nimport { getRandomValues } from '@better-auth/utils';\nimport { hex } from '@better-auth/utils/hex';\nimport { hexToBytes } from '@noble/hashes/utils';\nimport { B as BetterAuthError } from '../shared/better-auth.DdzSJf-n.mjs';\nexport { g as generateRandomString } from '../shared/better-auth.B4Qoxdgc.mjs';\nimport '@better-auth/utils/random';\n\nasync function signJWT(payload, secret, expiresIn = 3600) {\n  const jwt = await new SignJWT(payload).setProtectedHeader({ alg: \"HS256\" }).setIssuedAt().setExpirationTime(Math.floor(Date.now() / 1e3) + expiresIn).sign(new TextEncoder().encode(secret));\n  return jwt;\n}\n\nfunction constantTimeEqual(a, b) {\n  const aBuffer = new Uint8Array(a);\n  const bBuffer = new Uint8Array(b);\n  let c = aBuffer.length ^ bBuffer.length;\n  const length = Math.max(aBuffer.length, bBuffer.length);\n  for (let i = 0; i < length; i++) {\n    c |= (i < aBuffer.length ? aBuffer[i] : 0) ^ (i < bBuffer.length ? bBuffer[i] : 0);\n  }\n  return c === 0;\n}\n\nasync function hashToBase64(data) {\n  const buffer = await createHash(\"SHA-256\").digest(data);\n  return base64.encode(buffer);\n}\nasync function compareHash(data, hash) {\n  const buffer = await createHash(\"SHA-256\").digest(\n    typeof data === \"string\" ? new TextEncoder().encode(data) : data\n  );\n  const hashBuffer = base64.decode(hash);\n  return constantTimeEqual(buffer, hashBuffer);\n}\n\nconst config = {\n  N: 16384,\n  r: 16,\n  p: 1,\n  dkLen: 64\n};\nasync function generateKey(password, salt) {\n  return await scryptAsync(password.normalize(\"NFKC\"), salt, {\n    N: config.N,\n    p: config.p,\n    r: config.r,\n    dkLen: config.dkLen,\n    maxmem: 128 * config.N * config.r * 2\n  });\n}\nconst hashPassword = async (password) => {\n  const salt = hex.encode(getRandomValues(new Uint8Array(16)));\n  const key = await generateKey(password, salt);\n  return `${salt}:${hex.encode(key)}`;\n};\nconst verifyPassword = async ({\n  hash,\n  password\n}) => {\n  const [salt, key] = hash.split(\":\");\n  if (!salt || !key) {\n    throw new BetterAuthError(\"Invalid password hash\");\n  }\n  const targetKey = await generateKey(password, salt);\n  return constantTimeEqual(targetKey, hexToBytes(key));\n};\n\nconst symmetricEncrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await createHash(\"SHA-256\").digest(key);\n  const dataAsBytes = utf8ToBytes(data);\n  const chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return bytesToHex(chacha.encrypt(dataAsBytes));\n};\nconst symmetricDecrypt = async ({\n  key,\n  data\n}) => {\n  const keyAsBytes = await createHash(\"SHA-256\").digest(key);\n  const dataAsBytes = hexToBytes$1(data);\n  const chacha = managedNonce(xchacha20poly1305)(new Uint8Array(keyAsBytes));\n  return new TextDecoder().decode(chacha.decrypt(dataAsBytes));\n};\n\nexport { compareHash, constantTimeEqual, hashPassword, hashToBase64, signJWT, symmetricDecrypt, symmetricEncrypt, verifyPassword };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1623, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.BUPPRXfK.mjs"],"sourcesContent":["import { createRandomStringGenerator } from '@better-auth/utils/random';\n\nconst generateId = (size) => {\n  return createRandomStringGenerator(\"a-z\", \"A-Z\", \"0-9\")(size || 32);\n};\n\nexport { generateId as g };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,aAAa,CAAC;IAClB,OAAO,IAAA,2LAA2B,EAAC,OAAO,OAAO,OAAO,QAAQ;AAClE","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1637, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.Dcv8PS7T.mjs"],"sourcesContent":["import * as z from 'zod/v4';\nimport { APIError } from 'better-call';\n\nconst coreSchema = z.object({\n  id: z.string(),\n  createdAt: z.date().default(() => /* @__PURE__ */ new Date()),\n  updatedAt: z.date().default(() => /* @__PURE__ */ new Date())\n});\nconst accountSchema = coreSchema.extend({\n  providerId: z.string(),\n  accountId: z.string(),\n  userId: z.coerce.string(),\n  accessToken: z.string().nullish(),\n  refreshToken: z.string().nullish(),\n  idToken: z.string().nullish(),\n  /**\n   * Access token expires at\n   */\n  accessTokenExpiresAt: z.date().nullish(),\n  /**\n   * Refresh token expires at\n   */\n  refreshTokenExpiresAt: z.date().nullish(),\n  /**\n   * The scopes that the user has authorized\n   */\n  scope: z.string().nullish(),\n  /**\n   * Password is only stored in the credential provider\n   */\n  password: z.string().nullish()\n});\nconst userSchema = coreSchema.extend({\n  email: z.string().transform((val) => val.toLowerCase()),\n  emailVerified: z.boolean().default(false),\n  name: z.string(),\n  image: z.string().nullish()\n});\nconst sessionSchema = coreSchema.extend({\n  userId: z.coerce.string(),\n  expiresAt: z.date(),\n  token: z.string(),\n  ipAddress: z.string().nullish(),\n  userAgent: z.string().nullish()\n});\nconst verificationSchema = coreSchema.extend({\n  value: z.string(),\n  expiresAt: z.date(),\n  identifier: z.string()\n});\nfunction parseOutputData(data, schema) {\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in data) {\n    const field = fields[key];\n    if (!field) {\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (field.returned === false) {\n      continue;\n    }\n    parsedData[key] = data[key];\n  }\n  return parsedData;\n}\nfunction getAllFields(options, table) {\n  let schema = {\n    ...table === \"user\" ? options.user?.additionalFields : {},\n    ...table === \"session\" ? options.session?.additionalFields : {}\n  };\n  for (const plugin of options.plugins || []) {\n    if (plugin.schema && plugin.schema[table]) {\n      schema = {\n        ...schema,\n        ...plugin.schema[table].fields\n      };\n    }\n  }\n  return schema;\n}\nfunction parseUserOutput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseOutputData(user, { fields: schema });\n}\nfunction parseAccountOutput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseOutputData(account, { fields: schema });\n}\nfunction parseSessionOutput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseOutputData(session, { fields: schema });\n}\nfunction parseInputData(data, schema) {\n  const action = schema.action || \"create\";\n  const fields = schema.fields;\n  const parsedData = {};\n  for (const key in fields) {\n    if (key in data) {\n      if (fields[key].input === false) {\n        if (fields[key].defaultValue) {\n          parsedData[key] = fields[key].defaultValue;\n          continue;\n        }\n        continue;\n      }\n      if (fields[key].validator?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].validator.input.parse(data[key]);\n        continue;\n      }\n      if (fields[key].transform?.input && data[key] !== void 0) {\n        parsedData[key] = fields[key].transform?.input(data[key]);\n        continue;\n      }\n      parsedData[key] = data[key];\n      continue;\n    }\n    if (fields[key].defaultValue && action === \"create\") {\n      parsedData[key] = fields[key].defaultValue;\n      continue;\n    }\n    if (fields[key].required && action === \"create\") {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `${key} is required`\n      });\n    }\n  }\n  return parsedData;\n}\nfunction parseUserInput(options, user, action) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema, action });\n}\nfunction parseAdditionalUserInput(options, user) {\n  const schema = getAllFields(options, \"user\");\n  return parseInputData(user || {}, { fields: schema });\n}\nfunction parseAccountInput(options, account) {\n  const schema = getAllFields(options, \"account\");\n  return parseInputData(account, { fields: schema });\n}\nfunction parseSessionInput(options, session) {\n  const schema = getAllFields(options, \"session\");\n  return parseInputData(session, { fields: schema });\n}\nfunction mergeSchema(schema, newSchema) {\n  if (!newSchema) {\n    return schema;\n  }\n  for (const table in newSchema) {\n    const newModelName = newSchema[table]?.modelName;\n    if (newModelName) {\n      schema[table].modelName = newModelName;\n    }\n    for (const field in schema[table].fields) {\n      const newField = newSchema[table]?.fields?.[field];\n      if (!newField) {\n        continue;\n      }\n      schema[table].fields[field].fieldName = newField;\n    }\n  }\n  return schema;\n}\n\nexport { accountSchema as a, parseUserOutput as b, coreSchema as c, parseAccountOutput as d, parseSessionOutput as e, parseInputData as f, getAllFields as g, parseUserInput as h, parseAdditionalUserInput as i, parseAccountInput as j, parseSessionInput as k, mergeSchema as m, parseOutputData as p, sessionSchema as s, userSchema as u, verificationSchema as v };\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AACA;;;AAEA,MAAM,aAAa,2LAAQ,CAAC;IAC1B,IAAI,2LAAQ;IACZ,WAAW,yLAAM,GAAG,OAAO,CAAC,IAAM,aAAa,GAAG,IAAI;IACtD,WAAW,yLAAM,GAAG,OAAO,CAAC,IAAM,aAAa,GAAG,IAAI;AACxD;AACA,MAAM,gBAAgB,WAAW,MAAM,CAAC;IACtC,YAAY,2LAAQ;IACpB,WAAW,2LAAQ;IACnB,QAAQ,4LAAQ,CAAC,MAAM;IACvB,aAAa,2LAAQ,GAAG,OAAO;IAC/B,cAAc,2LAAQ,GAAG,OAAO;IAChC,SAAS,2LAAQ,GAAG,OAAO;IAC3B;;GAEC,GACD,sBAAsB,yLAAM,GAAG,OAAO;IACtC;;GAEC,GACD,uBAAuB,yLAAM,GAAG,OAAO;IACvC;;GAEC,GACD,OAAO,2LAAQ,GAAG,OAAO;IACzB;;GAEC,GACD,UAAU,2LAAQ,GAAG,OAAO;AAC9B;AACA,MAAM,aAAa,WAAW,MAAM,CAAC;IACnC,OAAO,2LAAQ,GAAG,SAAS,CAAC,CAAC,MAAQ,IAAI,WAAW;IACpD,eAAe,4LAAS,GAAG,OAAO,CAAC;IACnC,MAAM,2LAAQ;IACd,OAAO,2LAAQ,GAAG,OAAO;AAC3B;AACA,MAAM,gBAAgB,WAAW,MAAM,CAAC;IACtC,QAAQ,4LAAQ,CAAC,MAAM;IACvB,WAAW,yLAAM;IACjB,OAAO,2LAAQ;IACf,WAAW,2LAAQ,GAAG,OAAO;IAC7B,WAAW,2LAAQ,GAAG,OAAO;AAC/B;AACA,MAAM,qBAAqB,WAAW,MAAM,CAAC;IAC3C,OAAO,2LAAQ;IACf,WAAW,yLAAM;IACjB,YAAY,2LAAQ;AACtB;AACA,SAAS,gBAAgB,IAAI,EAAE,MAAM;IACnC,MAAM,SAAS,OAAO,MAAM;IAC5B,MAAM,aAAa,CAAC;IACpB,IAAK,MAAM,OAAO,KAAM;QACtB,MAAM,QAAQ,MAAM,CAAC,IAAI;QACzB,IAAI,CAAC,OAAO;YACV,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;YAC3B;QACF;QACA,IAAI,MAAM,QAAQ,KAAK,OAAO;YAC5B;QACF;QACA,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;IAC7B;IACA,OAAO;AACT;AACA,SAAS,aAAa,OAAO,EAAE,KAAK;IAClC,IAAI,SAAS;QACX,GAAG,UAAU,SAAS,QAAQ,IAAI,EAAE,mBAAmB,CAAC,CAAC;QACzD,GAAG,UAAU,YAAY,QAAQ,OAAO,EAAE,mBAAmB,CAAC,CAAC;IACjE;IACA,KAAK,MAAM,UAAU,QAAQ,OAAO,IAAI,EAAE,CAAE;QAC1C,IAAI,OAAO,MAAM,IAAI,OAAO,MAAM,CAAC,MAAM,EAAE;YACzC,SAAS;gBACP,GAAG,MAAM;gBACT,GAAG,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM;YAChC;QACF;IACF;IACA,OAAO;AACT;AACA,SAAS,gBAAgB,OAAO,EAAE,IAAI;IACpC,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,gBAAgB,MAAM;QAAE,QAAQ;IAAO;AAChD;AACA,SAAS,mBAAmB,OAAO,EAAE,OAAO;IAC1C,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,gBAAgB,SAAS;QAAE,QAAQ;IAAO;AACnD;AACA,SAAS,mBAAmB,OAAO,EAAE,OAAO;IAC1C,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,gBAAgB,SAAS;QAAE,QAAQ;IAAO;AACnD;AACA,SAAS,eAAe,IAAI,EAAE,MAAM;IAClC,MAAM,SAAS,OAAO,MAAM,IAAI;IAChC,MAAM,SAAS,OAAO,MAAM;IAC5B,MAAM,aAAa,CAAC;IACpB,IAAK,MAAM,OAAO,OAAQ;QACxB,IAAI,OAAO,MAAM;YACf,IAAI,MAAM,CAAC,IAAI,CAAC,KAAK,KAAK,OAAO;gBAC/B,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,EAAE;oBAC5B,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY;oBAC1C;gBACF;gBACA;YACF;YACA,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,IAAI,CAAC,IAAI,KAAK,KAAK,GAAG;gBACxD,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI;gBAC7D;YACF;YACA,IAAI,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,SAAS,IAAI,CAAC,IAAI,KAAK,KAAK,GAAG;gBACxD,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,SAAS,EAAE,MAAM,IAAI,CAAC,IAAI;gBACxD;YACF;YACA,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,IAAI;YAC3B;QACF;QACA,IAAI,MAAM,CAAC,IAAI,CAAC,YAAY,IAAI,WAAW,UAAU;YACnD,UAAU,CAAC,IAAI,GAAG,MAAM,CAAC,IAAI,CAAC,YAAY;YAC1C;QACF;QACA,IAAI,MAAM,CAAC,IAAI,CAAC,QAAQ,IAAI,WAAW,UAAU;YAC/C,MAAM,IAAI,2JAAQ,CAAC,eAAe;gBAChC,SAAS,GAAG,IAAI,YAAY,CAAC;YAC/B;QACF;IACF;IACA,OAAO;AACT;AACA,SAAS,eAAe,OAAO,EAAE,IAAI,EAAE,MAAM;IAC3C,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,eAAe,QAAQ,CAAC,GAAG;QAAE,QAAQ;QAAQ;IAAO;AAC7D;AACA,SAAS,yBAAyB,OAAO,EAAE,IAAI;IAC7C,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,eAAe,QAAQ,CAAC,GAAG;QAAE,QAAQ;IAAO;AACrD;AACA,SAAS,kBAAkB,OAAO,EAAE,OAAO;IACzC,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,eAAe,SAAS;QAAE,QAAQ;IAAO;AAClD;AACA,SAAS,kBAAkB,OAAO,EAAE,OAAO;IACzC,MAAM,SAAS,aAAa,SAAS;IACrC,OAAO,eAAe,SAAS;QAAE,QAAQ;IAAO;AAClD;AACA,SAAS,YAAY,MAAM,EAAE,SAAS;IACpC,IAAI,CAAC,WAAW;QACd,OAAO;IACT;IACA,IAAK,MAAM,SAAS,UAAW;QAC7B,MAAM,eAAe,SAAS,CAAC,MAAM,EAAE;QACvC,IAAI,cAAc;YAChB,MAAM,CAAC,MAAM,CAAC,SAAS,GAAG;QAC5B;QACA,IAAK,MAAM,SAAS,MAAM,CAAC,MAAM,CAAC,MAAM,CAAE;YACxC,MAAM,WAAW,SAAS,CAAC,MAAM,EAAE,QAAQ,CAAC,MAAM;YAClD,IAAI,CAAC,UAAU;gBACb;YACF;YACA,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,SAAS,GAAG;QAC1C;IACF;IACA,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 1854, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.nqWf7zUe.mjs"],"sourcesContent":["import * as z from 'zod/v4';\nimport { c as createAuthMiddleware, a as createAuthEndpoint, g as getSessionFromCtx, B as BASE_ERROR_CODES, s as sessionMiddleware, f as freshSessionMiddleware } from './better-auth.DV5EHeYG.mjs';\nimport { APIError, toResponse } from 'better-call';\nimport { g as getDate } from './better-auth.CW6D9eSx.mjs';\nimport { createHash } from '@better-auth/utils/hash';\nimport { base64Url, base64 } from '@better-auth/utils/base64';\nimport { signJWT, symmetricEncrypt, symmetricDecrypt } from '../crypto/index.mjs';\nimport { betterFetch } from '@better-fetch/fetch';\nimport { jwtVerify, decodeJwt, decodeProtectedHeader, importJWK, createRemoteJWKSet } from 'jose';\nimport '@noble/ciphers/chacha';\nimport '@noble/ciphers/utils';\nimport '@noble/ciphers/webcrypto';\nimport '@noble/hashes/scrypt';\nimport '@better-auth/utils';\nimport '@better-auth/utils/hex';\nimport '@noble/hashes/utils';\nimport { g as generateRandomString } from './better-auth.B4Qoxdgc.mjs';\nimport { g as getOrigin, b as getHost, c as getProtocol } from './better-auth.CuS_eDdK.mjs';\nimport { s as setSessionCookie, d as deleteSessionCookie } from './better-auth.UfVWArIB.mjs';\nimport { JWTExpired } from 'jose/errors';\nimport '@better-auth/utils/random';\nimport { a as logger, s as shouldPublishLog } from './better-auth.BjBlybv-.mjs';\nimport { s as safeJSONParse } from './better-auth.BZZKN1g7.mjs';\nimport { g as generateId } from './better-auth.BUPPRXfK.mjs';\nimport { h as parseUserInput } from './better-auth.Dcv8PS7T.mjs';\nimport { b as isDevelopment } from './better-auth.CMQ3rA-I.mjs';\nimport '@better-auth/utils/hmac';\nimport '@better-auth/utils/binary';\nimport { createDefu } from 'defu';\nimport { B as BetterAuthError } from './better-auth.DdzSJf-n.mjs';\n\nfunction escapeRegExpChar(char) {\n  if (char === \"-\" || char === \"^\" || char === \"$\" || char === \"+\" || char === \".\" || char === \"(\" || char === \")\" || char === \"|\" || char === \"[\" || char === \"]\" || char === \"{\" || char === \"}\" || char === \"*\" || char === \"?\" || char === \"\\\\\") {\n    return `\\\\${char}`;\n  } else {\n    return char;\n  }\n}\nfunction escapeRegExpString(str) {\n  let result = \"\";\n  for (let i = 0; i < str.length; i++) {\n    result += escapeRegExpChar(str[i]);\n  }\n  return result;\n}\nfunction transform(pattern, separator = true) {\n  if (Array.isArray(pattern)) {\n    let regExpPatterns = pattern.map((p) => `^${transform(p, separator)}$`);\n    return `(?:${regExpPatterns.join(\"|\")})`;\n  }\n  let separatorSplitter = \"\";\n  let separatorMatcher = \"\";\n  let wildcard = \".\";\n  if (separator === true) {\n    separatorSplitter = \"/\";\n    separatorMatcher = \"[/\\\\\\\\]\";\n    wildcard = \"[^/\\\\\\\\]\";\n  } else if (separator) {\n    separatorSplitter = separator;\n    separatorMatcher = escapeRegExpString(separatorSplitter);\n    if (separatorMatcher.length > 1) {\n      separatorMatcher = `(?:${separatorMatcher})`;\n      wildcard = `((?!${separatorMatcher}).)`;\n    } else {\n      wildcard = `[^${separatorMatcher}]`;\n    }\n  }\n  let requiredSeparator = separator ? `${separatorMatcher}+?` : \"\";\n  let optionalSeparator = separator ? `${separatorMatcher}*?` : \"\";\n  let segments = separator ? pattern.split(separatorSplitter) : [pattern];\n  let result = \"\";\n  for (let s = 0; s < segments.length; s++) {\n    let segment = segments[s];\n    let nextSegment = segments[s + 1];\n    let currentSeparator = \"\";\n    if (!segment && s > 0) {\n      continue;\n    }\n    if (separator) {\n      if (s === segments.length - 1) {\n        currentSeparator = optionalSeparator;\n      } else if (nextSegment !== \"**\") {\n        currentSeparator = requiredSeparator;\n      } else {\n        currentSeparator = \"\";\n      }\n    }\n    if (separator && segment === \"**\") {\n      if (currentSeparator) {\n        result += s === 0 ? \"\" : currentSeparator;\n        result += `(?:${wildcard}*?${currentSeparator})*?`;\n      }\n      continue;\n    }\n    for (let c = 0; c < segment.length; c++) {\n      let char = segment[c];\n      if (char === \"\\\\\") {\n        if (c < segment.length - 1) {\n          result += escapeRegExpChar(segment[c + 1]);\n          c++;\n        }\n      } else if (char === \"?\") {\n        result += wildcard;\n      } else if (char === \"*\") {\n        result += `${wildcard}*?`;\n      } else {\n        result += escapeRegExpChar(char);\n      }\n    }\n    result += currentSeparator;\n  }\n  return result;\n}\nfunction isMatch(regexp, sample) {\n  if (typeof sample !== \"string\") {\n    throw new TypeError(`Sample must be a string, but ${typeof sample} given`);\n  }\n  return regexp.test(sample);\n}\nfunction wildcardMatch(pattern, options) {\n  if (typeof pattern !== \"string\" && !Array.isArray(pattern)) {\n    throw new TypeError(\n      `The first argument must be a single pattern string or an array of patterns, but ${typeof pattern} given`\n    );\n  }\n  if (typeof options === \"string\" || typeof options === \"boolean\") {\n    options = { separator: options };\n  }\n  if (arguments.length === 2 && !(typeof options === \"undefined\" || typeof options === \"object\" && options !== null && !Array.isArray(options))) {\n    throw new TypeError(\n      `The second argument must be an options object or a string/boolean separator, but ${typeof options} given`\n    );\n  }\n  options = options || {};\n  if (options.separator === \"\\\\\") {\n    throw new Error(\n      \"\\\\ is not a valid separator because it is used for escaping. Try setting the separator to `true` instead\"\n    );\n  }\n  let regexpPattern = transform(pattern, options.separator);\n  let regexp = new RegExp(`^${regexpPattern}$`, options.flags);\n  let fn = isMatch.bind(null, regexp);\n  fn.options = options;\n  fn.pattern = pattern;\n  fn.regexp = regexp;\n  return fn;\n}\n\nconst originCheckMiddleware = createAuthMiddleware(async (ctx) => {\n  if (ctx.request?.method !== \"POST\" || !ctx.request) {\n    return;\n  }\n  const { body, query, context } = ctx;\n  const originHeader = ctx.headers?.get(\"origin\") || ctx.headers?.get(\"referer\") || \"\";\n  const callbackURL = body?.callbackURL || query?.callbackURL;\n  const redirectURL = body?.redirectTo;\n  const errorCallbackURL = body?.errorCallbackURL;\n  const newUserCallbackURL = body?.newUserCallbackURL;\n  const trustedOrigins = Array.isArray(context.options.trustedOrigins) ? context.trustedOrigins : [\n    ...context.trustedOrigins,\n    ...await context.options.trustedOrigins?.(ctx.request) || []\n  ];\n  const usesCookies = ctx.headers?.has(\"cookie\");\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      if (pattern.includes(\"://\")) {\n        return wildcardMatch(pattern)(getOrigin(url) || url);\n      }\n      return wildcardMatch(pattern)(getHost(url));\n    }\n    const protocol = getProtocol(url);\n    return protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === getOrigin(url) : url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(url)\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  if (usesCookies && !ctx.context.options.advanced?.disableCSRFCheck) {\n    validateURL(originHeader, \"origin\");\n  }\n  callbackURL && validateURL(callbackURL, \"callbackURL\");\n  redirectURL && validateURL(redirectURL, \"redirectURL\");\n  errorCallbackURL && validateURL(errorCallbackURL, \"errorCallbackURL\");\n  newUserCallbackURL && validateURL(newUserCallbackURL, \"newUserCallbackURL\");\n});\nconst originCheck = (getValue) => createAuthMiddleware(async (ctx) => {\n  if (!ctx.request) {\n    return;\n  }\n  const { context } = ctx;\n  const callbackURL = getValue(ctx);\n  const trustedOrigins = Array.isArray(\n    context.options.trustedOrigins\n  ) ? context.trustedOrigins : [\n    ...context.trustedOrigins,\n    ...await context.options.trustedOrigins?.(ctx.request) || []\n  ];\n  const matchesPattern = (url, pattern) => {\n    if (url.startsWith(\"/\")) {\n      return false;\n    }\n    if (pattern.includes(\"*\")) {\n      if (pattern.includes(\"://\")) {\n        return wildcardMatch(pattern)(getOrigin(url) || url);\n      }\n      return wildcardMatch(pattern)(getHost(url));\n    }\n    const protocol = getProtocol(url);\n    return protocol === \"http:\" || protocol === \"https:\" || !protocol ? pattern === getOrigin(url) : url.startsWith(pattern);\n  };\n  const validateURL = (url, label) => {\n    if (!url) {\n      return;\n    }\n    const isTrustedOrigin = trustedOrigins.some(\n      (origin) => matchesPattern(url, origin) || url?.startsWith(\"/\") && label !== \"origin\" && /^\\/(?!\\/|\\\\|%2f|%5c)[\\w\\-.\\+/@]*(?:\\?[\\w\\-.\\+/=&%@]*)?$/.test(\n        url\n      )\n    );\n    if (!isTrustedOrigin) {\n      ctx.context.logger.error(`Invalid ${label}: ${url}`);\n      ctx.context.logger.info(\n        `If it's a valid URL, please add ${url} to trustedOrigins in your auth config\n`,\n        `Current list of trustedOrigins: ${trustedOrigins}`\n      );\n      throw new APIError(\"FORBIDDEN\", { message: `Invalid ${label}` });\n    }\n  };\n  const callbacks = Array.isArray(callbackURL) ? callbackURL : [callbackURL];\n  for (const url of callbacks) {\n    validateURL(url, \"callbackURL\");\n  }\n});\n\nasync function createEmailVerificationToken(secret, email, updateTo, expiresIn = 3600) {\n  const token = await signJWT(\n    {\n      email: email.toLowerCase(),\n      updateTo\n    },\n    secret,\n    expiresIn\n  );\n  return token;\n}\nasync function sendVerificationEmailFn(ctx, user) {\n  if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n    ctx.context.logger.error(\"Verification email isn't enabled.\");\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Verification email isn't enabled\"\n    });\n  }\n  const token = await createEmailVerificationToken(\n    ctx.context.secret,\n    user.email,\n    void 0,\n    ctx.context.options.emailVerification?.expiresIn\n  );\n  const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n  await ctx.context.options.emailVerification.sendVerificationEmail(\n    {\n      user,\n      url,\n      token\n    },\n    ctx.request\n  );\n}\nconst sendVerificationEmail = createAuthEndpoint(\n  \"/send-verification-email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      email: z.email().meta({\n        description: \"The email to send the verification email to\"\n      }),\n      callbackURL: z.string().meta({\n        description: \"The URL to use for email verification callback\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a verification email to the user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  email: {\n                    type: \"string\",\n                    description: \"The email to send the verification email to\",\n                    example: \"user@example.com\"\n                  },\n                  callbackURL: {\n                    type: \"string\",\n                    description: \"The URL to use for email verification callback\",\n                    example: \"https://example.com/callback\",\n                    nullable: true\n                  }\n                },\n                required: [\"email\"]\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the email was sent successfully\",\n                      example: true\n                    }\n                  }\n                }\n              }\n            }\n          },\n          \"400\": {\n            description: \"Bad Request\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    message: {\n                      type: \"string\",\n                      description: \"Error message\",\n                      example: \"Verification email isn't enabled\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailVerification?.sendVerificationEmail) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const { email } = ctx.body;\n    const session = await getSessionFromCtx(ctx);\n    if (!session) {\n      const user = await ctx.context.internalAdapter.findUserByEmail(email);\n      if (!user) {\n        return ctx.json({\n          status: true\n        });\n      }\n      await sendVerificationEmailFn(ctx, user.user);\n      return ctx.json({\n        status: true\n      });\n    }\n    if (session?.user.emailVerified) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"You can only send a verification email to an unverified email\"\n      });\n    }\n    if (session?.user.email !== email) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"You can only send a verification email to your own email\"\n      });\n    }\n    await sendVerificationEmailFn(ctx, session.user);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst verifyEmail = createAuthEndpoint(\n  \"/verify-email\",\n  {\n    method: \"GET\",\n    query: z.object({\n      token: z.string().meta({\n        description: \"The token to verify the email\"\n      }),\n      callbackURL: z.string().meta({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Verify the email of the user\",\n        parameters: [\n          {\n            name: \"token\",\n            in: \"query\",\n            description: \"The token to verify the email\",\n            required: true,\n            schema: {\n              type: \"string\"\n            }\n          },\n          {\n            name: \"callbackURL\",\n            in: \"query\",\n            description: \"The URL to redirect to after email verification\",\n            required: false,\n            schema: {\n              type: \"string\"\n            }\n          }\n        ],\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\",\n                          description: \"User ID\"\n                        },\n                        email: {\n                          type: \"string\",\n                          description: \"User email\"\n                        },\n                        name: {\n                          type: \"string\",\n                          description: \"User name\"\n                        },\n                        image: {\n                          type: \"string\",\n                          description: \"User image URL\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\",\n                          description: \"Indicates if the user email is verified\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          description: \"User creation date\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          description: \"User update date\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"name\",\n                        \"image\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    },\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the email was verified successfully\"\n                    }\n                  },\n                  required: [\"user\", \"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    function redirectOnError(error) {\n      if (ctx.query.callbackURL) {\n        if (ctx.query.callbackURL.includes(\"?\")) {\n          throw ctx.redirect(`${ctx.query.callbackURL}&error=${error}`);\n        }\n        throw ctx.redirect(`${ctx.query.callbackURL}?error=${error}`);\n      }\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: error\n      });\n    }\n    const { token } = ctx.query;\n    let jwt;\n    try {\n      jwt = await jwtVerify(\n        token,\n        new TextEncoder().encode(ctx.context.secret),\n        {\n          algorithms: [\"HS256\"]\n        }\n      );\n    } catch (e) {\n      if (e instanceof JWTExpired) {\n        return redirectOnError(\"token_expired\");\n      }\n      return redirectOnError(\"invalid_token\");\n    }\n    const schema = z.object({\n      email: z.string().email(),\n      updateTo: z.string().optional()\n    });\n    const parsed = schema.parse(jwt.payload);\n    const user = await ctx.context.internalAdapter.findUserByEmail(\n      parsed.email\n    );\n    if (!user) {\n      return redirectOnError(\"user_not_found\");\n    }\n    if (parsed.updateTo) {\n      const session = await getSessionFromCtx(ctx);\n      if (!session) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      if (session.user.email !== parsed.email) {\n        if (ctx.query.callbackURL) {\n          throw ctx.redirect(`${ctx.query.callbackURL}?error=unauthorized`);\n        }\n        return redirectOnError(\"unauthorized\");\n      }\n      const updatedUser2 = await ctx.context.internalAdapter.updateUserByEmail(\n        parsed.email,\n        {\n          email: parsed.updateTo,\n          emailVerified: false\n        },\n        ctx\n      );\n      const newToken = await createEmailVerificationToken(\n        ctx.context.secret,\n        parsed.updateTo\n      );\n      await ctx.context.options.emailVerification?.sendVerificationEmail?.(\n        {\n          user: updatedUser2,\n          url: `${ctx.context.baseURL}/verify-email?token=${newToken}&callbackURL=${ctx.query.callbackURL || \"/\"}`,\n          token: newToken\n        },\n        ctx.request\n      );\n      await setSessionCookie(ctx, {\n        session: session.session,\n        user: {\n          ...session.user,\n          email: parsed.updateTo,\n          emailVerified: false\n        }\n      });\n      if (ctx.query.callbackURL) {\n        throw ctx.redirect(ctx.query.callbackURL);\n      }\n      return ctx.json({\n        status: true,\n        user: {\n          id: updatedUser2.id,\n          email: updatedUser2.email,\n          name: updatedUser2.name,\n          image: updatedUser2.image,\n          emailVerified: updatedUser2.emailVerified,\n          createdAt: updatedUser2.createdAt,\n          updatedAt: updatedUser2.updatedAt\n        }\n      });\n    }\n    if (ctx.context.options.emailVerification?.onEmailVerification) {\n      await ctx.context.options.emailVerification.onEmailVerification(\n        user.user,\n        ctx.request\n      );\n    }\n    const updatedUser = await ctx.context.internalAdapter.updateUserByEmail(\n      parsed.email,\n      {\n        emailVerified: true\n      },\n      ctx\n    );\n    if (ctx.context.options.emailVerification?.afterEmailVerification) {\n      await ctx.context.options.emailVerification.afterEmailVerification(\n        updatedUser,\n        ctx.request\n      );\n    }\n    if (ctx.context.options.emailVerification?.autoSignInAfterVerification) {\n      const currentSession = await getSessionFromCtx(ctx);\n      if (!currentSession || currentSession.user.email !== parsed.email) {\n        const session = await ctx.context.internalAdapter.createSession(\n          user.user.id,\n          ctx\n        );\n        if (!session) {\n          throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n            message: \"Failed to create session\"\n          });\n        }\n        await setSessionCookie(ctx, {\n          session,\n          user: {\n            ...user.user,\n            emailVerified: true\n          }\n        });\n      } else {\n        await setSessionCookie(ctx, {\n          session: currentSession.session,\n          user: {\n            ...currentSession.user,\n            emailVerified: true\n          }\n        });\n      }\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL);\n    }\n    return ctx.json({\n      status: true,\n      user: null\n    });\n  }\n);\n\nconst HIDE_METADATA = {\n  isAction: false\n};\n\nasync function generateState(c, link) {\n  const callbackURL = c.body?.callbackURL || c.context.options.baseURL;\n  if (!callbackURL) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"callbackURL is required\"\n    });\n  }\n  const codeVerifier = generateRandomString(128);\n  const state = generateRandomString(32);\n  const data = JSON.stringify({\n    callbackURL,\n    codeVerifier,\n    errorURL: c.body?.errorCallbackURL,\n    newUserURL: c.body?.newUserCallbackURL,\n    link,\n    /**\n     * This is the actual expiry time of the state\n     */\n    expiresAt: Date.now() + 10 * 60 * 1e3,\n    requestSignUp: c.body?.requestSignUp\n  });\n  const expiresAt = /* @__PURE__ */ new Date();\n  expiresAt.setMinutes(expiresAt.getMinutes() + 10);\n  const verification = await c.context.internalAdapter.createVerificationValue(\n    {\n      value: data,\n      identifier: state,\n      expiresAt\n    },\n    c\n  );\n  if (!verification) {\n    c.context.logger.error(\n      \"Unable to create verification. Make sure the database adapter is properly working and there is a verification table in the database\"\n    );\n    throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n      message: \"Unable to create verification\"\n    });\n  }\n  return {\n    state: verification.identifier,\n    codeVerifier\n  };\n}\nasync function parseState(c) {\n  const state = c.query.state || c.body.state;\n  const data = await c.context.internalAdapter.findVerificationValue(state);\n  if (!data) {\n    c.context.logger.error(\"State Mismatch. Verification not found\", {\n      state\n    });\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=please_restart_the_process`);\n  }\n  const parsedData = z.object({\n    callbackURL: z.string(),\n    codeVerifier: z.string(),\n    errorURL: z.string().optional(),\n    newUserURL: z.string().optional(),\n    expiresAt: z.number(),\n    link: z.object({\n      email: z.string(),\n      userId: z.coerce.string()\n    }).optional(),\n    requestSignUp: z.boolean().optional()\n  }).parse(JSON.parse(data.value));\n  if (!parsedData.errorURL) {\n    parsedData.errorURL = `${c.context.baseURL}/error`;\n  }\n  if (parsedData.expiresAt < Date.now()) {\n    await c.context.internalAdapter.deleteVerificationValue(data.id);\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=please_restart_the_process`);\n  }\n  await c.context.internalAdapter.deleteVerificationValue(data.id);\n  return parsedData;\n}\n\nasync function generateCodeChallenge(codeVerifier) {\n  const codeChallengeBytes = await createHash(\"SHA-256\").digest(codeVerifier);\n  return base64Url.encode(new Uint8Array(codeChallengeBytes), {\n    padding: false\n  });\n}\nfunction getOAuth2Tokens(data) {\n  return {\n    tokenType: data.token_type,\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    accessTokenExpiresAt: data.expires_in ? getDate(data.expires_in, \"sec\") : void 0,\n    refreshTokenExpiresAt: data.refresh_token_expires_in ? getDate(data.refresh_token_expires_in, \"sec\") : void 0,\n    scopes: data?.scope ? typeof data.scope === \"string\" ? data.scope.split(\" \") : data.scope : [],\n    idToken: data.id_token\n  };\n}\nconst encodeOAuthParameter = (value) => encodeURIComponent(value).replace(/%20/g, \"+\");\nfunction decryptOAuthToken(token, ctx) {\n  if (!token) return token;\n  if (ctx.options.account?.encryptOAuthTokens) {\n    return symmetricDecrypt({\n      key: ctx.secret,\n      data: token\n    });\n  }\n  return token;\n}\nfunction setTokenUtil(token, ctx) {\n  if (ctx.options.account?.encryptOAuthTokens && token) {\n    return symmetricEncrypt({\n      key: ctx.secret,\n      data: token\n    });\n  }\n  return token;\n}\n\nasync function handleOAuthUserInfo(c, {\n  userInfo,\n  account,\n  callbackURL,\n  disableSignUp,\n  overrideUserInfo\n}) {\n  const dbUser = await c.context.internalAdapter.findOAuthUser(\n    userInfo.email.toLowerCase(),\n    account.accountId,\n    account.providerId\n  ).catch((e) => {\n    logger.error(\n      \"Better auth was unable to query your database.\\nError: \",\n      e\n    );\n    const errorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    throw c.redirect(`${errorURL}?error=internal_server_error`);\n  });\n  let user = dbUser?.user;\n  let isRegister = !user;\n  if (dbUser) {\n    const hasBeenLinked = dbUser.accounts.find(\n      (a) => a.providerId === account.providerId && a.accountId === account.accountId\n    );\n    if (!hasBeenLinked) {\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(\n        account.providerId\n      );\n      if (!isTrustedProvider && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        if (isDevelopment) {\n          logger.warn(\n            `User already exist but account isn't linked to ${account.providerId}. To read more about how account linking works in Better Auth see https://www.better-auth.com/docs/concepts/users-accounts#account-linking.`\n          );\n        }\n        return {\n          error: \"account not linked\",\n          data: null\n        };\n      }\n      try {\n        await c.context.internalAdapter.linkAccount(\n          {\n            providerId: account.providerId,\n            accountId: userInfo.id.toString(),\n            userId: dbUser.user.id,\n            accessToken: await setTokenUtil(account.accessToken, c.context),\n            refreshToken: await setTokenUtil(account.refreshToken, c.context),\n            idToken: account.idToken,\n            accessTokenExpiresAt: account.accessTokenExpiresAt,\n            refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n            scope: account.scope\n          },\n          c\n        );\n      } catch (e) {\n        logger.error(\"Unable to link account\", e);\n        return {\n          error: \"unable to link account\",\n          data: null\n        };\n      }\n    } else {\n      if (c.context.options.account?.updateAccountOnSignIn !== false) {\n        const updateData = Object.fromEntries(\n          Object.entries({\n            idToken: account.idToken,\n            accessToken: await setTokenUtil(account.accessToken, c.context),\n            refreshToken: await setTokenUtil(account.refreshToken, c.context),\n            accessTokenExpiresAt: account.accessTokenExpiresAt,\n            refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n            scope: account.scope\n          }).filter(([_, value]) => value !== void 0)\n        );\n        if (Object.keys(updateData).length > 0) {\n          await c.context.internalAdapter.updateAccount(\n            hasBeenLinked.id,\n            updateData,\n            c\n          );\n        }\n      }\n    }\n    if (overrideUserInfo) {\n      const { id: _, ...restUserInfo } = userInfo;\n      await c.context.internalAdapter.updateUser(dbUser.user.id, {\n        ...restUserInfo,\n        email: userInfo.email.toLowerCase(),\n        emailVerified: userInfo.email.toLowerCase() === dbUser.user.email ? dbUser.user.emailVerified || userInfo.emailVerified : userInfo.emailVerified\n      });\n    }\n  } else {\n    if (disableSignUp) {\n      return {\n        error: \"signup disabled\",\n        data: null,\n        isRegister: false\n      };\n    }\n    try {\n      const { id: _, ...restUserInfo } = userInfo;\n      user = await c.context.internalAdapter.createOAuthUser(\n        {\n          ...restUserInfo,\n          email: userInfo.email.toLowerCase()\n        },\n        {\n          accessToken: await setTokenUtil(account.accessToken, c.context),\n          refreshToken: await setTokenUtil(account.refreshToken, c.context),\n          idToken: account.idToken,\n          accessTokenExpiresAt: account.accessTokenExpiresAt,\n          refreshTokenExpiresAt: account.refreshTokenExpiresAt,\n          scope: account.scope,\n          providerId: account.providerId,\n          accountId: userInfo.id.toString()\n        },\n        c\n      ).then((res) => res?.user);\n      if (!userInfo.emailVerified && user && c.context.options.emailVerification?.sendOnSignUp) {\n        const token = await createEmailVerificationToken(\n          c.context.secret,\n          user.email,\n          void 0,\n          c.context.options.emailVerification?.expiresIn\n        );\n        const url = `${c.context.baseURL}/verify-email?token=${token}&callbackURL=${callbackURL}`;\n        await c.context.options.emailVerification?.sendVerificationEmail?.(\n          {\n            user,\n            url,\n            token\n          },\n          c.request\n        );\n      }\n    } catch (e) {\n      logger.error(e);\n      if (e instanceof APIError) {\n        return {\n          error: e.message,\n          data: null,\n          isRegister: false\n        };\n      }\n      return {\n        error: \"unable to create user\",\n        data: null,\n        isRegister: false\n      };\n    }\n  }\n  if (!user) {\n    return {\n      error: \"unable to create user\",\n      data: null,\n      isRegister: false\n    };\n  }\n  const session = await c.context.internalAdapter.createSession(user.id, c);\n  if (!session) {\n    return {\n      error: \"unable to create session\",\n      data: null,\n      isRegister: false\n    };\n  }\n  return {\n    data: {\n      session,\n      user\n    },\n    error: null,\n    isRegister\n  };\n}\n\nasync function createAuthorizationURL({\n  id,\n  options,\n  authorizationEndpoint,\n  state,\n  codeVerifier,\n  scopes,\n  claims,\n  redirectURI,\n  duration,\n  prompt,\n  accessType,\n  responseType,\n  display,\n  loginHint,\n  hd,\n  responseMode,\n  additionalParams,\n  scopeJoiner\n}) {\n  const url = new URL(authorizationEndpoint);\n  url.searchParams.set(\"response_type\", responseType || \"code\");\n  url.searchParams.set(\"client_id\", options.clientId);\n  url.searchParams.set(\"state\", state);\n  url.searchParams.set(\"scope\", scopes.join(scopeJoiner || \" \"));\n  url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  duration && url.searchParams.set(\"duration\", duration);\n  display && url.searchParams.set(\"display\", display);\n  loginHint && url.searchParams.set(\"login_hint\", loginHint);\n  prompt && url.searchParams.set(\"prompt\", prompt);\n  hd && url.searchParams.set(\"hd\", hd);\n  accessType && url.searchParams.set(\"access_type\", accessType);\n  responseMode && url.searchParams.set(\"response_mode\", responseMode);\n  if (codeVerifier) {\n    const codeChallenge = await generateCodeChallenge(codeVerifier);\n    url.searchParams.set(\"code_challenge_method\", \"S256\");\n    url.searchParams.set(\"code_challenge\", codeChallenge);\n  }\n  if (claims) {\n    const claimsObj = claims.reduce(\n      (acc, claim) => {\n        acc[claim] = null;\n        return acc;\n      },\n      {}\n    );\n    url.searchParams.set(\n      \"claims\",\n      JSON.stringify({\n        id_token: { email: null, email_verified: null, ...claimsObj }\n      })\n    );\n  }\n  if (additionalParams) {\n    Object.entries(additionalParams).forEach(([key, value]) => {\n      url.searchParams.set(key, value);\n    });\n  }\n  return url;\n}\n\nfunction createAuthorizationCodeRequest({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const body = new URLSearchParams();\n  const requestHeaders = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\",\n    \"user-agent\": \"better-auth\",\n    ...headers\n  };\n  body.set(\"grant_type\", \"authorization_code\");\n  body.set(\"code\", code);\n  codeVerifier && body.set(\"code_verifier\", codeVerifier);\n  options.clientKey && body.set(\"client_key\", options.clientKey);\n  deviceId && body.set(\"device_id\", deviceId);\n  body.set(\"redirect_uri\", options.redirectURI || redirectURI);\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (authentication === \"basic\") {\n    const encodedCredentials = base64.encode(\n      `${options.clientId}:${options.clientSecret ?? \"\"}`\n    );\n    requestHeaders[\"authorization\"] = `Basic ${encodedCredentials}`;\n  } else {\n    options.clientId && body.set(\"client_id\", options.clientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  for (const [key, value] of Object.entries(additionalParams)) {\n    if (!body.has(key)) body.append(key, value);\n  }\n  return {\n    body,\n    headers: requestHeaders\n  };\n}\nasync function validateAuthorizationCode({\n  code,\n  codeVerifier,\n  redirectURI,\n  options,\n  tokenEndpoint,\n  authentication,\n  deviceId,\n  headers,\n  additionalParams = {},\n  resource\n}) {\n  const { body, headers: requestHeaders } = createAuthorizationCodeRequest({\n    code,\n    codeVerifier,\n    redirectURI,\n    options,\n    authentication,\n    deviceId,\n    headers,\n    additionalParams,\n    resource\n  });\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers: requestHeaders\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = getOAuth2Tokens(data);\n  return tokens;\n}\nasync function validateToken(token, jwksEndpoint) {\n  const { data, error } = await betterFetch(jwksEndpoint, {\n    method: \"GET\",\n    headers: {\n      accept: \"application/json\",\n      \"user-agent\": \"better-auth\"\n    }\n  });\n  if (error) {\n    throw error;\n  }\n  const keys = data[\"keys\"];\n  const header = JSON.parse(atob(token.split(\".\")[0]));\n  const key = keys.find((key2) => key2.kid === header.kid);\n  if (!key) {\n    throw new Error(\"Key not found\");\n  }\n  const verified = await jwtVerify(token, key);\n  return verified;\n}\n\nfunction createRefreshAccessTokenRequest({\n  refreshToken,\n  options,\n  authentication,\n  extraParams,\n  resource\n}) {\n  const body = new URLSearchParams();\n  const headers = {\n    \"content-type\": \"application/x-www-form-urlencoded\",\n    accept: \"application/json\"\n  };\n  body.set(\"grant_type\", \"refresh_token\");\n  body.set(\"refresh_token\", refreshToken);\n  if (authentication === \"basic\") {\n    if (options.clientId) {\n      headers[\"authorization\"] = \"Basic \" + base64.encode(`${options.clientId}:${options.clientSecret ?? \"\"}`);\n    } else {\n      headers[\"authorization\"] = \"Basic \" + base64.encode(`:${options.clientSecret ?? \"\"}`);\n    }\n  } else {\n    options.clientId && body.set(\"client_id\", options.clientId);\n    if (options.clientSecret) {\n      body.set(\"client_secret\", options.clientSecret);\n    }\n  }\n  if (resource) {\n    if (typeof resource === \"string\") {\n      body.append(\"resource\", resource);\n    } else {\n      for (const _resource of resource) {\n        body.append(\"resource\", _resource);\n      }\n    }\n  }\n  if (extraParams) {\n    for (const [key, value] of Object.entries(extraParams)) {\n      body.set(key, value);\n    }\n  }\n  return {\n    body,\n    headers\n  };\n}\nasync function refreshAccessToken({\n  refreshToken,\n  options,\n  tokenEndpoint,\n  authentication,\n  extraParams\n}) {\n  const { body, headers } = createRefreshAccessTokenRequest({\n    refreshToken,\n    options,\n    authentication,\n    extraParams\n  });\n  const { data, error } = await betterFetch(tokenEndpoint, {\n    method: \"POST\",\n    body,\n    headers\n  });\n  if (error) {\n    throw error;\n  }\n  const tokens = {\n    accessToken: data.access_token,\n    refreshToken: data.refresh_token,\n    tokenType: data.token_type,\n    scopes: data.scope?.split(\" \"),\n    idToken: data.id_token\n  };\n  if (data.expires_in) {\n    const now = /* @__PURE__ */ new Date();\n    tokens.accessTokenExpiresAt = new Date(\n      now.getTime() + data.expires_in * 1e3\n    );\n  }\n  return tokens;\n}\n\nconst apple = (options) => {\n  const tokenEndpoint = \"https://appleid.apple.com/auth/token\";\n  return {\n    id: \"apple\",\n    name: \"Apple\",\n    async createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scope = options.disableDefaultScope ? [] : [\"email\", \"name\"];\n      options.scope && _scope.push(...options.scope);\n      scopes && _scope.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"apple\",\n        options,\n        authorizationEndpoint: \"https://appleid.apple.com/auth/authorize\",\n        scopes: _scope,\n        state,\n        redirectURI,\n        responseMode: \"form_post\",\n        responseType: \"code id_token\"\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const decodedHeader = decodeProtectedHeader(token);\n      const { kid, alg: jwtAlg } = decodedHeader;\n      if (!kid || !jwtAlg) return false;\n      const publicKey = await getApplePublicKey(kid);\n      const { payload: jwtClaims } = await jwtVerify(token, publicKey, {\n        algorithms: [jwtAlg],\n        issuer: \"https://appleid.apple.com\",\n        audience: options.audience && options.audience.length ? options.audience : options.appBundleIdentifier ? options.appBundleIdentifier : options.clientId,\n        maxTokenAge: \"1h\"\n      });\n      [\"email_verified\", \"is_private_email\"].forEach((field) => {\n        if (jwtClaims[field] !== void 0) {\n          jwtClaims[field] = Boolean(jwtClaims[field]);\n        }\n      });\n      if (nonce && jwtClaims.nonce !== nonce) {\n        return false;\n      }\n      return !!jwtClaims;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://appleid.apple.com/auth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const profile = decodeJwt(token.idToken);\n      if (!profile) {\n        return null;\n      }\n      const name = token.user ? `${token.user.name?.firstName} ${token.user.name?.lastName}` : profile.name || profile.email;\n      const emailVerified = typeof profile.email_verified === \"boolean\" ? profile.email_verified : profile.email_verified === \"true\";\n      const enrichedProfile = {\n        ...profile,\n        name\n      };\n      const userMap = await options.mapProfileToUser?.(enrichedProfile);\n      return {\n        user: {\n          id: profile.sub,\n          name: enrichedProfile.name,\n          emailVerified,\n          email: profile.email,\n          ...userMap\n        },\n        data: enrichedProfile\n      };\n    },\n    options\n  };\n};\nconst getApplePublicKey = async (kid) => {\n  const APPLE_BASE_URL = \"https://appleid.apple.com\";\n  const JWKS_APPLE_URI = \"/auth/keys\";\n  const { data } = await betterFetch(`${APPLE_BASE_URL}${JWKS_APPLE_URI}`);\n  if (!data?.keys) {\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"Keys not found\"\n    });\n  }\n  const jwk = data.keys.find((key) => key.kid === kid);\n  if (!jwk) {\n    throw new Error(`JWK with kid ${kid} not found`);\n  }\n  return await importJWK(jwk, jwk.alg);\n};\n\nconst atlassian = (options) => {\n  return {\n    id: \"atlassian\",\n    name: \"Atlassian\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\"Client Id and Secret are required for Atlassian\");\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Atlassian\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"read:jira-user\", \"offline_access\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"atlassian\",\n        options,\n        authorizationEndpoint: \"https://auth.atlassian.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        additionalParams: {\n          audience: \"api.atlassian.com\"\n        },\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://auth.atlassian.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        return null;\n      }\n      try {\n        const { data: profile } = await betterFetch(\"https://api.atlassian.com/me\", {\n          headers: { Authorization: `Bearer ${token.accessToken}` }\n        });\n        if (!profile) return null;\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.account_id,\n            name: profile.name,\n            email: profile.email,\n            image: profile.picture,\n            emailVerified: false,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst cognito = (options) => {\n  if (!options.domain || !options.region || !options.userPoolId) {\n    logger.error(\n      \"Domain, region and userPoolId are required for Amazon Cognito. Make sure to provide them in the options.\"\n    );\n    throw new BetterAuthError(\"DOMAIN_AND_REGION_REQUIRED\");\n  }\n  const cleanDomain = options.domain.replace(/^https?:\\/\\//, \"\");\n  const authorizationEndpoint = `https://${cleanDomain}/oauth2/authorize`;\n  const tokenEndpoint = `https://${cleanDomain}/oauth2/token`;\n  const userInfoEndpoint = `https://${cleanDomain}/oauth2/userinfo`;\n  return {\n    id: \"cognito\",\n    name: \"Cognito\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId) {\n        logger.error(\n          \"ClientId is required for Amazon Cognito. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (options.requireClientSecret && !options.clientSecret) {\n        logger.error(\n          \"Client Secret is required when requireClientSecret is true. Make sure to provide it in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_SECRET_REQUIRED\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"cognito\",\n        options: {\n          ...options\n        },\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const decodedHeader = decodeProtectedHeader(token);\n        const { kid, alg: jwtAlg } = decodedHeader;\n        if (!kid || !jwtAlg) return false;\n        const publicKey = await getCognitoPublicKey(\n          kid,\n          options.region,\n          options.userPoolId\n        );\n        const expectedIssuer = `https://cognito-idp.${options.region}.amazonaws.com/${options.userPoolId}`;\n        const { payload: jwtClaims } = await jwtVerify(token, publicKey, {\n          algorithms: [jwtAlg],\n          issuer: expectedIssuer,\n          audience: options.clientId,\n          maxTokenAge: \"1h\"\n        });\n        if (nonce && jwtClaims.nonce !== nonce) {\n          return false;\n        }\n        return true;\n      } catch (error) {\n        logger.error(\"Failed to verify ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken) {\n        try {\n          const profile = decodeJwt(token.idToken);\n          if (!profile) {\n            return null;\n          }\n          const name = profile.name || profile.given_name || profile.username || profile.email;\n          const enrichedProfile = {\n            ...profile,\n            name\n          };\n          const userMap = await options.mapProfileToUser?.(enrichedProfile);\n          return {\n            user: {\n              id: profile.sub,\n              name: enrichedProfile.name,\n              email: profile.email,\n              image: profile.picture,\n              emailVerified: profile.email_verified,\n              ...userMap\n            },\n            data: enrichedProfile\n          };\n        } catch (error) {\n          logger.error(\"Failed to decode ID token:\", error);\n        }\n      }\n      if (token.accessToken) {\n        try {\n          const { data: userInfo } = await betterFetch(\n            userInfoEndpoint,\n            {\n              headers: {\n                Authorization: `Bearer ${token.accessToken}`\n              }\n            }\n          );\n          if (userInfo) {\n            const userMap = await options.mapProfileToUser?.(userInfo);\n            return {\n              user: {\n                id: userInfo.sub,\n                name: userInfo.name || userInfo.given_name || userInfo.username,\n                email: userInfo.email,\n                image: userInfo.picture,\n                emailVerified: userInfo.email_verified,\n                ...userMap\n              },\n              data: userInfo\n            };\n          }\n        } catch (error) {\n          logger.error(\"Failed to fetch user info from Cognito:\", error);\n        }\n      }\n      return null;\n    },\n    options\n  };\n};\nconst getCognitoPublicKey = async (kid, region, userPoolId) => {\n  const COGNITO_JWKS_URI = `https://cognito-idp.${region}.amazonaws.com/${userPoolId}/.well-known/jwks.json`;\n  try {\n    const { data } = await betterFetch(COGNITO_JWKS_URI);\n    if (!data?.keys) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Keys not found\"\n      });\n    }\n    const jwk = data.keys.find((key) => key.kid === kid);\n    if (!jwk) {\n      throw new Error(`JWK with kid ${kid} not found`);\n    }\n    return await importJWK(jwk, jwk.alg);\n  } catch (error) {\n    logger.error(\"Failed to fetch Cognito public key:\", error);\n    throw error;\n  }\n};\n\nconst discord = (options) => {\n  return {\n    id: \"discord\",\n    name: \"Discord\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identify\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      return new URL(\n        `https://discord.com/api/oauth2/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"none\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://discord.com/api/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://discord.com/api/users/@me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (profile.avatar === null) {\n        const defaultAvatarNumber = profile.discriminator === \"0\" ? Number(BigInt(profile.id) >> BigInt(22)) % 6 : parseInt(profile.discriminator) % 5;\n        profile.image_url = `https://cdn.discordapp.com/embed/avatars/${defaultAvatarNumber}.png`;\n      } else {\n        const format = profile.avatar.startsWith(\"a_\") ? \"gif\" : \"png\";\n        profile.image_url = `https://cdn.discordapp.com/avatars/${profile.id}/${profile.avatar}.${format}`;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.global_name || profile.username || \"\",\n          email: profile.email,\n          emailVerified: profile.verified,\n          image: profile.image_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst facebook = (options) => {\n  return {\n    id: \"facebook\",\n    name: \"Facebook\",\n    async createAuthorizationURL({ state, scopes, redirectURI, loginHint }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"public_profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"facebook\",\n        options,\n        authorizationEndpoint: \"https://www.facebook.com/v21.0/dialog/oauth\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: options.configId ? {\n          config_id: options.configId\n        } : {}\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://graph.facebook.com/oauth/access_token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      if (token.split(\".\").length === 3) {\n        try {\n          const { payload: jwtClaims } = await jwtVerify(\n            token,\n            createRemoteJWKSet(\n              // https://developers.facebook.com/docs/facebook-login/limited-login/token/#jwks\n              new URL(\n                \"https://limited.facebook.com/.well-known/oauth/openid/jwks/\"\n              )\n            ),\n            {\n              algorithms: [\"RS256\"],\n              audience: options.clientId,\n              issuer: \"https://www.facebook.com\"\n            }\n          );\n          if (nonce && jwtClaims.nonce !== nonce) {\n            return false;\n          }\n          return !!jwtClaims;\n        } catch (error) {\n          return false;\n        }\n      }\n      return true;\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://graph.facebook.com/v18.0/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (token.idToken && token.idToken.split(\".\").length === 3) {\n        const profile2 = decodeJwt(token.idToken);\n        const user = {\n          id: profile2.sub,\n          name: profile2.name,\n          email: profile2.email,\n          picture: {\n            data: {\n              url: profile2.picture,\n              height: 100,\n              width: 100,\n              is_silhouette: false\n            }\n          }\n        };\n        const userMap2 = await options.mapProfileToUser?.({\n          ...user,\n          email_verified: true\n        });\n        return {\n          user: {\n            ...user,\n            emailVerified: true,\n            ...userMap2\n          },\n          data: profile2\n        };\n      }\n      const fields = [\n        \"id\",\n        \"name\",\n        \"email\",\n        \"picture\",\n        ...options?.fields || []\n      ];\n      const { data: profile, error } = await betterFetch(\n        \"https://graph.facebook.com/me?fields=\" + fields.join(\",\"),\n        {\n          auth: {\n            type: \"Bearer\",\n            token: token.accessToken\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.picture.data.url,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst figma = (options) => {\n  return {\n    id: \"figma\",\n    name: \"Figma\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret are required for Figma. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Figma\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"file_read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"figma\",\n        options,\n        authorizationEndpoint: \"https://www.figma.com/oauth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.figma.com/api/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: profile } = await betterFetch(\n          \"https://api.figma.com/v1/me\",\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!profile) {\n          logger.error(\"Failed to fetch user from Figma\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(profile);\n        return {\n          user: {\n            id: profile.id,\n            name: profile.handle,\n            email: profile.email,\n            image: profile.img_url,\n            emailVerified: !!profile.email,\n            ...userMap\n          },\n          data: profile\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Figma:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst github = (options) => {\n  const tokenEndpoint = \"https://github.com/login/oauth/access_token\";\n  return {\n    id: \"github\",\n    name: \"GitHub\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read:user\", \"user:email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"github\",\n        options,\n        authorizationEndpoint: \"https://github.com/login/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        prompt: options.prompt\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://github.com/login/oauth/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.github.com/user\",\n        {\n          headers: {\n            \"User-Agent\": \"better-auth\",\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const { data: emails } = await betterFetch(\"https://api.github.com/user/emails\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"User-Agent\": \"better-auth\"\n        }\n      });\n      if (!profile.email && emails) {\n        profile.email = (emails.find((e) => e.primary) ?? emails[0])?.email;\n      }\n      const emailVerified = emails?.find((e) => e.email === profile.email)?.verified ?? false;\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name || profile.login,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst google = (options) => {\n  return {\n    id: \"google\",\n    name: \"Google\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint,\n      display\n    }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret is required for Google. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Google\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"profile\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const url = await createAuthorizationURL({\n        id: \"google\",\n        options,\n        authorizationEndpoint: \"https://accounts.google.com/o/oauth2/auth\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt,\n        accessType: options.accessType,\n        display: display || options.display,\n        loginHint,\n        hd: options.hd,\n        additionalParams: {\n          include_granted_scopes: \"true\"\n        }\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://oauth2.googleapis.com/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://www.googleapis.com/oauth2/v4/token\"\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const googlePublicKeyUrl = `https://www.googleapis.com/oauth2/v3/tokeninfo?id_token=${token}`;\n      const { data: tokenInfo } = await betterFetch(googlePublicKeyUrl);\n      if (!tokenInfo) {\n        return false;\n      }\n      const isValid = tokenInfo.aud === options.clientId && (tokenInfo.iss === \"https://accounts.google.com\" || tokenInfo.iss === \"accounts.google.com\");\n      return isValid;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: user.email_verified,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    options\n  };\n};\n\nconst kick = (options) => {\n  return {\n    id: \"kick\",\n    name: \"Kick\",\n    createAuthorizationURL({ state, scopes, redirectURI, codeVerifier }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kick\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.kick.com/oauth/authorize\",\n        scopes: _scopes,\n        codeVerifier,\n        state\n      });\n    },\n    async validateAuthorizationCode({ code, redirectURI, codeVerifier }) {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.kick.com/oauth/token\",\n        codeVerifier\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data, error } = await betterFetch(\"https://api.kick.com/public/v1/users\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      if (error) {\n        return null;\n      }\n      const profile = data.data[0];\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user_id,\n          name: profile.name,\n          email: profile.email,\n          image: profile.profile_picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst huggingface = (options) => {\n  return {\n    id: \"huggingface\",\n    name: \"Hugging Face\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"huggingface\",\n        options,\n        authorizationEndpoint: \"https://huggingface.co/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://huggingface.co/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://huggingface.co/oauth/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name || profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified ?? false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst microsoft = (options) => {\n  const tenant = options.tenantId || \"common\";\n  const authority = options.authority || \"https://login.microsoftonline.com\";\n  const authorizationEndpoint = `${authority}/${tenant}/oauth2/v2.0/authorize`;\n  const tokenEndpoint = `${authority}/${tenant}/oauth2/v2.0/token`;\n  return {\n    id: \"microsoft\",\n    name: \"Microsoft EntraID\",\n    createAuthorizationURL(data) {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      data.scopes && scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"microsoft\",\n        options,\n        authorizationEndpoint,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        scopes,\n        redirectURI: data.redirectURI,\n        prompt: options.prompt,\n        loginHint: data.loginHint\n      });\n    },\n    validateAuthorizationCode({ code, codeVerifier, redirectURI }) {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.idToken) {\n        return null;\n      }\n      const user = decodeJwt(token.idToken);\n      const profilePhotoSize = options.profilePhotoSize || 48;\n      await betterFetch(\n        `https://graph.microsoft.com/v1.0/me/photos/${profilePhotoSize}x${profilePhotoSize}/$value`,\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          async onResponse(context) {\n            if (options.disableProfilePhoto || !context.response.ok) {\n              return;\n            }\n            try {\n              const response = context.response.clone();\n              const pictureBuffer = await response.arrayBuffer();\n              const pictureBase64 = base64.encode(pictureBuffer);\n              user.picture = `data:image/jpeg;base64, ${pictureBase64}`;\n            } catch (e) {\n              logger.error(\n                e && typeof e === \"object\" && \"name\" in e ? e.name : \"\",\n                e\n              );\n            }\n          }\n        }\n      );\n      const userMap = await options.mapProfileToUser?.(user);\n      return {\n        user: {\n          id: user.sub,\n          name: user.name,\n          email: user.email,\n          image: user.picture,\n          emailVerified: true,\n          ...userMap\n        },\n        data: user\n      };\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\", \"User.Read\", \"offline_access\"];\n      options.scope && scopes.push(...options.scope);\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        extraParams: {\n          scope: scopes.join(\" \")\n          // Include the scopes in request to microsoft\n        },\n        tokenEndpoint\n      });\n    },\n    options\n  };\n};\n\nconst slack = (options) => {\n  return {\n    id: \"slack\",\n    name: \"Slack\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      scopes && _scopes.push(...scopes);\n      options.scope && _scopes.push(...options.scope);\n      const url = new URL(\"https://slack.com/openid/connect/authorize\");\n      url.searchParams.set(\"scope\", _scopes.join(\" \"));\n      url.searchParams.set(\"response_type\", \"code\");\n      url.searchParams.set(\"client_id\", options.clientId);\n      url.searchParams.set(\"redirect_uri\", options.redirectURI || redirectURI);\n      url.searchParams.set(\"state\", state);\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://slack.com/api/openid.connect.token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://slack.com/api/openid.connect.userInfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile[\"https://slack.com/user_id\"],\n          name: profile.name || \"\",\n          email: profile.email,\n          emailVerified: profile.email_verified,\n          image: profile.picture || profile[\"https://slack.com/user_image_512\"],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst notion = (options) => {\n  const tokenEndpoint = \"https://api.notion.com/v1/oauth/token\";\n  return {\n    id: \"notion\",\n    name: \"Notion\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"notion\",\n        options,\n        authorizationEndpoint: \"https://api.notion.com/v1/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint,\n        additionalParams: {\n          owner: \"user\"\n        }\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint,\n        authentication: \"basic\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\"https://api.notion.com/v1/users/me\", {\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`,\n          \"Notion-Version\": \"2022-06-28\"\n        }\n      });\n      if (error || !profile) {\n        return null;\n      }\n      const userProfile = profile.bot?.owner?.user;\n      if (!userProfile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(userProfile);\n      return {\n        user: {\n          id: userProfile.id,\n          name: userProfile.name || \"Notion User\",\n          email: userProfile.person?.email || null,\n          image: userProfile.avatar_url,\n          emailVerified: !!userProfile.person?.email,\n          ...userMap\n        },\n        data: userProfile\n      };\n    },\n    options\n  };\n};\n\nconst spotify = (options) => {\n  return {\n    id: \"spotify\",\n    name: \"Spotify\",\n    createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user-read-email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"spotify\",\n        options,\n        authorizationEndpoint: \"https://accounts.spotify.com/authorize\",\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://accounts.spotify.com/api/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.spotify.com/v1/me\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          email: profile.email,\n          image: profile.images[0]?.url,\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitch = (options) => {\n  return {\n    id: \"twitch\",\n    name: \"Twitch\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user:read:email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"twitch\",\n        redirectURI,\n        options,\n        authorizationEndpoint: \"https://id.twitch.tv/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        claims: options.claims || [\n          \"email\",\n          \"email_verified\",\n          \"preferred_username\",\n          \"picture\"\n        ]\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.twitch.tv/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const idToken = token.idToken;\n      if (!idToken) {\n        logger.error(\"No idToken found in token\");\n        return null;\n      }\n      const profile = decodeJwt(idToken);\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.preferred_username,\n          email: profile.email,\n          image: profile.picture,\n          emailVerified: profile.email_verified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst twitter = (options) => {\n  return {\n    id: \"twitter\",\n    name: \"Twitter\",\n    createAuthorizationURL(data) {\n      const _scopes = options.disableDefaultScope ? [] : [\"users.read\", \"tweet.read\", \"offline.access\", \"users.email\"];\n      options.scope && _scopes.push(...options.scope);\n      data.scopes && _scopes.push(...data.scopes);\n      return createAuthorizationURL({\n        id: \"twitter\",\n        options,\n        authorizationEndpoint: \"https://x.com/i/oauth2/authorize\",\n        scopes: _scopes,\n        state: data.state,\n        codeVerifier: data.codeVerifier,\n        redirectURI: data.redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        authentication: \"basic\",\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://api.x.com/2/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error: profileError } = await betterFetch(\n        \"https://api.x.com/2/users/me?user.fields=profile_image_url\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (profileError) {\n        return null;\n      }\n      const { data: emailData, error: emailError } = await betterFetch(\"https://api.x.com/2/users/me?user.fields=confirmed_email\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token.accessToken}`\n        }\n      });\n      let emailVerified = false;\n      if (!emailError && emailData?.data?.confirmed_email) {\n        profile.data.email = emailData.data.confirmed_email;\n        emailVerified = true;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.data.id,\n          name: profile.data.name,\n          email: profile.data.email || profile.data.username || null,\n          image: profile.data.profile_image_url,\n          emailVerified,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst dropbox = (options) => {\n  const tokenEndpoint = \"https://api.dropboxapi.com/oauth2/token\";\n  return {\n    id: \"dropbox\",\n    name: \"Dropbox\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_info.read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const additionalParams = {};\n      if (options.accessType) {\n        additionalParams.token_access_type = options.accessType;\n      }\n      return await createAuthorizationURL({\n        id: \"dropbox\",\n        options,\n        authorizationEndpoint: \"https://www.dropbox.com/oauth2/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        additionalParams\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://api.dropbox.com/oauth2/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.dropboxapi.com/2/users/get_current_account\",\n        {\n          method: \"POST\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.account_id,\n          name: profile.name?.display_name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.profile_photo_url,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst linear = (options) => {\n  const tokenEndpoint = \"https://api.linear.app/oauth/token\";\n  return {\n    id: \"linear\",\n    name: \"Linear\",\n    createAuthorizationURL({ state, scopes, loginHint, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"read\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"linear\",\n        options,\n        authorizationEndpoint: \"https://linear.app/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.linear.app/graphql\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/json\",\n            Authorization: `Bearer ${token.accessToken}`\n          },\n          body: JSON.stringify({\n            query: `\n\t\t\t\t\t\t\tquery {\n\t\t\t\t\t\t\t\tviewer {\n\t\t\t\t\t\t\t\t\tid\n\t\t\t\t\t\t\t\t\tname\n\t\t\t\t\t\t\t\t\temail\n\t\t\t\t\t\t\t\t\tavatarUrl\n\t\t\t\t\t\t\t\t\tactive\n\t\t\t\t\t\t\t\t\tcreatedAt\n\t\t\t\t\t\t\t\t\tupdatedAt\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t`\n          })\n        }\n      );\n      if (error || !profile?.data?.viewer) {\n        return null;\n      }\n      const userData = profile.data.viewer;\n      const userMap = await options.mapProfileToUser?.(userData);\n      return {\n        user: {\n          id: profile.data.viewer.id,\n          name: profile.data.viewer.name,\n          email: profile.data.viewer.email,\n          image: profile.data.viewer.avatarUrl,\n          emailVerified: true,\n          ...userMap\n        },\n        data: userData\n      };\n    },\n    options\n  };\n};\n\nconst linkedin = (options) => {\n  const authorizationEndpoint = \"https://www.linkedin.com/oauth/v2/authorization\";\n  const tokenEndpoint = \"https://www.linkedin.com/oauth/v2/accessToken\";\n  return {\n    id: \"linkedin\",\n    name: \"Linkedin\",\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      redirectURI,\n      loginHint\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\", \"openid\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"linkedin\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        loginHint,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return await validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.linkedin.com/v2/userinfo\",\n        {\n          method: \"GET\",\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.name,\n          email: profile.email,\n          emailVerified: profile.email_verified || false,\n          image: profile.picture,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst cleanDoubleSlashes = (input = \"\") => {\n  return input.split(\"://\").map((str) => str.replace(/\\/{2,}/g, \"/\")).join(\"://\");\n};\nconst issuerToEndpoints = (issuer) => {\n  let baseUrl = issuer || \"https://gitlab.com\";\n  return {\n    authorizationEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/authorize`),\n    tokenEndpoint: cleanDoubleSlashes(`${baseUrl}/oauth/token`),\n    userinfoEndpoint: cleanDoubleSlashes(`${baseUrl}/api/v4/user`)\n  };\n};\nconst gitlab = (options) => {\n  const { authorizationEndpoint, tokenEndpoint, userinfoEndpoint } = issuerToEndpoints(options.issuer);\n  const issuerId = \"gitlab\";\n  const issuerName = \"Gitlab\";\n  return {\n    id: issuerId,\n    name: issuerName,\n    createAuthorizationURL: async ({\n      state,\n      scopes,\n      codeVerifier,\n      loginHint,\n      redirectURI\n    }) => {\n      const _scopes = options.disableDefaultScope ? [] : [\"read_user\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: issuerId,\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        codeVerifier,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://gitlab.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        userinfoEndpoint,\n        { headers: { authorization: `Bearer ${token.accessToken}` } }\n      );\n      if (error || profile.state !== \"active\" || profile.locked) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name ?? profile.username,\n          email: profile.email,\n          image: profile.avatar_url,\n          emailVerified: true,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst tiktok = (options) => {\n  return {\n    id: \"tiktok\",\n    name: \"TikTok\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"user.info.profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://www.tiktok.com/v2/auth/authorize?scope=${_scopes.join(\n          \",\"\n        )}&response_type=code&client_key=${options.clientKey}&client_secret=${options.clientSecret}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://open.tiktokapis.com/v2/oauth/token/\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const fields = [\n        \"open_id\",\n        \"avatar_large_url\",\n        \"display_name\",\n        \"username\"\n      ];\n      const { data: profile, error } = await betterFetch(\n        `https://open.tiktokapis.com/v2/user/info/?fields=${fields.join(\",\")}`,\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      return {\n        user: {\n          email: profile.data.user.email || profile.data.user.username,\n          id: profile.data.user.open_id,\n          name: profile.data.user.display_name || profile.data.user.username,\n          image: profile.data.user.avatar_large_url,\n          /** @note Tiktok does not provide emailVerified or even email*/\n          emailVerified: profile.data.user.email ? true : false\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst reddit = (options) => {\n  return {\n    id: \"reddit\",\n    name: \"Reddit\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"identity\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"reddit\",\n        options,\n        authorizationEndpoint: \"https://www.reddit.com/api/v1/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI,\n        duration: options.duration\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const body = new URLSearchParams({\n        grant_type: \"authorization_code\",\n        code,\n        redirect_uri: options.redirectURI || redirectURI\n      });\n      const headers = {\n        \"content-type\": \"application/x-www-form-urlencoded\",\n        accept: \"text/plain\",\n        \"user-agent\": \"better-auth\",\n        Authorization: `Basic ${base64.encode(\n          `${options.clientId}:${options.clientSecret}`\n        )}`\n      };\n      const { data, error } = await betterFetch(\n        \"https://www.reddit.com/api/v1/access_token\",\n        {\n          method: \"POST\",\n          headers,\n          body: body.toString()\n        }\n      );\n      if (error) {\n        throw error;\n      }\n      return getOAuth2Tokens(data);\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        authentication: \"basic\",\n        tokenEndpoint: \"https://www.reddit.com/api/v1/access_token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://oauth.reddit.com/api/v1/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`,\n            \"User-Agent\": \"better-auth\"\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.name,\n          email: profile.oauth_client_id,\n          emailVerified: profile.has_verified_email,\n          image: profile.icon_img?.split(\"?\")[0],\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst roblox = (options) => {\n  return {\n    id: \"roblox\",\n    name: \"Roblox\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return new URL(\n        `https://apis.roblox.com/oauth/v1/authorize?scope=${_scopes.join(\n          \"+\"\n        )}&response_type=code&client_id=${options.clientId}&redirect_uri=${encodeURIComponent(\n          options.redirectURI || redirectURI\n        )}&state=${state}&prompt=${options.prompt || \"select_account consent\"}`\n      );\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\",\n        authentication: \"post\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://apis.roblox.com/oauth/v1/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://apis.roblox.com/oauth/v1/userinfo\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.sub,\n          name: profile.nickname || profile.preferred_username || \"\",\n          image: profile.picture,\n          email: profile.preferred_username || null,\n          // Roblox does not provide email\n          emailVerified: true,\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    },\n    options\n  };\n};\n\nconst salesforce = (options) => {\n  const environment = options.environment ?? \"production\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/authorize` : isSandbox ? \"https://test.salesforce.com/services/oauth2/authorize\" : \"https://login.salesforce.com/services/oauth2/authorize\";\n  const tokenEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/token` : isSandbox ? \"https://test.salesforce.com/services/oauth2/token\" : \"https://login.salesforce.com/services/oauth2/token\";\n  const userInfoEndpoint = options.loginUrl ? `https://${options.loginUrl}/services/oauth2/userinfo` : isSandbox ? \"https://test.salesforce.com/services/oauth2/userinfo\" : \"https://login.salesforce.com/services/oauth2/userinfo\";\n  return {\n    id: \"salesforce\",\n    name: \"Salesforce\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret are required for Salesforce. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      if (!codeVerifier) {\n        throw new BetterAuthError(\"codeVerifier is required for Salesforce\");\n      }\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"email\", \"profile\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"salesforce\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      try {\n        const { data: user } = await betterFetch(\n          userInfoEndpoint,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`\n            }\n          }\n        );\n        if (!user) {\n          logger.error(\"Failed to fetch user info from Salesforce\");\n          return null;\n        }\n        const userMap = await options.mapProfileToUser?.(user);\n        return {\n          user: {\n            id: user.user_id,\n            name: user.name,\n            email: user.email,\n            image: user.photos?.picture || user.photos?.thumbnail,\n            emailVerified: user.email_verified ?? false,\n            ...userMap\n          },\n          data: user\n        };\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from Salesforce:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst vk = (options) => {\n  return {\n    id: \"vk\",\n    name: \"VK\",\n    async createAuthorizationURL({ state, scopes, codeVerifier, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"email\", \"phone\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      const authorizationEndpoint = \"https://id.vk.com/authorize\";\n      return createAuthorizationURL({\n        id: \"vk\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        redirectURI,\n        codeVerifier\n      });\n    },\n    validateAuthorizationCode: async ({\n      code,\n      codeVerifier,\n      redirectURI,\n      deviceId\n    }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI: options.redirectURI || redirectURI,\n        options,\n        deviceId,\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://id.vk.com/oauth2/auth\"\n      });\n    },\n    async getUserInfo(data) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(data);\n      }\n      if (!data.accessToken) {\n        return null;\n      }\n      const formBody = new URLSearchParams({\n        access_token: data.accessToken,\n        client_id: options.clientId\n      }).toString();\n      const { data: profile, error } = await betterFetch(\n        \"https://id.vk.com/oauth2/user_info\",\n        {\n          method: \"POST\",\n          headers: {\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: formBody\n        }\n      );\n      if (error) {\n        return null;\n      }\n      if (!profile.user.email) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.user.user_id,\n          first_name: profile.user.first_name,\n          last_name: profile.user.last_name,\n          email: profile.user.email,\n          image: profile.user.avatar,\n          /** @note VK does not provide emailVerified*/\n          emailVerified: !!profile.user.email,\n          birthday: profile.user.birthday,\n          sex: profile.user.sex,\n          name: `${profile.user.first_name} ${profile.user.last_name}`,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst zoom = (userOptions) => {\n  const options = {\n    pkce: true,\n    ...userOptions\n  };\n  return {\n    id: \"zoom\",\n    name: \"Zoom\",\n    createAuthorizationURL: async ({ state, redirectURI, codeVerifier }) => {\n      const params = new URLSearchParams({\n        response_type: \"code\",\n        redirect_uri: options.redirectURI ? options.redirectURI : redirectURI,\n        client_id: options.clientId,\n        state\n      });\n      if (options.pkce) {\n        const codeChallenge = await generateCodeChallenge(codeVerifier);\n        params.set(\"code_challenge_method\", \"S256\");\n        params.set(\"code_challenge\", codeChallenge);\n      }\n      const url = new URL(\"https://zoom.us/oauth/authorize\");\n      url.search = params.toString();\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI, codeVerifier }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI: options.redirectURI || redirectURI,\n        codeVerifier,\n        options,\n        tokenEndpoint: \"https://zoom.us/oauth/token\",\n        authentication: \"post\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://api.zoom.us/v2/users/me\",\n        {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      return {\n        user: {\n          id: profile.id,\n          name: profile.display_name,\n          image: profile.pic_url,\n          email: profile.email,\n          emailVerified: Boolean(profile.verified),\n          ...userMap\n        },\n        data: {\n          ...profile\n        }\n      };\n    }\n  };\n};\n\nconst kakao = (options) => {\n  return {\n    id: \"kakao\",\n    name: \"Kakao\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"account_email\", \"profile_image\", \"profile_nickname\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"kakao\",\n        options,\n        authorizationEndpoint: \"https://kauth.kakao.com/oauth/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://kauth.kakao.com/oauth/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://kapi.kakao.com/v2/user/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile) {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const account = profile.kakao_account || {};\n      const kakaoProfile = account.profile || {};\n      const user = {\n        id: String(profile.id),\n        name: kakaoProfile.nickname || account.name || void 0,\n        email: account.email,\n        image: kakaoProfile.profile_image_url || kakaoProfile.thumbnail_image_url,\n        emailVerified: !!account.is_email_valid && !!account.is_email_verified,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst naver = (options) => {\n  return {\n    id: \"naver\",\n    name: \"Naver\",\n    createAuthorizationURL({ state, scopes, redirectURI }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return createAuthorizationURL({\n        id: \"naver\",\n        options,\n        authorizationEndpoint: \"https://nid.naver.com/oauth2.0/authorize\",\n        scopes: _scopes,\n        state,\n        redirectURI\n      });\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        redirectURI,\n        options,\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientKey: options.clientKey,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint: \"https://nid.naver.com/oauth2.0/token\"\n      });\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      const { data: profile, error } = await betterFetch(\n        \"https://openapi.naver.com/v1/nid/me\",\n        {\n          headers: {\n            Authorization: `Bearer ${token.accessToken}`\n          }\n        }\n      );\n      if (error || !profile || profile.resultcode !== \"00\") {\n        return null;\n      }\n      const userMap = await options.mapProfileToUser?.(profile);\n      const res = profile.response || {};\n      const user = {\n        id: res.id,\n        name: res.name || res.nickname,\n        email: res.email,\n        image: res.profile_image,\n        emailVerified: false,\n        ...userMap\n      };\n      return {\n        user,\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst line = (options) => {\n  const authorizationEndpoint = \"https://access.line.me/oauth2/v2.1/authorize\";\n  const tokenEndpoint = \"https://api.line.me/oauth2/v2.1/token\";\n  const userInfoEndpoint = \"https://api.line.me/oauth2/v2.1/userinfo\";\n  const verifyIdTokenEndpoint = \"https://api.line.me/oauth2/v2.1/verify\";\n  return {\n    id: \"line\",\n    name: \"LINE\",\n    async createAuthorizationURL({\n      state,\n      scopes,\n      codeVerifier,\n      redirectURI,\n      loginHint\n    }) {\n      const _scopes = options.disableDefaultScope ? [] : [\"openid\", \"profile\", \"email\"];\n      options.scope && _scopes.push(...options.scope);\n      scopes && _scopes.push(...scopes);\n      return await createAuthorizationURL({\n        id: \"line\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        loginHint\n      });\n    },\n    validateAuthorizationCode: async ({ code, codeVerifier, redirectURI }) => {\n      return validateAuthorizationCode({\n        code,\n        codeVerifier,\n        redirectURI,\n        options,\n        tokenEndpoint\n      });\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      return refreshAccessToken({\n        refreshToken,\n        options: {\n          clientId: options.clientId,\n          clientSecret: options.clientSecret\n        },\n        tokenEndpoint\n      });\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      const body = new URLSearchParams();\n      body.set(\"id_token\", token);\n      body.set(\"client_id\", options.clientId);\n      if (nonce) body.set(\"nonce\", nonce);\n      const { data, error } = await betterFetch(\n        verifyIdTokenEndpoint,\n        {\n          method: \"POST\",\n          headers: {\n            \"content-type\": \"application/x-www-form-urlencoded\"\n          },\n          body\n        }\n      );\n      if (error || !data) {\n        return false;\n      }\n      if (data.aud !== options.clientId) return false;\n      if (nonce && data.nonce && data.nonce !== nonce) return false;\n      return true;\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      let profile = null;\n      if (token.idToken) {\n        try {\n          profile = decodeJwt(token.idToken);\n        } catch {\n        }\n      }\n      if (!profile) {\n        const { data } = await betterFetch(userInfoEndpoint, {\n          headers: {\n            authorization: `Bearer ${token.accessToken}`\n          }\n        });\n        profile = data || null;\n      }\n      if (!profile) return null;\n      const userMap = await options.mapProfileToUser?.(profile);\n      const id = profile.sub || profile.userId;\n      const name = profile.name || profile.displayName;\n      const image = profile.picture || profile.pictureUrl || void 0;\n      const email = profile.email;\n      return {\n        user: {\n          id,\n          name,\n          email,\n          image,\n          // LINE does not expose email verification status in ID token/userinfo\n          emailVerified: false,\n          ...userMap\n        },\n        data: profile\n      };\n    },\n    options\n  };\n};\n\nconst paypal = (options) => {\n  const environment = options.environment || \"sandbox\";\n  const isSandbox = environment === \"sandbox\";\n  const authorizationEndpoint = isSandbox ? \"https://www.sandbox.paypal.com/signin/authorize\" : \"https://www.paypal.com/signin/authorize\";\n  const tokenEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/oauth2/token\" : \"https://api-m.paypal.com/v1/oauth2/token\";\n  const userInfoEndpoint = isSandbox ? \"https://api-m.sandbox.paypal.com/v1/identity/oauth2/userinfo\" : \"https://api-m.paypal.com/v1/identity/oauth2/userinfo\";\n  return {\n    id: \"paypal\",\n    name: \"PayPal\",\n    async createAuthorizationURL({ state, codeVerifier, redirectURI }) {\n      if (!options.clientId || !options.clientSecret) {\n        logger.error(\n          \"Client Id and Client Secret is required for PayPal. Make sure to provide them in the options.\"\n        );\n        throw new BetterAuthError(\"CLIENT_ID_AND_SECRET_REQUIRED\");\n      }\n      const _scopes = [];\n      const url = await createAuthorizationURL({\n        id: \"paypal\",\n        options,\n        authorizationEndpoint,\n        scopes: _scopes,\n        state,\n        codeVerifier,\n        redirectURI,\n        prompt: options.prompt\n      });\n      return url;\n    },\n    validateAuthorizationCode: async ({ code, redirectURI }) => {\n      const credentials = Buffer.from(\n        `${options.clientId}:${options.clientSecret}`\n      ).toString(\"base64\");\n      try {\n        const response = await betterFetch(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"authorization_code\",\n            code,\n            redirect_uri: redirectURI\n          }).toString()\n        });\n        if (!response.data) {\n          throw new BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        const result = {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0,\n          idToken: data.id_token\n        };\n        return result;\n      } catch (error) {\n        logger.error(\"PayPal token exchange failed:\", error);\n        throw new BetterAuthError(\"FAILED_TO_GET_ACCESS_TOKEN\");\n      }\n    },\n    refreshAccessToken: options.refreshAccessToken ? options.refreshAccessToken : async (refreshToken) => {\n      const credentials = Buffer.from(\n        `${options.clientId}:${options.clientSecret}`\n      ).toString(\"base64\");\n      try {\n        const response = await betterFetch(tokenEndpoint, {\n          method: \"POST\",\n          headers: {\n            Authorization: `Basic ${credentials}`,\n            Accept: \"application/json\",\n            \"Accept-Language\": \"en_US\",\n            \"Content-Type\": \"application/x-www-form-urlencoded\"\n          },\n          body: new URLSearchParams({\n            grant_type: \"refresh_token\",\n            refresh_token: refreshToken\n          }).toString()\n        });\n        if (!response.data) {\n          throw new BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n        }\n        const data = response.data;\n        return {\n          accessToken: data.access_token,\n          refreshToken: data.refresh_token,\n          accessTokenExpiresAt: data.expires_in ? new Date(Date.now() + data.expires_in * 1e3) : void 0\n        };\n      } catch (error) {\n        logger.error(\"PayPal token refresh failed:\", error);\n        throw new BetterAuthError(\"FAILED_TO_REFRESH_ACCESS_TOKEN\");\n      }\n    },\n    async verifyIdToken(token, nonce) {\n      if (options.disableIdTokenSignIn) {\n        return false;\n      }\n      if (options.verifyIdToken) {\n        return options.verifyIdToken(token, nonce);\n      }\n      try {\n        const payload = decodeJwt(token);\n        return !!payload.sub;\n      } catch (error) {\n        logger.error(\"Failed to verify PayPal ID token:\", error);\n        return false;\n      }\n    },\n    async getUserInfo(token) {\n      if (options.getUserInfo) {\n        return options.getUserInfo(token);\n      }\n      if (!token.accessToken) {\n        logger.error(\"Access token is required to fetch PayPal user info\");\n        return null;\n      }\n      try {\n        const response = await betterFetch(\n          `${userInfoEndpoint}?schema=paypalv1.1`,\n          {\n            headers: {\n              Authorization: `Bearer ${token.accessToken}`,\n              Accept: \"application/json\"\n            }\n          }\n        );\n        if (!response.data) {\n          logger.error(\"Failed to fetch user info from PayPal\");\n          return null;\n        }\n        const userInfo = response.data;\n        const userMap = await options.mapProfileToUser?.(userInfo);\n        const result = {\n          user: {\n            id: userInfo.user_id,\n            name: userInfo.name,\n            email: userInfo.email,\n            image: userInfo.picture,\n            emailVerified: userInfo.email_verified,\n            ...userMap\n          },\n          data: userInfo\n        };\n        return result;\n      } catch (error) {\n        logger.error(\"Failed to fetch user info from PayPal:\", error);\n        return null;\n      }\n    },\n    options\n  };\n};\n\nconst socialProviders = {\n  apple,\n  atlassian,\n  cognito,\n  discord,\n  facebook,\n  figma,\n  github,\n  microsoft,\n  google,\n  huggingface,\n  slack,\n  spotify,\n  twitch,\n  twitter,\n  dropbox,\n  kick,\n  linear,\n  linkedin,\n  gitlab,\n  tiktok,\n  reddit,\n  roblox,\n  salesforce,\n  vk,\n  zoom,\n  notion,\n  kakao,\n  naver,\n  line,\n  paypal\n};\nconst socialProviderList = Object.keys(socialProviders);\nconst SocialProviderListEnum = z.enum(socialProviderList).or(z.string());\n\nconst signInSocial = createAuthEndpoint(\n  \"/sign-in/social\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * Callback URL to redirect to after the user\n       * has signed in.\n       */\n      callbackURL: z.string().meta({\n        description: \"Callback URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * callback url to redirect if the user is newly registered.\n       *\n       * useful if you have different routes for existing users and new users\n       */\n      newUserCallbackURL: z.string().optional(),\n      /**\n       * Callback url to redirect to if an error happens\n       *\n       * If it's initiated from the client sdk this defaults to\n       * the current url.\n       */\n      errorCallbackURL: z.string().meta({\n        description: \"Callback URL to redirect to if an error happens\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use`\n       */\n      provider: SocialProviderListEnum,\n      /**\n       * Disable automatic redirection to the provider\n       *\n       * This is useful if you want to handle the redirection\n       * yourself like in a popup or a different tab.\n       */\n      disableRedirect: z.boolean().meta({\n        description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\"\n      }).optional(),\n      /**\n       * ID token from the provider\n       *\n       * This is used to sign in the user\n       * if the user is already signed in with the\n       * provider in the frontend.\n       *\n       * Only applicable if the provider supports\n       * it. Currently only `apple` and `google` is\n       * supported out of the box.\n       */\n      idToken: z.optional(\n        z.object({\n          /**\n           * ID token from the provider\n           */\n          token: z.string().meta({\n            description: \"ID token from the provider\"\n          }),\n          /**\n           * The nonce used to generate the token\n           */\n          nonce: z.string().meta({\n            description: \"Nonce used to generate the token\"\n          }).optional(),\n          /**\n           * Access token from the provider\n           */\n          accessToken: z.string().meta({\n            description: \"Access token from the provider\"\n          }).optional(),\n          /**\n           * Refresh token from the provider\n           */\n          refreshToken: z.string().meta({\n            description: \"Refresh token from the provider\"\n          }).optional(),\n          /**\n           * Expiry date of the token\n           */\n          expiresAt: z.number().meta({\n            description: \"Expiry date of the token\"\n          }).optional()\n        })\n      ),\n      scopes: z.array(z.string()).meta({\n        description: \"Array of scopes to request from the provider. This will override the default scopes passed.\"\n      }).optional(),\n      /**\n       * Explicitly request sign-up\n       *\n       * Should be used to allow sign up when\n       * disableImplicitSignUp for this provider is\n       * true\n       */\n      requestSignUp: z.boolean().meta({\n        description: \"Explicitly request sign-up. Useful when disableImplicitSignUp is true for this provider\"\n      }).optional(),\n      /**\n       * The login hint to use for the authorization code request\n       */\n      loginHint: z.string().meta({\n        description: \"The login hint to use for the authorization code request\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with a social provider\",\n        operationId: \"socialSignIn\",\n        responses: {\n          \"200\": {\n            description: \"Success - Returns either session details or redirect URL\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  // todo: we need support for multiple schema\n                  type: \"object\",\n                  description: \"Session response when idToken is provided\",\n                  properties: {\n                    redirect: {\n                      type: \"boolean\",\n                      enum: [false]\n                    },\n                    token: {\n                      type: \"string\",\n                      description: \"Session token\",\n                      url: {\n                        type: \"null\",\n                        nullable: true\n                      },\n                      user: {\n                        type: \"object\",\n                        properties: {\n                          id: { type: \"string\" },\n                          email: { type: \"string\" },\n                          name: {\n                            type: \"string\",\n                            nullable: true\n                          },\n                          image: {\n                            type: \"string\",\n                            nullable: true\n                          },\n                          emailVerified: {\n                            type: \"boolean\"\n                          },\n                          createdAt: {\n                            type: \"string\",\n                            format: \"date-time\"\n                          },\n                          updatedAt: {\n                            type: \"string\",\n                            format: \"date-time\"\n                          }\n                        },\n                        required: [\n                          \"id\",\n                          \"email\",\n                          \"emailVerified\",\n                          \"createdAt\",\n                          \"updatedAt\"\n                        ]\n                      }\n                    }\n                  },\n                  required: [\"redirect\", \"token\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND\n      });\n    }\n    if (c.body.idToken) {\n      if (!provider.verifyIdToken) {\n        c.context.logger.error(\n          \"Provider does not support id token verification\",\n          {\n            provider: c.body.provider\n          }\n        );\n        throw new APIError(\"NOT_FOUND\", {\n          message: BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED\n        });\n      }\n      const { token, nonce } = c.body.idToken;\n      const valid = await provider.verifyIdToken(token, nonce);\n      if (!valid) {\n        c.context.logger.error(\"Invalid id token\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.INVALID_TOKEN\n        });\n      }\n      const userInfo = await provider.getUserInfo({\n        idToken: token,\n        accessToken: c.body.idToken.accessToken,\n        refreshToken: c.body.idToken.refreshToken\n      });\n      if (!userInfo || !userInfo?.user) {\n        c.context.logger.error(\"Failed to get user info\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO\n        });\n      }\n      if (!userInfo.user.email) {\n        c.context.logger.error(\"User email not found\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND\n        });\n      }\n      const data = await handleOAuthUserInfo(c, {\n        userInfo: {\n          ...userInfo.user,\n          email: userInfo.user.email,\n          id: String(userInfo.user.id),\n          name: userInfo.user.name || \"\",\n          image: userInfo.user.image,\n          emailVerified: userInfo.user.emailVerified || false\n        },\n        account: {\n          providerId: provider.id,\n          accountId: String(userInfo.user.id),\n          accessToken: c.body.idToken.accessToken\n        },\n        callbackURL: c.body.callbackURL,\n        disableSignUp: provider.disableImplicitSignUp && !c.body.requestSignUp || provider.disableSignUp\n      });\n      if (data.error) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: data.error\n        });\n      }\n      await setSessionCookie(c, data.data);\n      return c.json({\n        redirect: false,\n        token: data.data.session.token,\n        url: void 0,\n        user: {\n          id: data.data.user.id,\n          email: data.data.user.email,\n          name: data.data.user.name,\n          image: data.data.user.image,\n          emailVerified: data.data.user.emailVerified,\n          createdAt: data.data.user.createdAt,\n          updatedAt: data.data.user.updatedAt\n        }\n      });\n    }\n    const { codeVerifier, state } = await generateState(c);\n    const url = await provider.createAuthorizationURL({\n      state,\n      codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n      scopes: c.body.scopes,\n      loginHint: c.body.loginHint\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: !c.body.disableRedirect\n    });\n  }\n);\nconst signInEmail = createAuthEndpoint(\n  \"/sign-in/email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * Email of the user\n       */\n      email: z.string().meta({\n        description: \"Email of the user\"\n      }),\n      /**\n       * Password of the user\n       */\n      password: z.string().meta({\n        description: \"Password of the user\"\n      }),\n      /**\n       * Callback URL to use as a redirect for email\n       * verification and for possible redirects\n       */\n      callbackURL: z.string().meta({\n        description: \"Callback URL to use as a redirect for email verification\"\n      }).optional(),\n      /**\n       * If this is false, the session will not be remembered\n       * @default true\n       */\n      rememberMe: z.boolean().meta({\n        description: \"If this is false, the session will not be remembered. Default is `true`.\"\n      }).default(true).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Sign in with email and password\",\n        responses: {\n          \"200\": {\n            description: \"Success - Returns either session details or redirect URL\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  // todo: we need support for multiple schema\n                  type: \"object\",\n                  description: \"Session response when idToken is provided\",\n                  properties: {\n                    redirect: {\n                      type: \"boolean\",\n                      enum: [false]\n                    },\n                    token: {\n                      type: \"string\",\n                      description: \"Session token\"\n                    },\n                    url: {\n                      type: \"null\",\n                      nullable: true\n                    },\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: { type: \"string\" },\n                        email: { type: \"string\" },\n                        name: {\n                          type: \"string\",\n                          nullable: true\n                        },\n                        image: {\n                          type: \"string\",\n                          nullable: true\n                        },\n                        emailVerified: {\n                          type: \"boolean\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          format: \"date-time\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          format: \"date-time\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    }\n                  },\n                  required: [\"redirect\", \"token\", \"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options?.emailAndPassword?.enabled) {\n      ctx.context.logger.error(\n        \"Email and password is not enabled. Make sure to enable it in the options on you `auth.ts` file. Check `https://better-auth.com/docs/authentication/email-password` for more!\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Email and password is not enabled\"\n      });\n    }\n    const { email, password } = ctx.body;\n    const isValidEmail = z.string().email().safeParse(email);\n    if (!isValidEmail.success) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL\n      });\n    }\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      await ctx.context.password.hash(password);\n      ctx.context.logger.error(\"User not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const credentialAccount = user.accounts.find(\n      (a) => a.providerId === \"credential\"\n    );\n    if (!credentialAccount) {\n      ctx.context.logger.error(\"Credential account not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const currentPassword = credentialAccount?.password;\n    if (!currentPassword) {\n      ctx.context.logger.error(\"Password not found\", { email });\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    const validPassword = await ctx.context.password.verify({\n      hash: currentPassword,\n      password\n    });\n    if (!validPassword) {\n      ctx.context.logger.error(\"Invalid password\");\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.INVALID_EMAIL_OR_PASSWORD\n      });\n    }\n    if (ctx.context.options?.emailAndPassword?.requireEmailVerification && !user.user.emailVerified) {\n      if (!ctx.context.options?.emailVerification?.sendVerificationEmail) {\n        throw new APIError(\"FORBIDDEN\", {\n          message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED\n        });\n      }\n      if (ctx.context.options?.emailVerification?.sendOnSignIn) {\n        const token = await createEmailVerificationToken(\n          ctx.context.secret,\n          user.user.email,\n          void 0,\n          ctx.context.options.emailVerification?.expiresIn\n        );\n        const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n        await ctx.context.options.emailVerification.sendVerificationEmail(\n          {\n            user: user.user,\n            url,\n            token\n          },\n          ctx.request\n        );\n      }\n      throw new APIError(\"FORBIDDEN\", {\n        message: BASE_ERROR_CODES.EMAIL_NOT_VERIFIED\n      });\n    }\n    const session = await ctx.context.internalAdapter.createSession(\n      user.user.id,\n      ctx,\n      ctx.body.rememberMe === false\n    );\n    if (!session) {\n      ctx.context.logger.error(\"Failed to create session\");\n      throw new APIError(\"UNAUTHORIZED\", {\n        message: BASE_ERROR_CODES.FAILED_TO_CREATE_SESSION\n      });\n    }\n    await setSessionCookie(\n      ctx,\n      {\n        session,\n        user: user.user\n      },\n      ctx.body.rememberMe === false\n    );\n    return ctx.json({\n      redirect: !!ctx.body.callbackURL,\n      token: session.token,\n      url: ctx.body.callbackURL,\n      user: {\n        id: user.user.id,\n        email: user.user.email,\n        name: user.user.name,\n        image: user.user.image,\n        emailVerified: user.user.emailVerified,\n        createdAt: user.user.createdAt,\n        updatedAt: user.user.updatedAt\n      }\n    });\n  }\n);\n\nconst schema = z.object({\n  code: z.string().optional(),\n  error: z.string().optional(),\n  device_id: z.string().optional(),\n  error_description: z.string().optional(),\n  state: z.string().optional(),\n  user: z.string().optional()\n});\nconst callbackOAuth = createAuthEndpoint(\n  \"/callback/:id\",\n  {\n    method: [\"GET\", \"POST\"],\n    body: schema.optional(),\n    query: schema.optional(),\n    metadata: HIDE_METADATA\n  },\n  async (c) => {\n    let queryOrBody;\n    const defaultErrorURL = c.context.options.onAPIError?.errorURL || `${c.context.baseURL}/error`;\n    try {\n      if (c.method === \"GET\") {\n        queryOrBody = schema.parse(c.query);\n      } else if (c.method === \"POST\") {\n        queryOrBody = schema.parse(c.body);\n      } else {\n        throw new Error(\"Unsupported method\");\n      }\n    } catch (e) {\n      c.context.logger.error(\"INVALID_CALLBACK_REQUEST\", e);\n      throw c.redirect(`${defaultErrorURL}?error=invalid_callback_request`);\n    }\n    const { code, error, state, error_description, device_id } = queryOrBody;\n    if (error) {\n      throw c.redirect(\n        `${defaultErrorURL}?error=${error}&error_description=${error_description}`\n      );\n    }\n    if (!state) {\n      c.context.logger.error(\"State not found\", error);\n      throw c.redirect(`${defaultErrorURL}?error=state_not_found`);\n    }\n    const {\n      codeVerifier,\n      callbackURL,\n      link,\n      errorURL,\n      newUserURL,\n      requestSignUp\n    } = await parseState(c);\n    function redirectOnError(error2) {\n      let url = errorURL || defaultErrorURL;\n      if (url.includes(\"?\")) {\n        url = `${url}&error=${error2}`;\n      } else {\n        url = `${url}?error=${error2}`;\n      }\n      throw c.redirect(url);\n    }\n    if (!code) {\n      c.context.logger.error(\"Code not found\");\n      throw redirectOnError(\"no_code\");\n    }\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.params.id\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Oauth provider with id\",\n        c.params.id,\n        \"not found\"\n      );\n      throw redirectOnError(\"oauth_provider_not_found\");\n    }\n    let tokens;\n    try {\n      tokens = await provider.validateAuthorizationCode({\n        code,\n        codeVerifier,\n        deviceId: device_id,\n        redirectURI: `${c.context.baseURL}/callback/${provider.id}`\n      });\n    } catch (e) {\n      c.context.logger.error(\"\", e);\n      throw redirectOnError(\"invalid_code\");\n    }\n    const userInfo = await provider.getUserInfo({\n      ...tokens,\n      user: c.body?.user ? safeJSONParse(c.body.user) : void 0\n    }).then((res) => res?.user);\n    if (!userInfo) {\n      c.context.logger.error(\"Unable to get user info\");\n      return redirectOnError(\"unable_to_get_user_info\");\n    }\n    if (!callbackURL) {\n      c.context.logger.error(\"No callback URL found\");\n      throw redirectOnError(\"no_callback_url\");\n    }\n    if (link) {\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(\n        provider.id\n      );\n      if (!isTrustedProvider && !userInfo.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        c.context.logger.error(\"Unable to link account - untrusted provider\");\n        return redirectOnError(\"unable_to_link_account\");\n      }\n      const existingAccount = await c.context.internalAdapter.findAccount(\n        String(userInfo.id)\n      );\n      if (existingAccount) {\n        if (existingAccount.userId.toString() !== link.userId.toString()) {\n          return redirectOnError(\"account_already_linked_to_different_user\");\n        }\n        const updateData = Object.fromEntries(\n          Object.entries({\n            accessToken: await setTokenUtil(tokens.accessToken, c.context),\n            refreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n            idToken: tokens.idToken,\n            accessTokenExpiresAt: tokens.accessTokenExpiresAt,\n            refreshTokenExpiresAt: tokens.refreshTokenExpiresAt,\n            scope: tokens.scopes?.join(\",\")\n          }).filter(([_, value]) => value !== void 0)\n        );\n        await c.context.internalAdapter.updateAccount(\n          existingAccount.id,\n          updateData\n        );\n      } else {\n        const newAccount = await c.context.internalAdapter.createAccount(\n          {\n            userId: link.userId,\n            providerId: provider.id,\n            accountId: String(userInfo.id),\n            ...tokens,\n            accessToken: await setTokenUtil(tokens.accessToken, c.context),\n            refreshToken: await setTokenUtil(tokens.refreshToken, c.context),\n            scope: tokens.scopes?.join(\",\")\n          },\n          c\n        );\n        if (!newAccount) {\n          return redirectOnError(\"unable_to_link_account\");\n        }\n      }\n      let toRedirectTo2;\n      try {\n        const url = callbackURL;\n        toRedirectTo2 = url.toString();\n      } catch {\n        toRedirectTo2 = callbackURL;\n      }\n      throw c.redirect(toRedirectTo2);\n    }\n    if (!userInfo.email) {\n      c.context.logger.error(\n        \"Provider did not return email. This could be due to misconfiguration in the provider settings.\"\n      );\n      return redirectOnError(\"email_not_found\");\n    }\n    const result = await handleOAuthUserInfo(c, {\n      userInfo: {\n        ...userInfo,\n        id: String(userInfo.id),\n        email: userInfo.email,\n        name: userInfo.name || userInfo.email\n      },\n      account: {\n        providerId: provider.id,\n        accountId: String(userInfo.id),\n        ...tokens,\n        scope: tokens.scopes?.join(\",\")\n      },\n      callbackURL,\n      disableSignUp: provider.disableImplicitSignUp && !requestSignUp || provider.options?.disableSignUp,\n      overrideUserInfo: provider.options?.overrideUserInfoOnSignIn\n    });\n    if (result.error) {\n      c.context.logger.error(result.error.split(\" \").join(\"_\"));\n      return redirectOnError(result.error.split(\" \").join(\"_\"));\n    }\n    const { session, user } = result.data;\n    await setSessionCookie(c, {\n      session,\n      user\n    });\n    let toRedirectTo;\n    try {\n      const url = result.isRegister ? newUserURL || callbackURL : callbackURL;\n      toRedirectTo = url.toString();\n    } catch {\n      toRedirectTo = result.isRegister ? newUserURL || callbackURL : callbackURL;\n    }\n    throw c.redirect(toRedirectTo);\n  }\n);\n\nconst signOut = createAuthEndpoint(\n  \"/sign-out\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    metadata: {\n      openapi: {\n        description: \"Sign out the current user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const sessionCookieToken = await ctx.getSignedCookie(\n      ctx.context.authCookies.sessionToken.name,\n      ctx.context.secret\n    );\n    if (!sessionCookieToken) {\n      deleteSessionCookie(ctx);\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n      });\n    }\n    await ctx.context.internalAdapter.deleteSession(sessionCookieToken);\n    deleteSessionCookie(ctx);\n    return ctx.json({\n      success: true\n    });\n  }\n);\n\nfunction redirectError(ctx, callbackURL, query) {\n  const url = callbackURL ? new URL(callbackURL, ctx.baseURL) : new URL(`${ctx.baseURL}/error`);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nfunction redirectCallback(ctx, callbackURL, query) {\n  const url = new URL(callbackURL, ctx.baseURL);\n  if (query)\n    Object.entries(query).forEach(([k, v]) => url.searchParams.set(k, v));\n  return url.href;\n}\nconst requestPasswordReset = createAuthEndpoint(\n  \"/request-password-reset\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The email address of the user to send a password reset email to.\n       */\n      email: z.email().meta({\n        description: \"The email address of the user to send a password reset email to\"\n      }),\n      /**\n       * The URL to redirect the user to reset their password.\n       * If the token isn't valid or expired, it'll be redirected with a query parameter `?\n       * error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?\n       * token=VALID_TOKEN\n       */\n      redirectTo: z.string().meta({\n        description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a password reset email to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    },\n                    message: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n      ctx.context.logger.error(\n        \"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Reset password isn't enabled\"\n      });\n    }\n    const { email, redirectTo } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      ctx.context.logger.error(\"Reset Password: User not found\", { email });\n      return ctx.json({\n        status: true,\n        message: \"If this email exists in our system, check your email for the reset link\"\n      });\n    }\n    const defaultExpiresIn = 60 * 60 * 1;\n    const expiresAt = getDate(\n      ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || defaultExpiresIn,\n      \"sec\"\n    );\n    const verificationToken = generateId(24);\n    await ctx.context.internalAdapter.createVerificationValue(\n      {\n        value: user.user.id,\n        identifier: `reset-password:${verificationToken}`,\n        expiresAt\n      },\n      ctx\n    );\n    const callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n    const url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n    await ctx.context.options.emailAndPassword.sendResetPassword(\n      {\n        user: user.user,\n        url,\n        token: verificationToken\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst forgetPassword = createAuthEndpoint(\n  \"/forget-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The email address of the user to send a password reset email to.\n       */\n      email: z.string().email().meta({\n        description: \"The email address of the user to send a password reset email to\"\n      }),\n      /**\n       * The URL to redirect the user to reset their password.\n       * If the token isn't valid or expired, it'll be redirected with a query parameter `?\n       * error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?\n       * token=VALID_TOKEN\n       */\n      redirectTo: z.string().meta({\n        description: \"The URL to redirect the user to reset their password. If the token isn't valid or expired, it'll be redirected with a query parameter `?error=INVALID_TOKEN`. If the token is valid, it'll be redirected with a query parameter `?token=VALID_TOKEN\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Send a password reset email to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    },\n                    message: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.emailAndPassword?.sendResetPassword) {\n      ctx.context.logger.error(\n        \"Reset password isn't enabled.Please pass an emailAndPassword.sendResetPassword function in your auth config!\"\n      );\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Reset password isn't enabled\"\n      });\n    }\n    const { email, redirectTo } = ctx.body;\n    const user = await ctx.context.internalAdapter.findUserByEmail(email, {\n      includeAccounts: true\n    });\n    if (!user) {\n      ctx.context.logger.error(\"Reset Password: User not found\", { email });\n      return ctx.json({\n        status: true,\n        message: \"If this email exists in our system, check your email for the reset link\"\n      });\n    }\n    const defaultExpiresIn = 60 * 60 * 1;\n    const expiresAt = getDate(\n      ctx.context.options.emailAndPassword.resetPasswordTokenExpiresIn || defaultExpiresIn,\n      \"sec\"\n    );\n    const verificationToken = generateId(24);\n    await ctx.context.internalAdapter.createVerificationValue(\n      {\n        value: user.user.id,\n        identifier: `reset-password:${verificationToken}`,\n        expiresAt\n      },\n      ctx\n    );\n    const callbackURL = redirectTo ? encodeURIComponent(redirectTo) : \"\";\n    const url = `${ctx.context.baseURL}/reset-password/${verificationToken}?callbackURL=${callbackURL}`;\n    await ctx.context.options.emailAndPassword.sendResetPassword(\n      {\n        user: user.user,\n        url,\n        token: verificationToken\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst requestPasswordResetCallback = createAuthEndpoint(\n  \"/reset-password/:token\",\n  {\n    method: \"GET\",\n    query: z.object({\n      callbackURL: z.string().meta({\n        description: \"The URL to redirect the user to reset their password\"\n      })\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Redirects the user to the callback URL with the token\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { token } = ctx.params;\n    const { callbackURL } = ctx.query;\n    if (!token || !callbackURL) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    const verification = await ctx.context.internalAdapter.findVerificationValue(\n      `reset-password:${token}`\n    );\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw ctx.redirect(\n        redirectError(ctx.context, callbackURL, { error: \"INVALID_TOKEN\" })\n      );\n    }\n    throw ctx.redirect(redirectCallback(ctx.context, callbackURL, { token }));\n  }\n);\nconst forgetPasswordCallback = requestPasswordResetCallback;\nconst resetPassword = createAuthEndpoint(\n  \"/reset-password\",\n  {\n    method: \"POST\",\n    query: z.object({\n      token: z.string().optional()\n    }).optional(),\n    body: z.object({\n      newPassword: z.string().meta({\n        description: \"The new password to set\"\n      }),\n      token: z.string().meta({\n        description: \"The token to reset the password\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Reset the password for a user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const token = ctx.body.token || ctx.query?.token;\n    if (!token) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    const { newPassword } = ctx.body;\n    const minLength = ctx.context.password?.config.minPasswordLength;\n    const maxLength = ctx.context.password?.config.maxPasswordLength;\n    if (newPassword.length < minLength) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    if (newPassword.length > maxLength) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const id = `reset-password:${token}`;\n    const verification = await ctx.context.internalAdapter.findVerificationValue(id);\n    if (!verification || verification.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    const userId = verification.value;\n    const hashedPassword = await ctx.context.password.hash(newPassword);\n    const accounts = await ctx.context.internalAdapter.findAccounts(userId);\n    const account = accounts.find((ac) => ac.providerId === \"credential\");\n    if (!account) {\n      await ctx.context.internalAdapter.createAccount(\n        {\n          userId,\n          providerId: \"credential\",\n          password: hashedPassword,\n          accountId: userId\n        },\n        ctx\n      );\n    } else {\n      await ctx.context.internalAdapter.updatePassword(\n        userId,\n        hashedPassword,\n        ctx\n      );\n    }\n    await ctx.context.internalAdapter.deleteVerificationValue(verification.id);\n    if (ctx.context.options.emailAndPassword?.onPasswordReset) {\n      const user = await ctx.context.internalAdapter.findUserById(userId);\n      if (user) {\n        await ctx.context.options.emailAndPassword.onPasswordReset(\n          {\n            user\n          },\n          ctx.request\n        );\n      }\n    }\n    if (ctx.context.options.emailAndPassword?.revokeSessionsOnPasswordReset) {\n      await ctx.context.internalAdapter.deleteSessions(userId);\n    }\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\nconst updateUser = () => createAuthEndpoint(\n  \"/update-user\",\n  {\n    method: \"POST\",\n    body: z.record(\n      z.string().meta({\n        description: \"Field name must be a string\"\n      }),\n      z.any()\n    ),\n    use: [sessionMiddleware],\n    metadata: {\n      $Infer: {\n        body: {}\n      },\n      openapi: {\n        description: \"Update the current user\",\n        requestBody: {\n          content: {\n            \"application/json\": {\n              schema: {\n                type: \"object\",\n                properties: {\n                  name: {\n                    type: \"string\",\n                    description: \"The name of the user\"\n                  },\n                  image: {\n                    type: \"string\",\n                    description: \"The image of the user\"\n                  }\n                }\n              }\n            }\n          }\n        },\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the update was successful\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const body = ctx.body;\n    if (body.email) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.EMAIL_CAN_NOT_BE_UPDATED\n      });\n    }\n    const { name, image, ...rest } = body;\n    const session = ctx.context.session;\n    if (image === void 0 && name === void 0 && Object.keys(rest).length === 0) {\n      return ctx.json({\n        status: true\n      });\n    }\n    const additionalFields = parseUserInput(\n      ctx.context.options,\n      rest,\n      \"update\"\n    );\n    const user = await ctx.context.internalAdapter.updateUser(\n      session.user.id,\n      {\n        name,\n        image,\n        ...additionalFields\n      },\n      ctx\n    );\n    await setSessionCookie(ctx, {\n      session: session.session,\n      user\n    });\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst changePassword = createAuthEndpoint(\n  \"/change-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The new password to set\n       */\n      newPassword: z.string().meta({\n        description: \"The new password to set\"\n      }),\n      /**\n       * The current password of the user\n       */\n      currentPassword: z.string().meta({\n        description: \"The current password is required\"\n      }),\n      /**\n       * revoke all sessions that are not the\n       * current one logged in by the user\n       */\n      revokeOtherSessions: z.boolean().meta({\n        description: \"Must be a boolean value\"\n      }).optional()\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Change the password of the user\",\n        responses: {\n          \"200\": {\n            description: \"Password successfully changed\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    token: {\n                      type: \"string\",\n                      nullable: true,\n                      // Only present if revokeOtherSessions is true\n                      description: \"New session token if other sessions were revoked\"\n                    },\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\",\n                          description: \"The unique identifier of the user\"\n                        },\n                        email: {\n                          type: \"string\",\n                          format: \"email\",\n                          description: \"The email address of the user\"\n                        },\n                        name: {\n                          type: \"string\",\n                          description: \"The name of the user\"\n                        },\n                        image: {\n                          type: \"string\",\n                          format: \"uri\",\n                          nullable: true,\n                          description: \"The profile image URL of the user\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\",\n                          description: \"Whether the email has been verified\"\n                        },\n                        createdAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was created\"\n                        },\n                        updatedAt: {\n                          type: \"string\",\n                          format: \"date-time\",\n                          description: \"When the user was last updated\"\n                        }\n                      },\n                      required: [\n                        \"id\",\n                        \"email\",\n                        \"name\",\n                        \"emailVerified\",\n                        \"createdAt\",\n                        \"updatedAt\"\n                      ]\n                    }\n                  },\n                  required: [\"user\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { newPassword, currentPassword, revokeOtherSessions } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    if (!account || !account.password) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND\n      });\n    }\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    const verify = await ctx.context.password.verify({\n      hash: account.password,\n      password: currentPassword\n    });\n    if (!verify) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.INVALID_PASSWORD\n      });\n    }\n    await ctx.context.internalAdapter.updateAccount(account.id, {\n      password: passwordHash\n    });\n    let token = null;\n    if (revokeOtherSessions) {\n      await ctx.context.internalAdapter.deleteSessions(session.user.id);\n      const newSession = await ctx.context.internalAdapter.createSession(\n        session.user.id,\n        ctx\n      );\n      if (!newSession) {\n        throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n          message: BASE_ERROR_CODES.FAILED_TO_GET_SESSION\n        });\n      }\n      await setSessionCookie(ctx, {\n        session: newSession,\n        user: session.user\n      });\n      token = newSession.token;\n    }\n    return ctx.json({\n      token,\n      user: {\n        id: session.user.id,\n        email: session.user.email,\n        name: session.user.name,\n        image: session.user.image,\n        emailVerified: session.user.emailVerified,\n        createdAt: session.user.createdAt,\n        updatedAt: session.user.updatedAt\n      }\n    });\n  }\n);\nconst setPassword = createAuthEndpoint(\n  \"/set-password\",\n  {\n    method: \"POST\",\n    body: z.object({\n      /**\n       * The new password to set\n       */\n      newPassword: z.string().meta({\n        description: \"The new password to set is required\"\n      })\n    }),\n    metadata: {\n      SERVER_ONLY: true\n    },\n    use: [sessionMiddleware]\n  },\n  async (ctx) => {\n    const { newPassword } = ctx.body;\n    const session = ctx.context.session;\n    const minPasswordLength = ctx.context.password.config.minPasswordLength;\n    if (newPassword.length < minPasswordLength) {\n      ctx.context.logger.error(\"Password is too short\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_SHORT\n      });\n    }\n    const maxPasswordLength = ctx.context.password.config.maxPasswordLength;\n    if (newPassword.length > maxPasswordLength) {\n      ctx.context.logger.error(\"Password is too long\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.PASSWORD_TOO_LONG\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    const account = accounts.find(\n      (account2) => account2.providerId === \"credential\" && account2.password\n    );\n    const passwordHash = await ctx.context.password.hash(newPassword);\n    if (!account) {\n      await ctx.context.internalAdapter.linkAccount(\n        {\n          userId: session.user.id,\n          providerId: \"credential\",\n          accountId: session.user.id,\n          password: passwordHash\n        },\n        ctx\n      );\n      return ctx.json({\n        status: true\n      });\n    }\n    throw new APIError(\"BAD_REQUEST\", {\n      message: \"user already has a password\"\n    });\n  }\n);\nconst deleteUser = createAuthEndpoint(\n  \"/delete-user\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    body: z.object({\n      /**\n       * The callback URL to redirect to after the user is deleted\n       * this is only used on delete user callback\n       */\n      callbackURL: z.string().meta({\n        description: \"The callback URL to redirect to after the user is deleted\"\n      }).optional(),\n      /**\n       * The password of the user. If the password isn't provided, session freshness\n       * will be checked.\n       */\n      password: z.string().meta({\n        description: \"The password of the user is required to delete the user\"\n      }).optional(),\n      /**\n       * The token to delete the user. If the token is provided, the user will be deleted\n       */\n      token: z.string().meta({\n        description: \"The token to delete the user is required\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Delete the user\",\n        responses: {\n          \"200\": {\n            description: \"User deletion processed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\",\n                      description: \"Indicates if the operation was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"User deleted\", \"Verification email sent\"],\n                      description: \"Status message of the deletion process\"\n                    }\n                  },\n                  required: [\"success\", \"message\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\",\n        {\n          session: ctx.context.session\n        }\n      );\n      throw new APIError(\"NOT_FOUND\");\n    }\n    const session = ctx.context.session;\n    if (ctx.body.password) {\n      const accounts = await ctx.context.internalAdapter.findAccounts(\n        session.user.id\n      );\n      const account = accounts.find(\n        (account2) => account2.providerId === \"credential\" && account2.password\n      );\n      if (!account || !account.password) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.CREDENTIAL_ACCOUNT_NOT_FOUND\n        });\n      }\n      const verify = await ctx.context.password.verify({\n        hash: account.password,\n        password: ctx.body.password\n      });\n      if (!verify) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.INVALID_PASSWORD\n        });\n      }\n    }\n    if (ctx.body.token) {\n      await deleteUserCallback({\n        ...ctx,\n        query: {\n          token: ctx.body.token\n        }\n      });\n      return ctx.json({\n        success: true,\n        message: \"User deleted\"\n      });\n    }\n    if (ctx.context.options.user.deleteUser?.sendDeleteAccountVerification) {\n      const token = generateRandomString(32, \"0-9\", \"a-z\");\n      await ctx.context.internalAdapter.createVerificationValue(\n        {\n          value: session.user.id,\n          identifier: `delete-account-${token}`,\n          expiresAt: new Date(\n            Date.now() + (ctx.context.options.user.deleteUser?.deleteTokenExpiresIn || 60 * 60 * 24) * 1e3\n          )\n        },\n        ctx\n      );\n      const url = `${ctx.context.baseURL}/delete-user/callback?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n      await ctx.context.options.user.deleteUser.sendDeleteAccountVerification(\n        {\n          user: session.user,\n          url,\n          token\n        },\n        ctx.request\n      );\n      return ctx.json({\n        success: true,\n        message: \"Verification email sent\"\n      });\n    }\n    if (!ctx.body.password && ctx.context.sessionConfig.freshAge !== 0) {\n      const currentAge = new Date(session.session.createdAt).getTime();\n      const freshAge = ctx.context.sessionConfig.freshAge * 1e3;\n      const now = Date.now();\n      if (now - currentAge > freshAge * 1e3) {\n        throw new APIError(\"BAD_REQUEST\", {\n          message: BASE_ERROR_CODES.SESSION_EXPIRED\n        });\n      }\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    deleteSessionCookie(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nconst deleteUserCallback = createAuthEndpoint(\n  \"/delete-user/callback\",\n  {\n    method: \"GET\",\n    query: z.object({\n      token: z.string().meta({\n        description: \"The token to verify the deletion request\"\n      }),\n      callbackURL: z.string().meta({\n        description: \"The URL to redirect to after deletion\"\n      }).optional()\n    }),\n    use: [originCheck((ctx) => ctx.query.callbackURL)],\n    metadata: {\n      openapi: {\n        description: \"Callback to complete user deletion with verification token\",\n        responses: {\n          \"200\": {\n            description: \"User successfully deleted\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    success: {\n                      type: \"boolean\",\n                      description: \"Indicates if the deletion was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"User deleted\"],\n                      description: \"Confirmation message\"\n                    }\n                  },\n                  required: [\"success\", \"message\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.deleteUser?.enabled) {\n      ctx.context.logger.error(\n        \"Delete user is disabled. Enable it in the options\"\n      );\n      throw new APIError(\"NOT_FOUND\");\n    }\n    const session = await getSessionFromCtx(ctx);\n    if (!session) {\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO\n      });\n    }\n    const token = await ctx.context.internalAdapter.findVerificationValue(\n      `delete-account-${ctx.query.token}`\n    );\n    if (!token || token.expiresAt < /* @__PURE__ */ new Date()) {\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    if (token.value !== session.user.id) {\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.INVALID_TOKEN\n      });\n    }\n    const beforeDelete = ctx.context.options.user.deleteUser?.beforeDelete;\n    if (beforeDelete) {\n      await beforeDelete(session.user, ctx.request);\n    }\n    await ctx.context.internalAdapter.deleteUser(session.user.id);\n    await ctx.context.internalAdapter.deleteSessions(session.user.id);\n    await ctx.context.internalAdapter.deleteAccounts(session.user.id);\n    await ctx.context.internalAdapter.deleteVerificationValue(token.id);\n    deleteSessionCookie(ctx);\n    const afterDelete = ctx.context.options.user.deleteUser?.afterDelete;\n    if (afterDelete) {\n      await afterDelete(session.user, ctx.request);\n    }\n    if (ctx.query.callbackURL) {\n      throw ctx.redirect(ctx.query.callbackURL || \"/\");\n    }\n    return ctx.json({\n      success: true,\n      message: \"User deleted\"\n    });\n  }\n);\nconst changeEmail = createAuthEndpoint(\n  \"/change-email\",\n  {\n    method: \"POST\",\n    body: z.object({\n      newEmail: z.email().meta({\n        description: \"The new email address to set must be a valid email address\"\n      }),\n      callbackURL: z.string().meta({\n        description: \"The URL to redirect to after email verification\"\n      }).optional()\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        responses: {\n          \"200\": {\n            description: \"Email change request processed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\",\n                      description: \"Indicates if the request was successful\"\n                    },\n                    message: {\n                      type: \"string\",\n                      enum: [\"Email updated\", \"Verification email sent\"],\n                      description: \"Status message of the email change process\",\n                      nullable: true\n                    }\n                  },\n                  required: [\"status\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    if (!ctx.context.options.user?.changeEmail?.enabled) {\n      ctx.context.logger.error(\"Change email is disabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Change email is disabled\"\n      });\n    }\n    const newEmail = ctx.body.newEmail.toLowerCase();\n    if (newEmail === ctx.context.session.user.email) {\n      ctx.context.logger.error(\"Email is the same\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Email is the same\"\n      });\n    }\n    const existingUser = await ctx.context.internalAdapter.findUserByEmail(newEmail);\n    if (existingUser) {\n      ctx.context.logger.error(\"Email already exists\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Couldn't update your email\"\n      });\n    }\n    if (ctx.context.session.user.emailVerified !== true) {\n      const existing = await ctx.context.internalAdapter.findUserByEmail(newEmail);\n      if (existing) {\n        throw new APIError(\"UNPROCESSABLE_ENTITY\", {\n          message: BASE_ERROR_CODES.USER_ALREADY_EXISTS\n        });\n      }\n      await ctx.context.internalAdapter.updateUserByEmail(\n        ctx.context.session.user.email,\n        {\n          email: newEmail\n        },\n        ctx\n      );\n      await setSessionCookie(ctx, {\n        session: ctx.context.session.session,\n        user: {\n          ...ctx.context.session.user,\n          email: newEmail\n        }\n      });\n      if (ctx.context.options.emailVerification?.sendVerificationEmail) {\n        const token2 = await createEmailVerificationToken(\n          ctx.context.secret,\n          newEmail,\n          void 0,\n          ctx.context.options.emailVerification?.expiresIn\n        );\n        const url2 = `${ctx.context.baseURL}/verify-email?token=${token2}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n        await ctx.context.options.emailVerification.sendVerificationEmail(\n          {\n            user: {\n              ...ctx.context.session.user,\n              email: newEmail\n            },\n            url: url2,\n            token: token2\n          },\n          ctx.request\n        );\n      }\n      return ctx.json({\n        status: true\n      });\n    }\n    if (!ctx.context.options.user.changeEmail.sendChangeEmailVerification) {\n      ctx.context.logger.error(\"Verification email isn't enabled.\");\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Verification email isn't enabled\"\n      });\n    }\n    const token = await createEmailVerificationToken(\n      ctx.context.secret,\n      ctx.context.session.user.email,\n      newEmail,\n      ctx.context.options.emailVerification?.expiresIn\n    );\n    const url = `${ctx.context.baseURL}/verify-email?token=${token}&callbackURL=${ctx.body.callbackURL || \"/\"}`;\n    await ctx.context.options.user.changeEmail.sendChangeEmailVerification(\n      {\n        user: ctx.context.session.user,\n        newEmail,\n        url,\n        token\n      },\n      ctx.request\n    );\n    return ctx.json({\n      status: true\n    });\n  }\n);\n\nfunction sanitize(input) {\n  return input.replace(/&/g, \"&amp;\").replace(/</g, \"&lt;\").replace(/>/g, \"&gt;\").replace(/\"/g, \"&quot;\").replace(/'/g, \"&#39;\");\n}\nconst html = (errorCode = \"Unknown\") => `<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>Authentication Error</title>\n    <style>\n        :root {\n            --bg-color: #f8f9fa;\n            --text-color: #212529;\n            --accent-color: #000000;\n            --error-color: #dc3545;\n            --border-color: #e9ecef;\n        }\n        body {\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\n            background-color: var(--bg-color);\n            color: var(--text-color);\n            display: flex;\n            justify-content: center;\n            align-items: center;\n            height: 100vh;\n            margin: 0;\n            line-height: 1.5;\n        }\n        .error-container {\n            background-color: #ffffff;\n            border-radius: 12px;\n            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);\n            padding: 2.5rem;\n            text-align: center;\n            max-width: 90%;\n            width: 400px;\n        }\n        h1 {\n            color: var(--error-color);\n            font-size: 1.75rem;\n            margin-bottom: 1rem;\n            font-weight: 600;\n        }\n        p {\n            margin-bottom: 1.5rem;\n            color: #495057;\n        }\n        .btn {\n            background-color: var(--accent-color);\n            color: #ffffff;\n            text-decoration: none;\n            padding: 0.75rem 1.5rem;\n            border-radius: 6px;\n            transition: all 0.3s ease;\n            display: inline-block;\n            font-weight: 500;\n            border: 2px solid var(--accent-color);\n        }\n        .btn:hover {\n            background-color: #131721;\n        }\n        .error-code {\n            font-size: 0.875rem;\n            color: #6c757d;\n            margin-top: 1.5rem;\n            padding-top: 1.5rem;\n            border-top: 1px solid var(--border-color);\n        }\n        .icon {\n            font-size: 3rem;\n            margin-bottom: 1rem;\n        }\n    </style>\n</head>\n<body>\n    <div class=\"error-container\">\n        <div class=\"icon\">\\u26A0\\uFE0F</div>\n        <h1>Better Auth Error</h1>\n        <p>We encountered an issue while processing your request. Please try again or contact the application owner if the problem persists.</p>\n        <a href=\"/\" id=\"returnLink\" class=\"btn\">Return to Application</a>\n        <div class=\"error-code\">Error Code: <span id=\"errorCode\">${sanitize(\n  errorCode\n)}</span></div>\n    </div>\n</body>\n</html>`;\nconst error = createAuthEndpoint(\n  \"/error\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Displays an error page\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"text/html\": {\n                schema: {\n                  type: \"string\",\n                  description: \"The HTML content of the error page\"\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const query = new URL(c.request?.url || \"\").searchParams.get(\"error\") || \"Unknown\";\n    return new Response(html(query), {\n      headers: {\n        \"Content-Type\": \"text/html\"\n      }\n    });\n  }\n);\n\nconst ok = createAuthEndpoint(\n  \"/ok\",\n  {\n    method: \"GET\",\n    metadata: {\n      ...HIDE_METADATA,\n      openapi: {\n        description: \"Check if the API is working\",\n        responses: {\n          \"200\": {\n            description: \"API is working\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    ok: {\n                      type: \"boolean\",\n                      description: \"Indicates if the API is working\"\n                    }\n                  },\n                  required: [\"ok\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    return ctx.json({\n      ok: true\n    });\n  }\n);\n\nconst listUserAccounts = createAuthEndpoint(\n  \"/list-accounts\",\n  {\n    method: \"GET\",\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"List all accounts linked to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"array\",\n                  items: {\n                    type: \"object\",\n                    properties: {\n                      id: {\n                        type: \"string\"\n                      },\n                      providerId: {\n                        type: \"string\"\n                      },\n                      createdAt: {\n                        type: \"string\",\n                        format: \"date-time\"\n                      },\n                      updatedAt: {\n                        type: \"string\",\n                        format: \"date-time\"\n                      },\n                      accountId: {\n                        type: \"string\"\n                      },\n                      scopes: {\n                        type: \"array\",\n                        items: {\n                          type: \"string\"\n                        }\n                      }\n                    },\n                    required: [\n                      \"id\",\n                      \"providerId\",\n                      \"createdAt\",\n                      \"updatedAt\",\n                      \"accountId\",\n                      \"scopes\"\n                    ]\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const accounts = await c.context.internalAdapter.findAccounts(\n      session.user.id\n    );\n    return c.json(\n      accounts.map((a) => ({\n        id: a.id,\n        providerId: a.providerId,\n        createdAt: a.createdAt,\n        updatedAt: a.updatedAt,\n        accountId: a.accountId,\n        scopes: a.scope?.split(\",\") || []\n      }))\n    );\n  }\n);\nconst linkSocialAccount = createAuthEndpoint(\n  \"/link-social\",\n  {\n    method: \"POST\",\n    requireHeaders: true,\n    body: z.object({\n      /**\n       * Callback URL to redirect to after the user has signed in.\n       */\n      callbackURL: z.string().meta({\n        description: \"The URL to redirect to after the user has signed in\"\n      }).optional(),\n      /**\n       * OAuth2 provider to use\n       */\n      provider: SocialProviderListEnum,\n      /**\n       * ID Token for direct authentication without redirect\n       */\n      idToken: z.object({\n        token: z.string(),\n        nonce: z.string().optional(),\n        accessToken: z.string().optional(),\n        refreshToken: z.string().optional(),\n        scopes: z.array(z.string()).optional()\n      }).optional(),\n      /**\n       * Whether to allow sign up for new users\n       */\n      requestSignUp: z.boolean().optional(),\n      /**\n       * Additional scopes to request when linking the account.\n       * This is useful for requesting additional permissions when\n       * linking a social account compared to the initial authentication.\n       */\n      scopes: z.array(z.string()).meta({\n        description: \"Additional scopes to request from the provider\"\n      }).optional(),\n      /**\n       * The URL to redirect to if there is an error during the link process.\n       */\n      errorCallbackURL: z.string().meta({\n        description: \"The URL to redirect to if there is an error during the link process\"\n      }).optional(),\n      /**\n       * Disable automatic redirection to the provider\n       *\n       * This is useful if you want to handle the redirection\n       * yourself like in a popup or a different tab.\n       */\n      disableRedirect: z.boolean().meta({\n        description: \"Disable automatic redirection to the provider. Useful for handling the redirection yourself\"\n      }).optional()\n    }),\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Link a social account to the user\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    url: {\n                      type: \"string\",\n                      description: \"The authorization URL to redirect the user to\"\n                    },\n                    redirect: {\n                      type: \"boolean\",\n                      description: \"Indicates if the user should be redirected to the authorization URL\"\n                    },\n                    status: {\n                      type: \"boolean\"\n                    }\n                  },\n                  required: [\"redirect\"]\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (c) => {\n    const session = c.context.session;\n    const provider = c.context.socialProviders.find(\n      (p) => p.id === c.body.provider\n    );\n    if (!provider) {\n      c.context.logger.error(\n        \"Provider not found. Make sure to add the provider in your auth config\",\n        {\n          provider: c.body.provider\n        }\n      );\n      throw new APIError(\"NOT_FOUND\", {\n        message: BASE_ERROR_CODES.PROVIDER_NOT_FOUND\n      });\n    }\n    if (c.body.idToken) {\n      if (!provider.verifyIdToken) {\n        c.context.logger.error(\n          \"Provider does not support id token verification\",\n          {\n            provider: c.body.provider\n          }\n        );\n        throw new APIError(\"NOT_FOUND\", {\n          message: BASE_ERROR_CODES.ID_TOKEN_NOT_SUPPORTED\n        });\n      }\n      const { token, nonce } = c.body.idToken;\n      const valid = await provider.verifyIdToken(token, nonce);\n      if (!valid) {\n        c.context.logger.error(\"Invalid id token\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.INVALID_TOKEN\n        });\n      }\n      const linkingUserInfo = await provider.getUserInfo({\n        idToken: token,\n        accessToken: c.body.idToken.accessToken,\n        refreshToken: c.body.idToken.refreshToken\n      });\n      if (!linkingUserInfo || !linkingUserInfo?.user) {\n        c.context.logger.error(\"Failed to get user info\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.FAILED_TO_GET_USER_INFO\n        });\n      }\n      const linkingUserId = String(linkingUserInfo.user.id);\n      if (!linkingUserInfo.user.email) {\n        c.context.logger.error(\"User email not found\", {\n          provider: c.body.provider\n        });\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: BASE_ERROR_CODES.USER_EMAIL_NOT_FOUND\n        });\n      }\n      const existingAccounts = await c.context.internalAdapter.findAccounts(\n        session.user.id\n      );\n      const hasBeenLinked = existingAccounts.find(\n        (a) => a.providerId === provider.id && a.accountId === linkingUserId\n      );\n      if (hasBeenLinked) {\n        return c.json({\n          url: \"\",\n          // this is for type inference\n          status: true,\n          redirect: false\n        });\n      }\n      const trustedProviders = c.context.options.account?.accountLinking?.trustedProviders;\n      const isTrustedProvider = trustedProviders?.includes(provider.id);\n      if (!isTrustedProvider && !linkingUserInfo.user.emailVerified || c.context.options.account?.accountLinking?.enabled === false) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: \"Account not linked - linking not allowed\"\n        });\n      }\n      if (linkingUserInfo.user.email !== session.user.email && c.context.options.account?.accountLinking?.allowDifferentEmails !== true) {\n        throw new APIError(\"UNAUTHORIZED\", {\n          message: \"Account not linked - different emails not allowed\"\n        });\n      }\n      try {\n        await c.context.internalAdapter.createAccount(\n          {\n            userId: session.user.id,\n            providerId: provider.id,\n            accountId: linkingUserId,\n            accessToken: c.body.idToken.accessToken,\n            idToken: token,\n            refreshToken: c.body.idToken.refreshToken,\n            scope: c.body.idToken.scopes?.join(\",\")\n          },\n          c\n        );\n      } catch (e) {\n        throw new APIError(\"EXPECTATION_FAILED\", {\n          message: \"Account not linked - unable to create account\"\n        });\n      }\n      if (c.context.options.account?.accountLinking?.updateUserInfoOnLink === true) {\n        try {\n          await c.context.internalAdapter.updateUser(session.user.id, {\n            name: linkingUserInfo.user?.name,\n            image: linkingUserInfo.user?.image\n          });\n        } catch (e) {\n          console.warn(\"Could not update user - \" + e.toString());\n        }\n      }\n      return c.json({\n        url: \"\",\n        // this is for type inference\n        status: true,\n        redirect: false\n      });\n    }\n    const state = await generateState(c, {\n      userId: session.user.id,\n      email: session.user.email\n    });\n    const url = await provider.createAuthorizationURL({\n      state: state.state,\n      codeVerifier: state.codeVerifier,\n      redirectURI: `${c.context.baseURL}/callback/${provider.id}`,\n      scopes: c.body.scopes\n    });\n    return c.json({\n      url: url.toString(),\n      redirect: !c.body.disableRedirect\n    });\n  }\n);\nconst unlinkAccount = createAuthEndpoint(\n  \"/unlink-account\",\n  {\n    method: \"POST\",\n    body: z.object({\n      providerId: z.string(),\n      accountId: z.string().optional()\n    }),\n    use: [freshSessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Unlink an account\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    status: {\n                      type: \"boolean\"\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId } = ctx.body;\n    const accounts = await ctx.context.internalAdapter.findAccounts(\n      ctx.context.session.user.id\n    );\n    if (accounts.length === 1 && !ctx.context.options.account?.accountLinking?.allowUnlinkingAll) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.FAILED_TO_UNLINK_LAST_ACCOUNT\n      });\n    }\n    const accountExist = accounts.find(\n      (account) => accountId ? account.accountId === accountId && account.providerId === providerId : account.providerId === providerId\n    );\n    if (!accountExist) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: BASE_ERROR_CODES.ACCOUNT_NOT_FOUND\n      });\n    }\n    await ctx.context.internalAdapter.deleteAccount(accountExist.id);\n    return ctx.json({\n      status: true\n    });\n  }\n);\nconst getAccessToken = createAuthEndpoint(\n  \"/get-access-token\",\n  {\n    method: \"POST\",\n    body: z.object({\n      providerId: z.string().meta({\n        description: \"The provider ID for the OAuth provider\"\n      }),\n      accountId: z.string().meta({\n        description: \"The account ID associated with the refresh token\"\n      }).optional(),\n      userId: z.string().meta({\n        description: \"The user ID associated with the account\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Get a valid access token, doing a refresh if needed\",\n        responses: {\n          200: {\n            description: \"A Valid access token\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    tokenType: {\n                      type: \"string\"\n                    },\n                    idToken: {\n                      type: \"string\"\n                    },\n                    accessToken: {\n                      type: \"string\"\n                    },\n                    refreshToken: {\n                      type: \"string\"\n                    },\n                    accessTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    },\n                    refreshTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          400: {\n            description: \"Invalid refresh token or provider configuration\"\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId, userId } = ctx.body;\n    const req = ctx.request;\n    const session = await getSessionFromCtx(ctx);\n    if (req && !session) {\n      throw ctx.error(\"UNAUTHORIZED\");\n    }\n    let resolvedUserId = session?.user?.id || userId;\n    if (!resolvedUserId) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Either userId or session is required`\n      });\n    }\n    if (!ctx.context.socialProviders.find((p) => p.id === providerId)) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} is not supported.`\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(resolvedUserId);\n    const account = accounts.find(\n      (acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId\n    );\n    if (!account) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === providerId\n    );\n    if (!provider) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} not found.`\n      });\n    }\n    try {\n      let newTokens = null;\n      const accessTokenExpired = account.accessTokenExpiresAt && new Date(account.accessTokenExpiresAt).getTime() - Date.now() < 5e3;\n      if (account.refreshToken && accessTokenExpired && provider.refreshAccessToken) {\n        newTokens = await provider.refreshAccessToken(\n          account.refreshToken\n        );\n        await ctx.context.internalAdapter.updateAccount(account.id, {\n          accessToken: await setTokenUtil(newTokens.accessToken, ctx.context),\n          accessTokenExpiresAt: newTokens.accessTokenExpiresAt,\n          refreshToken: await setTokenUtil(newTokens.refreshToken, ctx.context),\n          refreshTokenExpiresAt: newTokens.refreshTokenExpiresAt\n        });\n      }\n      const tokens = {\n        accessToken: await decryptOAuthToken(\n          newTokens?.accessToken ?? account.accessToken ?? \"\",\n          ctx.context\n        ),\n        accessTokenExpiresAt: newTokens?.accessTokenExpiresAt ?? account.accessTokenExpiresAt ?? void 0,\n        scopes: account.scope?.split(\",\") ?? [],\n        idToken: newTokens?.idToken ?? account.idToken ?? void 0\n      };\n      return ctx.json(tokens);\n    } catch (error) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Failed to get a valid access token\",\n        cause: error\n      });\n    }\n  }\n);\nconst refreshToken = createAuthEndpoint(\n  \"/refresh-token\",\n  {\n    method: \"POST\",\n    body: z.object({\n      providerId: z.string().meta({\n        description: \"The provider ID for the OAuth provider\"\n      }),\n      accountId: z.string().meta({\n        description: \"The account ID associated with the refresh token\"\n      }).optional(),\n      userId: z.string().meta({\n        description: \"The user ID associated with the account\"\n      }).optional()\n    }),\n    metadata: {\n      openapi: {\n        description: \"Refresh the access token using a refresh token\",\n        responses: {\n          200: {\n            description: \"Access token refreshed successfully\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    tokenType: {\n                      type: \"string\"\n                    },\n                    idToken: {\n                      type: \"string\"\n                    },\n                    accessToken: {\n                      type: \"string\"\n                    },\n                    refreshToken: {\n                      type: \"string\"\n                    },\n                    accessTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    },\n                    refreshTokenExpiresAt: {\n                      type: \"string\",\n                      format: \"date-time\"\n                    }\n                  }\n                }\n              }\n            }\n          },\n          400: {\n            description: \"Invalid refresh token or provider configuration\"\n          }\n        }\n      }\n    }\n  },\n  async (ctx) => {\n    const { providerId, accountId, userId } = ctx.body;\n    const req = ctx.request;\n    const session = await getSessionFromCtx(ctx);\n    if (req && !session) {\n      throw ctx.error(\"UNAUTHORIZED\");\n    }\n    let resolvedUserId = session?.user?.id || userId;\n    if (!resolvedUserId) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Either userId or session is required`\n      });\n    }\n    const accounts = await ctx.context.internalAdapter.findAccounts(resolvedUserId);\n    const account = accounts.find(\n      (acc) => accountId ? acc.id === accountId && acc.providerId === providerId : acc.providerId === providerId\n    );\n    if (!account) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === providerId\n    );\n    if (!provider) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} not found.`\n      });\n    }\n    if (!provider.refreshAccessToken) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: `Provider ${providerId} does not support token refreshing.`\n      });\n    }\n    try {\n      const tokens = await provider.refreshAccessToken(\n        account.refreshToken\n      );\n      await ctx.context.internalAdapter.updateAccount(account.id, {\n        accessToken: await setTokenUtil(tokens.accessToken, ctx.context),\n        refreshToken: await setTokenUtil(tokens.refreshToken, ctx.context),\n        accessTokenExpiresAt: tokens.accessTokenExpiresAt,\n        refreshTokenExpiresAt: tokens.refreshTokenExpiresAt\n      });\n      return ctx.json(tokens);\n    } catch (error) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Failed to refresh access token\",\n        cause: error\n      });\n    }\n  }\n);\nconst accountInfo = createAuthEndpoint(\n  \"/account-info\",\n  {\n    method: \"POST\",\n    use: [sessionMiddleware],\n    metadata: {\n      openapi: {\n        description: \"Get the account info provided by the provider\",\n        responses: {\n          \"200\": {\n            description: \"Success\",\n            content: {\n              \"application/json\": {\n                schema: {\n                  type: \"object\",\n                  properties: {\n                    user: {\n                      type: \"object\",\n                      properties: {\n                        id: {\n                          type: \"string\"\n                        },\n                        name: {\n                          type: \"string\"\n                        },\n                        email: {\n                          type: \"string\"\n                        },\n                        image: {\n                          type: \"string\"\n                        },\n                        emailVerified: {\n                          type: \"boolean\"\n                        }\n                      },\n                      required: [\"id\", \"emailVerified\"]\n                    },\n                    data: {\n                      type: \"object\",\n                      properties: {},\n                      additionalProperties: true\n                    }\n                  },\n                  required: [\"user\", \"data\"],\n                  additionalProperties: false\n                }\n              }\n            }\n          }\n        }\n      }\n    },\n    body: z.object({\n      accountId: z.string().meta({\n        description: \"The provider given account id for which to get the account info\"\n      })\n    })\n  },\n  async (ctx) => {\n    const account = await ctx.context.internalAdapter.findAccount(\n      ctx.body.accountId\n    );\n    if (!account || account.userId !== ctx.context.session.user.id) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Account not found\"\n      });\n    }\n    const provider = ctx.context.socialProviders.find(\n      (p) => p.id === account.providerId\n    );\n    if (!provider) {\n      throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n        message: `Provider account provider is ${account.providerId} but it is not configured`\n      });\n    }\n    const tokens = await getAccessToken({\n      ...ctx,\n      body: {\n        accountId: account.id,\n        providerId: account.providerId\n      },\n      returnHeaders: false\n    });\n    if (!tokens.accessToken) {\n      throw new APIError(\"BAD_REQUEST\", {\n        message: \"Access token not found\"\n      });\n    }\n    const info = await provider.getUserInfo({\n      ...tokens,\n      accessToken: tokens.accessToken\n    });\n    return ctx.json(info);\n  }\n);\n\nconst defuReplaceArrays = createDefu((obj, key, value) => {\n  if (Array.isArray(obj[key]) && Array.isArray(value)) {\n    obj[key] = value;\n    return true;\n  }\n});\nfunction toAuthEndpoints(endpoints, ctx) {\n  const api = {};\n  for (const [key, endpoint] of Object.entries(endpoints)) {\n    api[key] = async (context) => {\n      const authContext = await ctx;\n      let internalContext = {\n        ...context,\n        context: {\n          ...authContext,\n          returned: void 0,\n          responseHeaders: void 0,\n          session: null\n        },\n        path: endpoint.path,\n        headers: context?.headers ? new Headers(context?.headers) : void 0\n      };\n      const { beforeHooks, afterHooks } = getHooks(authContext);\n      const before = await runBeforeHooks(internalContext, beforeHooks);\n      if (\"context\" in before && before.context && typeof before.context === \"object\") {\n        const { headers, ...rest } = before.context;\n        if (headers) {\n          headers.forEach((value, key2) => {\n            internalContext.headers.set(key2, value);\n          });\n        }\n        internalContext = defuReplaceArrays(rest, internalContext);\n      } else if (before) {\n        return before;\n      }\n      internalContext.asResponse = false;\n      internalContext.returnHeaders = true;\n      const result = await endpoint(internalContext).catch((e) => {\n        if (e instanceof APIError) {\n          return {\n            response: e,\n            headers: e.headers ? new Headers(e.headers) : null\n          };\n        }\n        throw e;\n      });\n      if (result && result instanceof Response) {\n        return result;\n      }\n      internalContext.context.returned = result.response;\n      internalContext.context.responseHeaders = result.headers;\n      const after = await runAfterHooks(internalContext, afterHooks);\n      if (after.response) {\n        result.response = after.response;\n      }\n      if (result.response instanceof APIError && shouldPublishLog(authContext.logger.level, \"debug\")) {\n        result.response.stack = result.response.errorStack;\n      }\n      if (result.response instanceof APIError && !context?.asResponse) {\n        throw result.response;\n      }\n      const response = context?.asResponse ? toResponse(result.response, {\n        headers: result.headers\n      }) : context?.returnHeaders ? {\n        headers: result.headers,\n        response: result.response\n      } : result.response;\n      return response;\n    };\n    api[key].path = endpoint.path;\n    api[key].options = endpoint.options;\n  }\n  return api;\n}\nasync function runBeforeHooks(context, hooks) {\n  let modifiedContext = {};\n  for (const hook of hooks) {\n    if (hook.matcher(context)) {\n      const result = await hook.handler({\n        ...context,\n        returnHeaders: false\n      }).catch((e) => {\n        if (e instanceof APIError && shouldPublishLog(context.context.logger.level, \"debug\")) {\n          e.stack = e.errorStack;\n        }\n        throw e;\n      });\n      if (result && typeof result === \"object\") {\n        if (\"context\" in result && typeof result.context === \"object\") {\n          const { headers, ...rest } = result.context;\n          if (headers instanceof Headers) {\n            if (modifiedContext.headers) {\n              headers.forEach((value, key) => {\n                modifiedContext.headers?.set(key, value);\n              });\n            } else {\n              modifiedContext.headers = headers;\n            }\n          }\n          modifiedContext = defuReplaceArrays(rest, modifiedContext);\n          continue;\n        }\n        return result;\n      }\n    }\n  }\n  return { context: modifiedContext };\n}\nasync function runAfterHooks(context, hooks) {\n  for (const hook of hooks) {\n    if (hook.matcher(context)) {\n      const result = await hook.handler(context).catch((e) => {\n        if (e instanceof APIError) {\n          if (shouldPublishLog(context.context.logger.level, \"debug\")) {\n            e.stack = e.errorStack;\n          }\n          return {\n            response: e,\n            headers: e.headers ? new Headers(e.headers) : null\n          };\n        }\n        throw e;\n      });\n      if (result.headers) {\n        result.headers.forEach((value, key) => {\n          if (!context.context.responseHeaders) {\n            context.context.responseHeaders = new Headers({\n              [key]: value\n            });\n          } else {\n            if (key.toLowerCase() === \"set-cookie\") {\n              context.context.responseHeaders.append(key, value);\n            } else {\n              context.context.responseHeaders.set(key, value);\n            }\n          }\n        });\n      }\n      if (result.response) {\n        context.context.returned = result.response;\n      }\n    }\n  }\n  return {\n    response: context.context.returned,\n    headers: context.context.responseHeaders\n  };\n}\nfunction getHooks(authContext) {\n  const plugins = authContext.options.plugins || [];\n  const beforeHooks = [];\n  const afterHooks = [];\n  if (authContext.options.hooks?.before) {\n    beforeHooks.push({\n      matcher: () => true,\n      handler: authContext.options.hooks.before\n    });\n  }\n  if (authContext.options.hooks?.after) {\n    afterHooks.push({\n      matcher: () => true,\n      handler: authContext.options.hooks.after\n    });\n  }\n  const pluginBeforeHooks = plugins.map((plugin) => {\n    if (plugin.hooks?.before) {\n      return plugin.hooks.before;\n    }\n  }).filter((plugin) => plugin !== void 0).flat();\n  const pluginAfterHooks = plugins.map((plugin) => {\n    if (plugin.hooks?.after) {\n      return plugin.hooks.after;\n    }\n  }).filter((plugin) => plugin !== void 0).flat();\n  pluginBeforeHooks.length && beforeHooks.push(...pluginBeforeHooks);\n  pluginAfterHooks.length && afterHooks.push(...pluginAfterHooks);\n  return {\n    beforeHooks,\n    afterHooks\n  };\n}\n\nexport { getCognitoPublicKey as $, deleteUserCallback as A, listUserAccounts as B, linkSocialAccount as C, requestPasswordResetCallback as D, requestPasswordReset as E, forgetPasswordCallback as F, deleteUser as G, HIDE_METADATA as H, setPassword as I, changePassword as J, changeEmail as K, sendVerificationEmail as L, verifyEmail as M, resetPassword as N, forgetPassword as O, signInEmail as P, signOut as Q, callbackOAuth as R, signInSocial as S, sendVerificationEmailFn as T, socialProviders as U, socialProviderList as V, SocialProviderListEnum as W, apple as X, getApplePublicKey as Y, atlassian as Z, cognito as _, createAuthorizationCodeRequest as a, discord as a0, dropbox as a1, facebook as a2, figma as a3, github as a4, linear as a5, linkedin as a6, gitlab as a7, google as a8, kick as a9, microsoft as aa, notion as ab, reddit as ac, roblox as ad, salesforce as ae, spotify as af, tiktok as ag, twitch as ah, twitter as ai, vk as aj, zoom as ak, huggingface as al, slack as am, kakao as an, naver as ao, line as ap, paypal as aq, validateToken as b, createAuthorizationURL as c, createRefreshAccessTokenRequest as d, generateCodeChallenge as e, getOAuth2Tokens as f, generateState as g, encodeOAuthParameter as h, decryptOAuthToken as i, handleOAuthUserInfo as j, createEmailVerificationToken as k, originCheckMiddleware as l, error as m, ok as n, originCheck as o, parseState as p, accountInfo as q, refreshAccessToken as r, setTokenUtil as s, toAuthEndpoints as t, updateUser as u, validateAuthorizationCode as v, wildcardMatch as w, getAccessToken as x, refreshToken as y, unlinkAccount as z };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8321, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.DQunmJlF.mjs"],"sourcesContent":["import { defaultRoles } from '../plugins/organization/access/index.mjs';\nimport * as z from 'zod/v4';\nimport { APIError } from 'better-call';\nimport './better-auth.nqWf7zUe.mjs';\nimport './better-auth.DV5EHeYG.mjs';\nimport './better-auth.CMQ3rA-I.mjs';\nimport '@better-auth/utils/base64';\nimport '@better-auth/utils/hmac';\nimport './better-auth.BjBlybv-.mjs';\nimport '@better-auth/utils/binary';\nimport './better-auth.Dcv8PS7T.mjs';\n\nlet cacheAllRoles = /* @__PURE__ */ new Map();\nconst hasPermission = async (input, ctx) => {\n  let acRoles = { ...input.options.roles || defaultRoles };\n  if (ctx && input.organizationId && input.options.dynamicAccessControl?.enabled && input.options.ac && !input.useMemoryCache) {\n    const roles = await ctx.context.adapter.findMany({\n      model: \"organizationRole\",\n      where: [\n        {\n          field: \"organizationId\",\n          value: input.organizationId\n        }\n      ]\n    });\n    for (const { role, permission: permissionsString } of roles) {\n      if (role in acRoles) continue;\n      const result = z.record(z.string(), z.array(z.string())).safeParse(JSON.parse(permissionsString));\n      if (!result.success) {\n        ctx.context.logger.error(\n          \"[hasPermission] Invalid permissions for role \" + role,\n          {\n            permissions: JSON.parse(permissionsString)\n          }\n        );\n        throw new APIError(\"INTERNAL_SERVER_ERROR\", {\n          message: \"Invalid permissions for role \" + role\n        });\n      }\n      acRoles[role] = input.options.ac.newRole(result.data);\n    }\n  }\n  if (input.useMemoryCache) {\n    acRoles = cacheAllRoles.get(input.organizationId) || acRoles;\n  }\n  cacheAllRoles.set(input.organizationId, acRoles);\n  return hasPermissionFn(input, acRoles);\n};\nconst clientSideHasPermission = async (input) => {\n  const acRoles = input.options.roles || defaultRoles;\n  return hasPermissionFn(input, acRoles);\n};\nconst hasPermissionFn = (input, acRoles) => {\n  if (!input.permissions && !input.permission) return false;\n  const roles = input.role.split(\",\");\n  const creatorRole = input.options.creatorRole || \"owner\";\n  const isCreator = roles.includes(creatorRole);\n  const allowCreatorsAllPermissions = input.allowCreatorAllPermissions || false;\n  if (isCreator && allowCreatorsAllPermissions) return true;\n  for (const role of roles) {\n    const _role = acRoles[role];\n    const result = _role?.authorize(input.permissions ?? input.permission);\n    if (result?.success) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { clientSideHasPermission as c, hasPermission as h };\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AAEA,IAAI,gBAAgB,aAAa,GAAG,IAAI;AACxC,MAAM,gBAAgB,OAAO,OAAO;IAClC,IAAI,UAAU;QAAE,GAAG,MAAM,OAAO,CAAC,KAAK,IAAI,qMAAY;IAAC;IACvD,IAAI,OAAO,MAAM,cAAc,IAAI,MAAM,OAAO,CAAC,oBAAoB,EAAE,WAAW,MAAM,OAAO,CAAC,EAAE,IAAI,CAAC,MAAM,cAAc,EAAE;QAC3H,MAAM,QAAQ,MAAM,IAAI,OAAO,CAAC,OAAO,CAAC,QAAQ,CAAC;YAC/C,OAAO;YACP,OAAO;gBACL;oBACE,OAAO;oBACP,OAAO,MAAM,cAAc;gBAC7B;aACD;QACH;QACA,KAAK,MAAM,EAAE,IAAI,EAAE,YAAY,iBAAiB,EAAE,IAAI,MAAO;YAC3D,IAAI,QAAQ,SAAS;YACrB,MAAM,SAAS,2LAAQ,CAAC,2LAAQ,IAAI,0LAAO,CAAC,2LAAQ,KAAK,SAAS,CAAC,KAAK,KAAK,CAAC;YAC9E,IAAI,CAAC,OAAO,OAAO,EAAE;gBACnB,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,CACtB,kDAAkD,MAClD;oBACE,aAAa,KAAK,KAAK,CAAC;gBAC1B;gBAEF,MAAM,IAAI,2JAAQ,CAAC,yBAAyB;oBAC1C,SAAS,kCAAkC;gBAC7C;YACF;YACA,OAAO,CAAC,KAAK,GAAG,MAAM,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,IAAI;QACtD;IACF;IACA,IAAI,MAAM,cAAc,EAAE;QACxB,UAAU,cAAc,GAAG,CAAC,MAAM,cAAc,KAAK;IACvD;IACA,cAAc,GAAG,CAAC,MAAM,cAAc,EAAE;IACxC,OAAO,gBAAgB,OAAO;AAChC;AACA,MAAM,0BAA0B,OAAO;IACrC,MAAM,UAAU,MAAM,OAAO,CAAC,KAAK,IAAI,qMAAY;IACnD,OAAO,gBAAgB,OAAO;AAChC;AACA,MAAM,kBAAkB,CAAC,OAAO;IAC9B,IAAI,CAAC,MAAM,WAAW,IAAI,CAAC,MAAM,UAAU,EAAE,OAAO;IACpD,MAAM,QAAQ,MAAM,IAAI,CAAC,KAAK,CAAC;IAC/B,MAAM,cAAc,MAAM,OAAO,CAAC,WAAW,IAAI;IACjD,MAAM,YAAY,MAAM,QAAQ,CAAC;IACjC,MAAM,8BAA8B,MAAM,0BAA0B,IAAI;IACxE,IAAI,aAAa,6BAA6B,OAAO;IACrD,KAAK,MAAM,QAAQ,MAAO;QACxB,MAAM,QAAQ,OAAO,CAAC,KAAK;QAC3B,MAAM,SAAS,OAAO,UAAU,MAAM,WAAW,IAAI,MAAM,UAAU;QACrE,IAAI,QAAQ,SAAS;YACnB,OAAO;QACT;IACF;IACA,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8410, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.Ddw8bVyV.mjs"],"sourcesContent":["const twoFactorClient = (options) => {\n  return {\n    id: \"two-factor\",\n    $InferServerPlugin: {},\n    atomListeners: [\n      {\n        matcher: (path) => path.startsWith(\"/two-factor/\"),\n        signal: \"$sessionSignal\"\n      }\n    ],\n    pathMethods: {\n      \"/two-factor/disable\": \"POST\",\n      \"/two-factor/enable\": \"POST\",\n      \"/two-factor/send-otp\": \"POST\",\n      \"/two-factor/generate-backup-codes\": \"POST\"\n    },\n    fetchPlugins: [\n      {\n        id: \"two-factor\",\n        name: \"two-factor\",\n        hooks: {\n          async onSuccess(context) {\n            if (context.data?.twoFactorRedirect) {\n              if (options?.onTwoFactorRedirect) {\n                await options.onTwoFactorRedirect();\n              }\n            }\n          }\n        }\n      }\n    ]\n  };\n};\n\nexport { twoFactorClient as t };\n"],"names":[],"mappings":";;;;AAAA,MAAM,kBAAkB,CAAC;IACvB,OAAO;QACL,IAAI;QACJ,oBAAoB,CAAC;QACrB,eAAe;YACb;gBACE,SAAS,CAAC,OAAS,KAAK,UAAU,CAAC;gBACnC,QAAQ;YACV;SACD;QACD,aAAa;YACX,uBAAuB;YACvB,sBAAsB;YACtB,wBAAwB;YACxB,qCAAqC;QACvC;QACA,cAAc;YACZ;gBACE,IAAI;gBACJ,MAAM;gBACN,OAAO;oBACL,MAAM,WAAU,OAAO;wBACrB,IAAI,QAAQ,IAAI,EAAE,mBAAmB;4BACnC,IAAI,SAAS,qBAAqB;gCAChC,MAAM,QAAQ,mBAAmB;4BACnC;wBACF;oBACF;gBACF;YACF;SACD;IACH;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8452, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/plugins/admin/access/index.mjs"],"sourcesContent":["import { createAccessControl } from '../../access/index.mjs';\nimport '../../../shared/better-auth.DdzSJf-n.mjs';\n\nconst defaultStatements = {\n  user: [\n    \"create\",\n    \"list\",\n    \"set-role\",\n    \"ban\",\n    \"impersonate\",\n    \"delete\",\n    \"set-password\",\n    \"get\",\n    \"update\"\n  ],\n  session: [\"list\", \"revoke\", \"delete\"]\n};\nconst defaultAc = createAccessControl(defaultStatements);\nconst adminAc = defaultAc.newRole({\n  user: [\n    \"create\",\n    \"list\",\n    \"set-role\",\n    \"ban\",\n    \"impersonate\",\n    \"delete\",\n    \"set-password\",\n    \"get\",\n    \"update\"\n  ],\n  session: [\"list\", \"revoke\", \"delete\"]\n});\nconst userAc = defaultAc.newRole({\n  user: [],\n  session: []\n});\nconst defaultRoles = {\n  admin: adminAc,\n  user: userAc\n};\n\nexport { adminAc, defaultAc, defaultRoles, defaultStatements, userAc };\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AACA;;;AAEA,MAAM,oBAAoB;IACxB,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QAAC;QAAQ;QAAU;KAAS;AACvC;AACA,MAAM,YAAY,IAAA,4LAAmB,EAAC;AACtC,MAAM,UAAU,UAAU,OAAO,CAAC;IAChC,MAAM;QACJ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACD;IACD,SAAS;QAAC;QAAQ;QAAU;KAAS;AACvC;AACA,MAAM,SAAS,UAAU,OAAO,CAAC;IAC/B,MAAM,EAAE;IACR,SAAS,EAAE;AACb;AACA,MAAM,eAAe;IACnB,OAAO;IACP,MAAM;AACR","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8518, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.bkwPl2G4.mjs"],"sourcesContent":["import { defaultRoles } from '../plugins/admin/access/index.mjs';\n\nconst hasPermission = (input) => {\n  if (input.userId && input.options?.adminUserIds?.includes(input.userId)) {\n    return true;\n  }\n  if (!input.permissions && !input.permission) {\n    return false;\n  }\n  const roles = (input.role || input.options?.defaultRole || \"user\").split(\",\");\n  const acRoles = input.options?.roles || defaultRoles;\n  for (const role of roles) {\n    const _role = acRoles[role];\n    const result = _role?.authorize(input.permission ?? input.permissions);\n    if (result?.success) {\n      return true;\n    }\n  }\n  return false;\n};\n\nexport { hasPermission as h };\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,gBAAgB,CAAC;IACrB,IAAI,MAAM,MAAM,IAAI,MAAM,OAAO,EAAE,cAAc,SAAS,MAAM,MAAM,GAAG;QACvE,OAAO;IACT;IACA,IAAI,CAAC,MAAM,WAAW,IAAI,CAAC,MAAM,UAAU,EAAE;QAC3C,OAAO;IACT;IACA,MAAM,QAAQ,CAAC,MAAM,IAAI,IAAI,MAAM,OAAO,EAAE,eAAe,MAAM,EAAE,KAAK,CAAC;IACzE,MAAM,UAAU,MAAM,OAAO,EAAE,SAAS,8LAAY;IACpD,KAAK,MAAM,QAAQ,MAAO;QACxB,MAAM,QAAQ,OAAO,CAAC,KAAK;QAC3B,MAAM,SAAS,OAAO,UAAU,MAAM,UAAU,IAAI,MAAM,WAAW;QACrE,IAAI,QAAQ,SAAS;YACnB,OAAO;QACT;IACF;IACA,OAAO;AACT","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8547, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.BpA03GIs.mjs"],"sourcesContent":["const deviceAuthorizationClient = () => {\n  return {\n    id: \"device-authorization\",\n    $InferServerPlugin: {},\n    pathMethods: {\n      \"/device/code\": \"POST\",\n      \"/device/token\": \"POST\",\n      \"/device\": \"GET\",\n      \"/device/approve\": \"POST\",\n      \"/device/deny\": \"POST\"\n    }\n  };\n};\n\nexport { deviceAuthorizationClient as d };\n"],"names":[],"mappings":";;;;AAAA,MAAM,4BAA4B;IAChC,OAAO;QACL,IAAI;QACJ,oBAAoB,CAAC;QACrB,aAAa;YACX,gBAAgB;YAChB,iBAAiB;YACjB,WAAW;YACX,mBAAmB;YACnB,gBAAgB;QAClB;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 8569, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/client/plugins/index.mjs"],"sourcesContent":["import { atom } from 'nanostores';\nimport '@better-fetch/fetch';\nimport '../../shared/better-auth.CMQ3rA-I.mjs';\nimport { u as useAuthQuery } from '../../shared/better-auth.CkGsgrvv.mjs';\nimport { ownerAc, memberAc, adminAc } from '../../plugins/organization/access/index.mjs';\nimport { c as clientSideHasPermission } from '../../shared/better-auth.DQunmJlF.mjs';\nimport { startRegistration, WebAuthnError, startAuthentication } from '@simplewebauthn/browser';\nexport { t as twoFactorClient } from '../../shared/better-auth.Ddw8bVyV.mjs';\nimport { userAc, adminAc as adminAc$1 } from '../../plugins/admin/access/index.mjs';\nimport { h as hasPermission } from '../../shared/better-auth.bkwPl2G4.mjs';\nimport 'zod/v4';\nimport 'better-call';\nimport '../../shared/better-auth.nqWf7zUe.mjs';\nimport '../../shared/better-auth.DV5EHeYG.mjs';\nimport '@better-auth/utils/base64';\nimport '@better-auth/utils/hmac';\nimport '../../shared/better-auth.BjBlybv-.mjs';\nimport '@better-auth/utils/binary';\nimport '../../shared/better-auth.Dcv8PS7T.mjs';\nexport { d as deviceAuthorizationClient } from '../../shared/better-auth.BpA03GIs.mjs';\nimport '../../plugins/access/index.mjs';\nimport '../../shared/better-auth.DdzSJf-n.mjs';\nimport '../../shared/better-auth.CW6D9eSx.mjs';\nimport '@better-auth/utils/hash';\nimport '../../crypto/index.mjs';\nimport '@noble/ciphers/chacha';\nimport '@noble/ciphers/utils';\nimport '@noble/ciphers/webcrypto';\nimport 'jose';\nimport '@noble/hashes/scrypt';\nimport '@better-auth/utils';\nimport '@better-auth/utils/hex';\nimport '@noble/hashes/utils';\nimport '../../shared/better-auth.B4Qoxdgc.mjs';\nimport '@better-auth/utils/random';\nimport '../../shared/better-auth.CuS_eDdK.mjs';\nimport '../../shared/better-auth.UfVWArIB.mjs';\nimport '../../shared/better-auth.BZZKN1g7.mjs';\nimport 'jose/errors';\nimport '../../shared/better-auth.BUPPRXfK.mjs';\nimport 'defu';\n\nconst organizationClient = (options) => {\n  const $listOrg = atom(false);\n  const $activeOrgSignal = atom(false);\n  const $activeMemberSignal = atom(false);\n  const roles = {\n    admin: adminAc,\n    member: memberAc,\n    owner: ownerAc,\n    ...options?.roles\n  };\n  return {\n    id: \"organization\",\n    $InferServerPlugin: {},\n    getActions: ($fetch, _$store, co) => ({\n      $Infer: {\n        ActiveOrganization: {},\n        Organization: {},\n        Invitation: {},\n        Member: {},\n        Team: {}\n      },\n      organization: {\n        checkRolePermission: (data) => {\n          const isAuthorized = clientSideHasPermission({\n            role: data.role,\n            options: {\n              ac: options?.ac,\n              roles\n            },\n            permissions: data.permissions ?? data.permission\n          });\n          return isAuthorized;\n        }\n      }\n    }),\n    getAtoms: ($fetch) => {\n      const listOrganizations = useAuthQuery(\n        $listOrg,\n        \"/organization/list\",\n        $fetch,\n        {\n          method: \"GET\"\n        }\n      );\n      const activeOrganization = useAuthQuery(\n        [$activeOrgSignal],\n        \"/organization/get-full-organization\",\n        $fetch,\n        () => ({\n          method: \"GET\"\n        })\n      );\n      const activeMember = useAuthQuery(\n        [$activeMemberSignal],\n        \"/organization/get-active-member\",\n        $fetch,\n        {\n          method: \"GET\"\n        }\n      );\n      return {\n        $listOrg,\n        $activeOrgSignal,\n        $activeMemberSignal,\n        activeOrganization,\n        listOrganizations,\n        activeMember\n      };\n    },\n    pathMethods: {\n      \"/organization/get-full-organization\": \"GET\"\n    },\n    atomListeners: [\n      {\n        matcher(path) {\n          return path === \"/organization/create\" || path === \"/organization/delete\" || path === \"/organization/update\";\n        },\n        signal: \"$listOrg\"\n      },\n      {\n        matcher(path) {\n          return path.startsWith(\"/organization\");\n        },\n        signal: \"$activeOrgSignal\"\n      },\n      {\n        matcher(path) {\n          return path.startsWith(\"/organization/set-active\");\n        },\n        signal: \"$sessionSignal\"\n      },\n      {\n        matcher(path) {\n          return path.includes(\"/organization/update-member-role\");\n        },\n        signal: \"$activeMemberSignal\"\n      }\n    ]\n  };\n};\nconst inferOrgAdditionalFields = (schema) => {\n  return {};\n};\n\nconst usernameClient = () => {\n  return {\n    id: \"username\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst getPasskeyActions = ($fetch, {\n  $listPasskeys\n}) => {\n  const signInPasskey = async (opts, options) => {\n    const response = await $fetch(\n      \"/passkey/generate-authenticate-options\",\n      {\n        method: \"POST\",\n        body: {\n          email: opts?.email\n        }\n      }\n    );\n    if (!response.data) {\n      return response;\n    }\n    try {\n      const res = await startAuthentication({\n        optionsJSON: response.data,\n        useBrowserAutofill: opts?.autoFill\n      });\n      const verified = await $fetch(\"/passkey/verify-authentication\", {\n        body: {\n          response: res\n        },\n        ...opts?.fetchOptions,\n        ...options,\n        method: \"POST\"\n      });\n      return verified;\n    } catch (e) {\n      return {\n        data: null,\n        error: {\n          message: \"auth cancelled\",\n          status: 400,\n          statusText: \"BAD_REQUEST\"\n        }\n      };\n    }\n  };\n  const registerPasskey = async (opts, fetchOpts) => {\n    const options = await $fetch(\n      \"/passkey/generate-register-options\",\n      {\n        method: \"GET\",\n        query: {\n          ...opts?.authenticatorAttachment && {\n            authenticatorAttachment: opts.authenticatorAttachment\n          },\n          ...opts?.name && {\n            name: opts.name\n          }\n        }\n      }\n    );\n    if (!options.data) {\n      return options;\n    }\n    try {\n      const res = await startRegistration({\n        optionsJSON: options.data,\n        useAutoRegister: opts?.useAutoRegister\n      });\n      const verified = await $fetch(\"/passkey/verify-registration\", {\n        ...opts?.fetchOptions,\n        ...fetchOpts,\n        body: {\n          response: res,\n          name: opts?.name\n        },\n        method: \"POST\"\n      });\n      if (!verified.data) {\n        return verified;\n      }\n      $listPasskeys.set(Math.random());\n    } catch (e) {\n      if (e instanceof WebAuthnError) {\n        if (e.code === \"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED\") {\n          return {\n            data: null,\n            error: {\n              message: \"previously registered\",\n              status: 400,\n              statusText: \"BAD_REQUEST\"\n            }\n          };\n        }\n        if (e.code === \"ERROR_CEREMONY_ABORTED\") {\n          return {\n            data: null,\n            error: {\n              message: \"registration cancelled\",\n              status: 400,\n              statusText: \"BAD_REQUEST\"\n            }\n          };\n        }\n        return {\n          data: null,\n          error: {\n            message: e.message,\n            status: 400,\n            statusText: \"BAD_REQUEST\"\n          }\n        };\n      }\n      return {\n        data: null,\n        error: {\n          message: e instanceof Error ? e.message : \"unknown error\",\n          status: 500,\n          statusText: \"INTERNAL_SERVER_ERROR\"\n        }\n      };\n    }\n  };\n  return {\n    signIn: {\n      /**\n       * Sign in with a registered passkey\n       */\n      passkey: signInPasskey\n    },\n    passkey: {\n      /**\n       * Add a passkey to the user account\n       */\n      addPasskey: registerPasskey\n    },\n    /**\n     * Inferred Internal Types\n     */\n    $Infer: {}\n  };\n};\nconst passkeyClient = () => {\n  const $listPasskeys = atom();\n  return {\n    id: \"passkey\",\n    $InferServerPlugin: {},\n    getActions: ($fetch) => getPasskeyActions($fetch, {\n      $listPasskeys\n    }),\n    getAtoms($fetch) {\n      const listPasskeys = useAuthQuery(\n        $listPasskeys,\n        \"/passkey/list-user-passkeys\",\n        $fetch,\n        {\n          method: \"GET\"\n        }\n      );\n      return {\n        listPasskeys,\n        $listPasskeys\n      };\n    },\n    pathMethods: {\n      \"/passkey/register\": \"POST\",\n      \"/passkey/authenticate\": \"POST\"\n    },\n    atomListeners: [\n      {\n        matcher(path) {\n          return path === \"/passkey/verify-registration\" || path === \"/passkey/delete-passkey\" || path === \"/passkey/update-passkey\";\n        },\n        signal: \"_listPasskeys\"\n      }\n    ]\n  };\n};\n\nconst magicLinkClient = () => {\n  return {\n    id: \"magic-link\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst phoneNumberClient = () => {\n  return {\n    id: \"phoneNumber\",\n    $InferServerPlugin: {},\n    atomListeners: [\n      {\n        matcher(path) {\n          return path === \"/phone-number/update\" || path === \"/phone-number/verify\";\n        },\n        signal: \"$sessionSignal\"\n      }\n    ]\n  };\n};\n\nconst anonymousClient = () => {\n  return {\n    id: \"anonymous\",\n    $InferServerPlugin: {},\n    pathMethods: {\n      \"/sign-in/anonymous\": \"POST\"\n    }\n  };\n};\n\nconst inferAdditionalFields = (schema) => {\n  return {\n    id: \"additional-fields-client\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst adminClient = (options) => {\n  const roles = {\n    admin: adminAc$1,\n    user: userAc,\n    ...options?.roles\n  };\n  return {\n    id: \"admin-client\",\n    $InferServerPlugin: {},\n    getActions: () => ({\n      admin: {\n        checkRolePermission: (data) => {\n          const isAuthorized = hasPermission({\n            role: data.role,\n            options: {\n              ac: options?.ac,\n              roles\n            },\n            permissions: data.permissions ?? data.permission\n          });\n          return isAuthorized;\n        }\n      }\n    }),\n    pathMethods: {\n      \"/admin/list-users\": \"GET\",\n      \"/admin/stop-impersonating\": \"POST\"\n    }\n  };\n};\n\nconst genericOAuthClient = () => {\n  return {\n    id: \"generic-oauth-client\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst jwtClient = () => {\n  return {\n    id: \"better-auth-client\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst multiSessionClient = () => {\n  return {\n    id: \"multi-session\",\n    $InferServerPlugin: {},\n    atomListeners: [\n      {\n        matcher(path) {\n          return path === \"/multi-session/set-active\";\n        },\n        signal: \"$sessionSignal\"\n      }\n    ]\n  };\n};\n\nconst emailOTPClient = () => {\n  return {\n    id: \"email-otp\",\n    $InferServerPlugin: {}\n  };\n};\n\nlet isRequestInProgress = false;\nconst oneTapClient = (options) => {\n  return {\n    id: \"one-tap\",\n    getActions: ($fetch, _) => ({\n      oneTap: async (opts, fetchOptions) => {\n        if (isRequestInProgress) {\n          console.warn(\n            \"A Google One Tap request is already in progress. Please wait.\"\n          );\n          return;\n        }\n        isRequestInProgress = true;\n        try {\n          if (typeof window === \"undefined\" || !window.document) {\n            console.warn(\n              \"Google One Tap is only available in browser environments\"\n            );\n            return;\n          }\n          const { autoSelect, cancelOnTapOutside, context } = opts ?? {};\n          const contextValue = context ?? options.context ?? \"signin\";\n          await loadGoogleScript();\n          await new Promise((resolve, reject) => {\n            let isResolved = false;\n            const baseDelay = options.promptOptions?.baseDelay ?? 1e3;\n            const maxAttempts = options.promptOptions?.maxAttempts ?? 5;\n            window.google?.accounts.id.initialize({\n              client_id: options.clientId,\n              callback: async (response) => {\n                isResolved = true;\n                try {\n                  await $fetch(\"/one-tap/callback\", {\n                    method: \"POST\",\n                    body: { idToken: response.credential },\n                    ...opts?.fetchOptions,\n                    ...fetchOptions\n                  });\n                  if (!opts?.fetchOptions && !fetchOptions || opts?.callbackURL) {\n                    window.location.href = opts?.callbackURL ?? \"/\";\n                  }\n                  resolve();\n                } catch (error) {\n                  console.error(\"Error during One Tap callback:\", error);\n                  reject(error);\n                }\n              },\n              auto_select: autoSelect,\n              cancel_on_tap_outside: cancelOnTapOutside,\n              context: contextValue,\n              ...options.additionalOptions\n            });\n            const handlePrompt = (attempt) => {\n              if (isResolved) return;\n              window.google?.accounts.id.prompt((notification) => {\n                if (isResolved) return;\n                if (notification.isDismissedMoment && notification.isDismissedMoment()) {\n                  if (attempt < maxAttempts) {\n                    const delay = Math.pow(2, attempt) * baseDelay;\n                    setTimeout(() => handlePrompt(attempt + 1), delay);\n                  } else {\n                    opts?.onPromptNotification?.(notification);\n                  }\n                } else if (notification.isSkippedMoment && notification.isSkippedMoment()) {\n                  if (attempt < maxAttempts) {\n                    const delay = Math.pow(2, attempt) * baseDelay;\n                    setTimeout(() => handlePrompt(attempt + 1), delay);\n                  } else {\n                    opts?.onPromptNotification?.(notification);\n                  }\n                }\n              });\n            };\n            handlePrompt(0);\n          });\n        } catch (error) {\n          console.error(\"Error during Google One Tap flow:\", error);\n          throw error;\n        } finally {\n          isRequestInProgress = false;\n        }\n      }\n    }),\n    getAtoms($fetch) {\n      return {};\n    }\n  };\n};\nconst loadGoogleScript = () => {\n  return new Promise((resolve) => {\n    if (window.googleScriptInitialized) {\n      resolve();\n      return;\n    }\n    const script = document.createElement(\"script\");\n    script.src = \"https://accounts.google.com/gsi/client\";\n    script.async = true;\n    script.defer = true;\n    script.onload = () => {\n      window.googleScriptInitialized = true;\n      resolve();\n    };\n    document.head.appendChild(script);\n  });\n};\n\nconst customSessionClient = () => {\n  return InferServerPlugin();\n};\n\nconst InferServerPlugin = () => {\n  return {\n    id: \"infer-server-plugin\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst ssoClient = () => {\n  return {\n    id: \"sso-client\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst oidcClient = () => {\n  return {\n    id: \"oidc-client\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst apiKeyClient = () => {\n  return {\n    id: \"api-key\",\n    $InferServerPlugin: {},\n    pathMethods: {\n      \"/api-key/create\": \"POST\",\n      \"/api-key/delete\": \"POST\",\n      \"/api-key/delete-all-expired-api-keys\": \"POST\"\n    }\n  };\n};\n\nconst oneTimeTokenClient = () => {\n  return {\n    id: \"one-time-token\",\n    $InferServerPlugin: {}\n  };\n};\n\nconst siweClient = () => {\n  return {\n    id: \"siwe\",\n    $InferServerPlugin: {}\n  };\n};\n\nfunction getCookieValue(name) {\n  if (typeof document === \"undefined\") {\n    return null;\n  }\n  const cookie = document.cookie.split(\"; \").find((row) => row.startsWith(`${name}=`));\n  return cookie ? cookie.split(\"=\")[1] : null;\n}\nconst lastLoginMethodClient = (config = {}) => {\n  const cookieName = config.cookieName || \"better-auth.last_used_login_method\";\n  return {\n    id: \"last-login-method-client\",\n    getActions() {\n      return {\n        /**\n         * Get the last used login method from cookies\n         * @returns The last used login method or null if not found\n         */\n        getLastUsedLoginMethod: () => {\n          return getCookieValue(cookieName);\n        },\n        /**\n         * Clear the last used login method cookie\n         * This sets the cookie with an expiration date in the past\n         */\n        clearLastUsedLoginMethod: () => {\n          if (typeof document !== \"undefined\") {\n            document.cookie = `${cookieName}=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;`;\n          }\n        },\n        /**\n         * Check if a specific login method was the last used\n         * @param method The method to check\n         * @returns True if the method was the last used, false otherwise\n         */\n        isLastUsedLoginMethod: (method) => {\n          const lastMethod = getCookieValue(cookieName);\n          return lastMethod === method;\n        }\n      };\n    }\n  };\n};\n\nexport { InferServerPlugin, adminClient, anonymousClient, apiKeyClient, customSessionClient, emailOTPClient, genericOAuthClient, getPasskeyActions, inferAdditionalFields, inferOrgAdditionalFields, jwtClient, lastLoginMethodClient, magicLinkClient, multiSessionClient, oidcClient, oneTapClient, oneTimeTokenClient, organizationClient, passkeyClient, phoneNumberClient, siweClient, ssoClient, usernameClient };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 9185, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.ffWeg50w.mjs"],"sourcesContent":["const PROTO_POLLUTION_PATTERNS = {\n  proto: /\"(?:_|\\\\u0{2}5[Ff]){2}(?:p|\\\\u0{2}70)(?:r|\\\\u0{2}72)(?:o|\\\\u0{2}6[Ff])(?:t|\\\\u0{2}74)(?:o|\\\\u0{2}6[Ff])(?:_|\\\\u0{2}5[Ff]){2}\"\\s*:/,\n  constructor: /\"(?:c|\\\\u0063)(?:o|\\\\u006[Ff])(?:n|\\\\u006[Ee])(?:s|\\\\u0073)(?:t|\\\\u0074)(?:r|\\\\u0072)(?:u|\\\\u0075)(?:c|\\\\u0063)(?:t|\\\\u0074)(?:o|\\\\u006[Ff])(?:r|\\\\u0072)\"\\s*:/,\n  protoShort: /\"__proto__\"\\s*:/,\n  constructorShort: /\"constructor\"\\s*:/\n};\nconst JSON_SIGNATURE = /^\\s*[\"[{]|^\\s*-?\\d{1,16}(\\.\\d{1,17})?([Ee][+-]?\\d+)?\\s*$/;\nconst SPECIAL_VALUES = {\n  true: true,\n  false: false,\n  null: null,\n  undefined: void 0,\n  nan: Number.NaN,\n  infinity: Number.POSITIVE_INFINITY,\n  \"-infinity\": Number.NEGATIVE_INFINITY\n};\nconst ISO_DATE_REGEX = /^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})(?:\\.(\\d{1,7}))?(?:Z|([+-])(\\d{2}):(\\d{2}))$/;\nfunction isValidDate(date) {\n  return date instanceof Date && !isNaN(date.getTime());\n}\nfunction parseISODate(value) {\n  const match = ISO_DATE_REGEX.exec(value);\n  if (!match) return null;\n  const [\n    ,\n    year,\n    month,\n    day,\n    hour,\n    minute,\n    second,\n    ms,\n    offsetSign,\n    offsetHour,\n    offsetMinute\n  ] = match;\n  let date = new Date(\n    Date.UTC(\n      parseInt(year, 10),\n      parseInt(month, 10) - 1,\n      parseInt(day, 10),\n      parseInt(hour, 10),\n      parseInt(minute, 10),\n      parseInt(second, 10),\n      ms ? parseInt(ms.padEnd(3, \"0\"), 10) : 0\n    )\n  );\n  if (offsetSign) {\n    const offset = (parseInt(offsetHour, 10) * 60 + parseInt(offsetMinute, 10)) * (offsetSign === \"+\" ? -1 : 1);\n    date.setUTCMinutes(date.getUTCMinutes() + offset);\n  }\n  return isValidDate(date) ? date : null;\n}\nfunction betterJSONParse(value, options = {}) {\n  const {\n    strict = false,\n    warnings = false,\n    reviver,\n    parseDates = true\n  } = options;\n  if (typeof value !== \"string\") {\n    return value;\n  }\n  const trimmed = value.trim();\n  if (trimmed[0] === '\"' && trimmed.endsWith('\"') && !trimmed.slice(1, -1).includes('\"')) {\n    return trimmed.slice(1, -1);\n  }\n  const lowerValue = trimmed.toLowerCase();\n  if (lowerValue.length <= 9 && lowerValue in SPECIAL_VALUES) {\n    return SPECIAL_VALUES[lowerValue];\n  }\n  if (!JSON_SIGNATURE.test(trimmed)) {\n    if (strict) {\n      throw new SyntaxError(\"[better-json] Invalid JSON\");\n    }\n    return value;\n  }\n  const hasProtoPattern = Object.entries(PROTO_POLLUTION_PATTERNS).some(\n    ([key, pattern]) => {\n      const matches = pattern.test(trimmed);\n      if (matches && warnings) {\n        console.warn(\n          `[better-json] Detected potential prototype pollution attempt using ${key} pattern`\n        );\n      }\n      return matches;\n    }\n  );\n  if (hasProtoPattern && strict) {\n    throw new Error(\n      \"[better-json] Potential prototype pollution attempt detected\"\n    );\n  }\n  try {\n    const secureReviver = (key, value2) => {\n      if (key === \"__proto__\" || key === \"constructor\" && value2 && typeof value2 === \"object\" && \"prototype\" in value2) {\n        if (warnings) {\n          console.warn(\n            `[better-json] Dropping \"${key}\" key to prevent prototype pollution`\n          );\n        }\n        return void 0;\n      }\n      if (parseDates && typeof value2 === \"string\") {\n        const date = parseISODate(value2);\n        if (date) {\n          return date;\n        }\n      }\n      return reviver ? reviver(key, value2) : value2;\n    };\n    return JSON.parse(trimmed, secureReviver);\n  } catch (error) {\n    if (strict) {\n      throw error;\n    }\n    return value;\n  }\n}\nfunction parseJSON(value, options = { strict: true }) {\n  return betterJSONParse(value, options);\n}\n\nexport { parseJSON as p };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 9283, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/shared/better-auth.D7Ni8r_z.mjs"],"sourcesContent":["import { createFetch } from '@better-fetch/fetch';\nimport { a as getBaseURL } from './better-auth.CuS_eDdK.mjs';\nimport { atom } from 'nanostores';\nimport { u as useAuthQuery } from './better-auth.CkGsgrvv.mjs';\nimport { p as parseJSON } from './better-auth.ffWeg50w.mjs';\n\nconst redirectPlugin = {\n  id: \"redirect\",\n  name: \"Redirect\",\n  hooks: {\n    onSuccess(context) {\n      if (context.data?.url && context.data?.redirect) {\n        if (typeof window !== \"undefined\" && window.location) {\n          if (window.location) {\n            try {\n              window.location.href = context.data.url;\n            } catch {\n            }\n          }\n        }\n      }\n    }\n  }\n};\n\nfunction getSessionAtom($fetch) {\n  const $signal = atom(false);\n  const session = useAuthQuery($signal, \"/get-session\", $fetch, {\n    method: \"GET\"\n  });\n  return {\n    session,\n    $sessionSignal: $signal\n  };\n}\n\nconst getClientConfig = (options) => {\n  const isCredentialsSupported = \"credentials\" in Request.prototype;\n  const baseURL = getBaseURL(options?.baseURL, options?.basePath);\n  const pluginsFetchPlugins = options?.plugins?.flatMap((plugin) => plugin.fetchPlugins).filter((pl) => pl !== void 0) || [];\n  const lifeCyclePlugin = {\n    id: \"lifecycle-hooks\",\n    name: \"lifecycle-hooks\",\n    hooks: {\n      onSuccess: options?.fetchOptions?.onSuccess,\n      onError: options?.fetchOptions?.onError,\n      onRequest: options?.fetchOptions?.onRequest,\n      onResponse: options?.fetchOptions?.onResponse\n    }\n  };\n  const { onSuccess, onError, onRequest, onResponse, ...restOfFetchOptions } = options?.fetchOptions || {};\n  const $fetch = createFetch({\n    baseURL,\n    ...isCredentialsSupported ? { credentials: \"include\" } : {},\n    method: \"GET\",\n    jsonParser(text) {\n      if (!text) {\n        return null;\n      }\n      return parseJSON(text, {\n        strict: false\n      });\n    },\n    customFetchImpl: fetch,\n    ...restOfFetchOptions,\n    plugins: [\n      lifeCyclePlugin,\n      ...restOfFetchOptions.plugins || [],\n      ...options?.disableDefaultFetchPlugins ? [] : [redirectPlugin],\n      ...pluginsFetchPlugins\n    ]\n  });\n  const { $sessionSignal, session } = getSessionAtom($fetch);\n  const plugins = options?.plugins || [];\n  let pluginsActions = {};\n  let pluginsAtoms = {\n    $sessionSignal,\n    session\n  };\n  let pluginPathMethods = {\n    \"/sign-out\": \"POST\",\n    \"/revoke-sessions\": \"POST\",\n    \"/revoke-other-sessions\": \"POST\",\n    \"/delete-user\": \"POST\"\n  };\n  const atomListeners = [\n    {\n      signal: \"$sessionSignal\",\n      matcher(path) {\n        return path === \"/sign-out\" || path === \"/update-user\" || path.startsWith(\"/sign-in\") || path.startsWith(\"/sign-up\") || path === \"/delete-user\" || path === \"/verify-email\";\n      }\n    }\n  ];\n  for (const plugin of plugins) {\n    if (plugin.getAtoms) {\n      Object.assign(pluginsAtoms, plugin.getAtoms?.($fetch));\n    }\n    if (plugin.pathMethods) {\n      Object.assign(pluginPathMethods, plugin.pathMethods);\n    }\n    if (plugin.atomListeners) {\n      atomListeners.push(...plugin.atomListeners);\n    }\n  }\n  const $store = {\n    notify: (signal) => {\n      pluginsAtoms[signal].set(\n        !pluginsAtoms[signal].get()\n      );\n    },\n    listen: (signal, listener) => {\n      pluginsAtoms[signal].subscribe(listener);\n    },\n    atoms: pluginsAtoms\n  };\n  for (const plugin of plugins) {\n    if (plugin.getActions) {\n      Object.assign(\n        pluginsActions,\n        plugin.getActions?.($fetch, $store, options)\n      );\n    }\n  }\n  return {\n    pluginsActions,\n    pluginsAtoms,\n    pluginPathMethods,\n    atomListeners,\n    $fetch,\n    $store\n  };\n};\n\nfunction isAtom(value) {\n  return typeof value === \"object\" && value !== null && \"get\" in value && typeof value.get === \"function\" && \"lc\" in value && typeof value.lc === \"number\";\n}\n\nfunction getMethod(path, knownPathMethods, args) {\n  const method = knownPathMethods[path];\n  const { fetchOptions, query, ...body } = args || {};\n  if (method) {\n    return method;\n  }\n  if (fetchOptions?.method) {\n    return fetchOptions.method;\n  }\n  if (body && Object.keys(body).length > 0) {\n    return \"POST\";\n  }\n  return \"GET\";\n}\nfunction createDynamicPathProxy(routes, client, knownPathMethods, atoms, atomListeners) {\n  function createProxy(path = []) {\n    return new Proxy(function() {\n    }, {\n      get(target, prop) {\n        if (prop === \"then\" || prop === \"catch\" || prop === \"finally\") {\n          return void 0;\n        }\n        const fullPath = [...path, prop];\n        let current = routes;\n        for (const segment of fullPath) {\n          if (current && typeof current === \"object\" && segment in current) {\n            current = current[segment];\n          } else {\n            current = void 0;\n            break;\n          }\n        }\n        if (typeof current === \"function\") {\n          return current;\n        }\n        if (isAtom(current)) {\n          return current;\n        }\n        return createProxy(fullPath);\n      },\n      apply: async (_, __, args) => {\n        const routePath = \"/\" + path.map(\n          (segment) => segment.replace(/[A-Z]/g, (letter) => `-${letter.toLowerCase()}`)\n        ).join(\"/\");\n        const arg = args[0] || {};\n        const fetchOptions = args[1] || {};\n        const { query, fetchOptions: argFetchOptions, ...body } = arg;\n        const options = {\n          ...fetchOptions,\n          ...argFetchOptions\n        };\n        const method = getMethod(routePath, knownPathMethods, arg);\n        return await client(routePath, {\n          ...options,\n          body: method === \"GET\" ? void 0 : {\n            ...body,\n            ...options?.body || {}\n          },\n          query: query || options?.query,\n          method,\n          async onSuccess(context) {\n            await options?.onSuccess?.(context);\n            const matches = atomListeners?.find((s) => s.matcher(routePath));\n            if (!matches) return;\n            const signal = atoms[matches.signal];\n            if (!signal) return;\n            const val = signal.get();\n            setTimeout(() => {\n              signal.set(!val);\n            }, 10);\n          }\n        });\n      }\n    });\n  }\n  return createProxy();\n}\n\nexport { createDynamicPathProxy as c, getClientConfig as g };\n"],"names":[],"mappings":"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","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 9501, "column": 0}, "map": {"version":3,"sources":["file:///D:/github/nakafa.com-main/node_modules/better-auth/dist/client/react/index.mjs"],"sourcesContent":["import { g as getClientConfig, c as createDynamicPathProxy } from '../../shared/better-auth.D7Ni8r_z.mjs';\nimport { listenKeys } from 'nanostores';\nimport { useRef, useCallback, useSyncExternalStore } from 'react';\nimport '@better-fetch/fetch';\nimport '../../shared/better-auth.CuS_eDdK.mjs';\nimport '../../shared/better-auth.CMQ3rA-I.mjs';\nimport '../../shared/better-auth.DdzSJf-n.mjs';\nimport '../../shared/better-auth.CkGsgrvv.mjs';\nimport '../../shared/better-auth.ffWeg50w.mjs';\n\nfunction useStore(store, options = {}) {\n  let snapshotRef = useRef(store.get());\n  const { keys, deps = [store, keys] } = options;\n  let subscribe = useCallback((onChange) => {\n    const emitChange = (value) => {\n      if (snapshotRef.current === value) return;\n      snapshotRef.current = value;\n      onChange();\n    };\n    emitChange(store.value);\n    if (keys?.length) {\n      return listenKeys(store, keys, emitChange);\n    }\n    return store.listen(emitChange);\n  }, deps);\n  let get = () => snapshotRef.current;\n  return useSyncExternalStore(subscribe, get, get);\n}\n\nfunction getAtomKey(str) {\n  return `use${capitalizeFirstLetter(str)}`;\n}\nfunction capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nfunction createAuthClient(options) {\n  const {\n    pluginPathMethods,\n    pluginsActions,\n    pluginsAtoms,\n    $fetch,\n    $store,\n    atomListeners\n  } = getClientConfig(options);\n  let resolvedHooks = {};\n  for (const [key, value] of Object.entries(pluginsAtoms)) {\n    resolvedHooks[getAtomKey(key)] = () => useStore(value);\n  }\n  const routes = {\n    ...pluginsActions,\n    ...resolvedHooks,\n    $fetch,\n    $store\n  };\n  const proxy = createDynamicPathProxy(\n    routes,\n    $fetch,\n    pluginPathMethods,\n    pluginsAtoms,\n    atomListeners\n  );\n  return proxy;\n}\n\nexport { capitalizeFirstLetter, createAuthClient, useStore };\n"],"names":[],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAEA,SAAS,SAAS,KAAK,EAAE,UAAU,CAAC,CAAC;IACnC,IAAI,cAAc,IAAA,+MAAM,EAAC,MAAM,GAAG;IAClC,MAAM,EAAE,IAAI,EAAE,OAAO;QAAC;QAAO;KAAK,EAAE,GAAG;IACvC,IAAI,YAAY,IAAA,oNAAW,EAAC,CAAC;QAC3B,MAAM,aAAa,CAAC;YAClB,IAAI,YAAY,OAAO,KAAK,OAAO;YACnC,YAAY,OAAO,GAAG;YACtB;QACF;QACA,WAAW,MAAM,KAAK;QACtB,IAAI,MAAM,QAAQ;YAChB,OAAO,IAAA,mKAAU,EAAC,OAAO,MAAM;QACjC;QACA,OAAO,MAAM,MAAM,CAAC;IACtB,GAAG;IACH,IAAI,MAAM,IAAM,YAAY,OAAO;IACnC,OAAO,IAAA,6NAAoB,EAAC,WAAW,KAAK;AAC9C;AAEA,SAAS,WAAW,GAAG;IACrB,OAAO,CAAC,GAAG,EAAE,sBAAsB,MAAM;AAC3C;AACA,SAAS,sBAAsB,GAAG;IAChC,OAAO,IAAI,MAAM,CAAC,GAAG,WAAW,KAAK,IAAI,KAAK,CAAC;AACjD;AACA,SAAS,iBAAiB,OAAO;IAC/B,MAAM,EACJ,iBAAiB,EACjB,cAAc,EACd,YAAY,EACZ,MAAM,EACN,MAAM,EACN,aAAa,EACd,GAAG,IAAA,oLAAe,EAAC;IACpB,IAAI,gBAAgB,CAAC;IACrB,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,cAAe;QACvD,aAAa,CAAC,WAAW,KAAK,GAAG,IAAM,SAAS;IAClD;IACA,MAAM,SAAS;QACb,GAAG,cAAc;QACjB,GAAG,aAAa;QAChB;QACA;IACF;IACA,MAAM,QAAQ,IAAA,oLAAsB,EAClC,QACA,QACA,mBACA,cACA;IAEF,OAAO;AACT","ignoreList":[0],"debugId":null}}]
}